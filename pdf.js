/**
 * @licstart El siguiente es el aviso de licencia completo para el
 * Código JavaScript en esta página
 *
 * Copyright 2022 Fundación Mozilla
 *
 * Licenciado bajo la Licencia Apache, Versión 2.0 (la "Licencia");
 * no puedes usar este archivo excepto en cumplimiento con la Licencia.
 * Puede obtener una copia de la Licencia en
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * A menos que lo exija la ley aplicable o se acuerde por escrito, el software
 * distribuido bajo la Licencia se distribuye "TAL CUAL",
 * SIN GARANTÍAS NI CONDICIONES DE NINGÚN TIPO, ya sean expresas o implícitas.
 * Consulte la Licencia para conocer los permisos y el idioma específico que rigen.
 * limitaciones bajo la Licencia.
 *
 * @licend Lo anterior es el aviso de licencia completo para el
 * Código JavaScript en esta página
 */
!función webpackUniversalModuleDefinition(t,e){"objeto"==tipo de exportaciones&&"objeto"==tipo de módulo?module.exports=e():"función"==tipo de definición&&define.amd?define("pdfjs-dist/build/pdf",[],e):"objeto"==tipo de exportaciones?exports["pdfjs-dist/build/pdf"]=e():t["pdfjs-dist/build/pdf"]=t.pdfjsLib=e()}(globalThis,(()=>(()=>{"uso estricto";var __webpack_modules__=[,(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.UNSUPPORTED_FEATURES=e.TextRenderingMode=e.StreamType=e.RenderingIntentFlag=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatE Error=e.FontType=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.AnnotationType=e.AnnotationStateModelType=e.AnnotationReviewState=e.AnnotationReplyType=e.AnnotationMode=e.AnnotationMarkedState=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0; e.arrayByteLength=arrayByteLength; e.arraysToBytes=función arraysToBytes(t){const e=t.length;if(1===e&&t[0]instanciadeUint8Array)devuelve t[0];let s=0;for(let n=0;n<e;n++)s+=arrayByteLength(t[n]);let n=0;const i=newUint8Array(s);for(let s=0;s<e;s++){let e=t[s];e instanciadeUint8Array||(e="string"==typeof e?stringToBytes(e):newUint8Array(e));const r=e.byteLength;i.set(e,n);n+=r}devuelve i};e.assert=función assert(t,e){t||unreachable(e)};e.bytesToString=función bytesToString(t){"object"==typeof t&&null!==t&&void 0!==t.length||unreachable("Argumento inválido para bytesToString");const e=t.length,s=8192;if(e<s)return String.fromCharCode.apply(null,t);const n=[];for(let i=0;i<e;i+=s){const r=Math.min(i+s,e),a=t.subarray(i,r);n.push(String.fromCharCode.apply(null,a))}return n.join("")};e.createPromiseCapability=función createPromiseCapability(){const t=Object.create(null);let e=!1;Object.defineProperty(t,"resuelto",{get:()=>e});t.promise=new Promise((function(s,n){t.resolve=function(t){e=!0;s(t)};t.reject=function(t){e=!0;n(t)}}));return t};e.createValidAbsoluteUrl=function createValidAbsoluteUrl(t,e=null,s=null){if(!t)return null;try{if(s&&"string"==typeof t){if(s.addDefaultProtocol&&t.startsWith("www.")){constante e=t.match(/\./g);e&&e.length>=2&&(t=`http://${t}`)}if(s.tryConvertEncoding)try{t=stringToUTF8String(t)}catch(t){}}const n=e?new URL(t,e):new URL(t);if(function _isValidProtocol(t){if(!t)return!1;switch(t.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;predeterminado:return!1}}(n))return n}catch(t){}return null};e.escapeString=función escapeString(t){return t.replace(/([()\\\n\r])/g,(t=>"\n"===t?"\\n":"\r"===t?"\\r":`\\${t}`))};e.getModificationDate=función getModificationDate(t=new Fecha){return[t.getUTCFullYear().toString(),(t.getUTCMonth()+1).toString().padStart(2,"0"),t.getUTCDate().toString().padStart(2,"0"),t.getUTCHours().toString().padStart(2,"0"),t.getUTCMinutes().toString().padStart(2,"0"),t.getUTCSecondas().toString().padStart(2,"0")].join("")};e.getVerbosityLevel=función getVerbosityLevel(){return i};e.info=función info(t){i>=n.INFOS&&console.log(`Info: ${t}`)};e.isArrayBuffer=función isArrayBuffer(t){return"object"==typeof t&&null!==t&&void 0!==t.byteLength};e.isArrayEqual=función isArrayEqual(t,e){si(t.length!==e.length)devuelve!1;para(let s=0,n=t.length;s<n;s++)si(t[s]!==e[s])devuelve!1;devuelve!0};e.isAscii=función isAscii(t){devuelve/^[\x00-\x7F]*$/.test(t)};e.objectFromMap=función objectFromMap(t){const e=Object.create(null);para(const[s,n]of t)e[s]=n;devuelve e};e.objectSize=función objectSize(t){devuelve Object.keys(t).length};e.setVerbosityLevel=función setVerbosityLevel(t){Number.isInteger(t)&&(i=t)};e.shadow=shadow;e.string32=function string32(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,255&t)};e.stringToBytes=stringToBytes;e.stringToPDFString=function stringToPDFString(t){if(t[0]>="ï"){let e;"þ"===t[0]&&"ÿ"===t[1]?e="utf-16be":"ÿ"===t[0]&&"þ"===t[1]?e="utf-16le":"ï"===t[0]&&"»"===t[1]&&"¿"===t[2]&&(e="utf-8");if(e)try{const s=new TextDecoder(e,{fatal:!0}),n=stringToBytes(t);return s.decode(n)}catch(t){warn(`stringToPDFString: "${t}".`)}}const e=[];for(let s=0,n=t.length;s<n;s++){const n=o[t.charCodeAt(s)];e.push(n?String.fromCharCode(n):t.charAt(s))}devuelve e.join("")};e.stringToUTF16BEString=función stringToUTF16BEString(t){const e=["þÿ"];for(let s=0,n=t.length;s<n;s++){const n=t.charCodeAt(s);e.push(String.fromCharCode(n>>8&255),String.fromCharCode(255&n))}devuelve e.join("")};e.stringToUTF8String=stringToUTF8String;e.unreachable=inalcanzable;e.utf8StringToString=función utf8StringToString(t){devuelve unescape(encodeURIComponent(t))};e.warn=warn;s(2);e.IDENTITY_MATRIX=[1,0,0,1,0,0];e.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0];e.LINE_FACTOR=1.35;e.LINE_DESCENT_FACTOR=.35;e.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ALMACENAMIENTO:32,ANOTATIONS_DISABLE:64,OPLIST:256};e.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};e.AnnotationEditorPrefix="pdfjs_internal_editor_";e.Tipo de editor de anotaciones = {DESHABILITAR: -1, NINGUNO: 0, TEXTO LIBRE: 3, TINTA: 15}; e. Tipo de parámetros del editor de anotaciones = {TAMAÑO DE TEXTO LIBRE: 1, COLOR DE TEXTO LIBRE: 2, OPACIDAD DE TEXTO LIBRE: 3, COLOR DE TINTA: 11, GROSOR DE TINTA: 12, OPACIDAD DE TINTA: 13}; e. Indicador de permiso = {IMPRIMIR: 4, MODIFICAR_ CONTENIDO: 8, COPIA: 16, MODIFICAR ANOTACIONES: 32, RELLENAR FORMULARIOS INTERACTIVOS: 256, COPIAR PARA ACCESIBILIDAD: 512, ENSAMBLAR: 1024, IMPRESIÓN DE ALTA CALIDAD: 2048}; e.TextRenderingMode={RELLENAR: 0, TRAZO: 1, RELLENAR TRAZO: 2, INVISIBLE: 3, RELLENAR AÑADIR A RUTA: 4, TRAZO E_AÑADIR_A_RUTA:5,TRAZO_DE_RELLENO_AÑADIR_A_RUTA:6,AÑADIR_A_RUTA:7,MÁSCARA_DE_RELLENO_AÑADIR_A_INDICADOR_DE_RUTA:4};e.Tipo_de_imagen={ESCALA_DE_GRASES_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.Tipo_de_anotación={TEXTO:1,ENLACE:2,TEXTO_LIBRE:3,LÍNEA:4,CUADRADO:5,CÍRCULO:6,P OLÍGONO: 7, POLILÍNEA: 8, RESALTAR: 9, SUBRAYADO: 10, GARABATO: 11, TACHADO: 12, SELLO: 13, SIGNO DE INTERCAMBIO: 14, TINTA: 15, VENTANA EMERGENTE: 16, ARCHIVO ADJUNTO: 17, SONIDO: 18, PELÍCULA: 19, WIDGET: 20, PANTALLA: 21, MARCA DE IMPRESORA: 22, TRAPNET: 23, MARCA DE AGUA: 24, TRES: 25, CENSURA: 26};e .AnnotationStateModelType={MARKED:"Marcado",REVIEW:"Revisar"};e.AnnotationMarkedState={MARKED:"Marcado",UNMARKED:"Sin marcar"};e.AnnotationReviewState={ACCEPTED:"Aceptado",REJECTED:"Rechazado",CANCELLED:"Cancelado",COMPLETED:"Completado",NONE:"Ninguno"};e.AnnotationReplyType={GROUP:"Grupo",REPLY:"R"};e.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.Annotatio nFieldFlag={SOLO LECTURA:1, REQUERIDO:2, SIN EXPORTACIÓN:4, MULTILÍNEA:4096, CONTRASEÑA:8192, SIN ACTIVAR Y DESACTIVAR:16384, RADIO:32768, BOTÓN:65536, COMBO:131072, EDITAR:262144, ORDENAR:524288, SELECCIONAR ARCHIVO:1048576, SELECCIONAR MÚLTIPLE:2097152, SIN REVISAR ORTOGRAFÍA:41943 04, DONOTSCROLL:8388608, COMB:16777216, RICHTEXT:33554432, RADIOSINUNISON:33554432, COMMITONSELCHANGE:67108864}; e. AnnotationBorderStyleType={SÓLIDO:1, DISCRETO:2, BISELADO:3, REGULADO:4, SUBRAYADO:5}; e. AnnotationActionEventType={E:"Entrada del ratón", X:"Salida del ratón", D:"Pulsar el ratón", U:"Pulsar el ratón Arriba", Fo: "Enfoque", Bl: "Desenfoque", PO: "Página abierta", PC: "Página cerrada", PV: "Página visible", PI: "Página invisible", K: "Pulsación de tecla", F: "Formato", V: "Validar", C: "Calcular"}; e.DocumentActionEventType={WC: "Se cerrará", WS: "Se guardará", DS: "Se guardó", WP: "Se imprimirá", DP: "Se imprimió"}; e.PageActionEventType={O: "Página abierta", C: "Página cerrada"}; e.StreamType={DESCONOCIDO: "DESCONOCIDO", PLANO E:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};e.FontType={DESCONOCIDO:"DESCONOCIDO",TIPO1:"TIPO1",TIPO1ESTÁNDAR:"TIPO1ESTÁNDAR",TIPO1C:"TIPO1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TIPO3:"TIPO3",OPENTYPE:"OPENTYPE",TIPO0:"TIPO0", MMTYPE1: "MMTYPE1"}; constante n = {ERRORES: 0, ADVERTENCIAS: 1, INFORMACIÓN: 5}; e. Nivel de Verbosidad = n; e. Tipo de Compresión de Mapa = {NINGUNO: 0, BINARIO: 1, FLUJO: 2}; e. OPS = {dependencia: 1, establecer Ancho de Línea: 2, establecer Límite de Línea: 3, establecer Unión de Línea: 4, establecer Límite de Inglete: 5, establecer Guión: 6, establecer Intento de Representación: 7, establecer Planitud: 8, establecer EstadoG: 9, guardar: 10, restaurar: 11, transformar: 12, mover a: 13, línea a: 14, curva a: 15, curva a 2 :16, curva a 3:17, cerrar ruta: 18, rectángulo: 19, trazo: 20, cerrar trazo: 21, relleno: 22, relleno EO: 23, trazo de relleno: 24, trazo de relleno EO: 25, cerrar trazo de relleno: 26, cerrar trazo de relleno EO: 27, finalizar ruta: 28, clip: 29, clip EO: 30, inicio de texto: 31, fin de texto: 32, establecer espaciado de caracteres: 33, establecer espaciado de palabras: 34, establecer escala HS: 35, establecer interlineado: 36, establecer fuente: 37, establecer modo de representación de texto: 38, EstablecerAlturaDeTexto:39,MoverTexto:40,EstablecerTextoDeMoverInicial:41,EstablecerMatrizDeTexto:42,SiguienteLínea:43,MostrarTexto:44,MostrarTextoEspaciado:45,SiguienteLíneaMostrarTexto:46,SiguienteLíneaEstablecerEspaciadoMostrarTexto:47,EstablecerAnchoDeCaracteres:48,EstablecerAnchoDeCaracteresYLímites:49,EstablecerEspacioDeColorDeTrazo:50,EstablecerEspacioDeColorDeRelleno:51,EstablecerColorDeTrazo:52,EstablecerColorDeTrazoN:53,EstablecerColorDeRelleno:54,EstablecerColumnaDeRelleno o N: 55, establecer Trazo Gris: 56, establecer Relleno Gris: 57, establecer Trazo Color RGB: 58, establecer Relleno Color RGB: 59, establecer Trazo Color CMYK: 60, establecer Relleno Color CMYK: 61, Relleno sombreado: 62, inicio Imagen en línea: 63, inicio Datos de imagen: 64, fin Imagen en línea: 65, pintar Objeto X: 66, punto de marca: 67, propiedades de punto de marca: 68, inicio Contenido marcado: 69, inicio Propiedades de contenido marcado: 70, fin Contenido marcado: 71 ,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintI Grupo de objetos X de imagen en línea: 87, Repetición de objetos X de imagen de pintura: 88, Repetición de objetos X de máscara de imagen de pintura: 89, Máscara de imagen de color sólido de pintura: 90, Ruta de construcción: 91}; e. CARACTERÍSTICAS NO COMPATIBLES = {desconocido: "desconocido", formularios: "formularios", javaScript: "javaScript", firmas: "firmas", máscara: "máscara", patrón de sombreado: "patrón de sombreado", fuente: "fuente", ErrorTilingPat tern: "errorTilingPattern",errorExtGState: "errorExtGState",errorXObject: "errorXObject",errorFontLoadType3: "errorFontLoadType3",errorFontState: "errorFontState",errorFontMissing: "errorFontMissing",errorFontTranslate: "errorFontTranslate",errorColorSpace: "errorColorSpace",errorOperatorList: "errorOperatorList", errorFontToUnicode: "errorFontToUnicode",errorFontLoadNative: "errorFontLoadNative",errorFontBuildPath: "errorFontBuildPath",errorFontGetPath: "errorFontGetPath",errorMarkedContent: "errorMarkedContent",errorContentSubStream: "errorContentSubStream"};e.PasswordResponses={NEED_PASSWORD: 1, INCORRECT_PASSWORD: 2};let i=n.ADVERTENCIAS;función advertir(t){i>=n.ADVERTENCIAS&&console.log(`Advertencia: ${t}`)}función inalcanzable(t){lanzar nuevo Error(t)}función shadow(t,e,s){Object.defineProperty(t,e,{valor:s,enumerable:!0,configurable:!0,escribible:!1}); return s}const r=función BaseExceptionClosure(){función BaseException(t,e){this.constructor===BaseException&&unreachable("No se puede inicializar BaseException.");this.message=t;this.name=e}BaseException.prototype=new Error;BaseException.constructor=BaseException;return BaseException}();e.BaseException=r;e.PasswordException=clase PasswordException extiende r{constructor(t,e){super(t,"PasswordException");this.code=e}};e.UnknownErrorException=clase UnknownErrorException extiende r{constructor(t,e){super(t,"UnknownErrorException");this.details=e}};e.InvalidPDFException=clase InvalidPDFException extiende r{constructor(t){super(t,"InvalidPDFException")}};e.MissingPDFException=clase MissingPDFException extiende r{constructor(t){super(t,"MissingPDFException")}};e.UnexpectedResponseException=clase UnexpectedResponseException extiende r{constructor(t,e){super(t,"UnexpectedResponseException");this.status=e}};e.FormatError=clase FormatError extiende r{constructor(t){super(t,"FormatError")}};e.AbortException=clase AbortException extiende r{constructor(t){super(t,"AbortException")}};función stringToBytes(t){"cadena"!=typeof t&&unreachable("Argumento no válido para stringToBytes");const e=t.length,s=new Uint8Array(e);for(let n=0;n<e;++n)s[n]=255&t.charCodeAt(n);devuelve s}función arrayByteLength(t){si(void 0!==t.length)devuelve t.length;si(void 0!==t.byteLength)devuelve t.byteLength;unreachable("Argumento no válido para arrayByteLength")}e.FeatureTest=clase FeatureTest{estático obtener isLittleEndian(){devuelve shadow(this,"isLittleEndian",función isLittleEndian(){const t=new Uint8Array(4);t[0]=1;devuelve 1===new Uint32Array(t.buffer,0,1)[0]}())}estático obtener isEvalSupported(){devuelve shadow(this,"isEvalSupported",función isEvalSupported(){try{new Función(""); return!0}catch(t){return!1}}())}estático obtener isOffscreenCanvasSupported(){return shadow(this,"isOffscreenCanvasSupported","undefined"!=typeof OffscreenCanvas)}};const a=[...Array(256).keys()].map((t=>t.toString(16).padStart(2,"0")));clase Util{estático makeHexColor(t,e,s){return`#${a[t]}${a[e]}${a[s]}`}estático scaleMinMax(t,e){let s;si(t[0]){si(t[0]<0){s=e[0];e[0]=e[1];e[1]=s}e[0]*=t[0];e[1]*=t[0];si(t[3]<0){s=e[2];e[2]=e[3];e[3]=s}e[2]*=t[3];e[3]*=t[3]}sino{s=e[0];e[0]=e[2];e[2]=s;s=e[1];e[1]=e[3]; e[3]=s;si(t[1]<0){s=e[2];e[2]=e[3];e[3]=s}e[2]*=t[1];e[3]*=t[1];si(t[2]<0){s=e[0];e[0]=e[1];e[1]=s}e[0]*=t[2];e[1]*=t[2]}e[0]+=t[4];e[1]+=t[4];e[2]+=t[5];e[3]+=t[5]}estático transform(t,e){devuelve[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}estático aplicarTransform(t,e){devuelve[t[0]*e[0]+t[1]*e[2]+e[4],t[0]*e[1]+t[1]*e[3]+e[5]]}estático aplicarInverseTransform(t,e){constante s=e[0]*e[3]-e[1]*e[2];devolver[(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/s,(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/s]}estático getAxialAlignedBoundingBox(t,e){constante s=Util.applyTransform(t,e),n=Util.applyTransform(t.slice(2,4),e),i=Util.applyTransform([t[0],t[3]],e),r=Util.applyTransform([t[2],t[1]],e);return[Math.min(s[0],n[0],i[0],r[0]),Math.min(s[1],n[1],i[1],r[1]),Math.max(s[0],n[0],i[0],r[0]),Math.max(s[1],n[1],i[1],r[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];devolver[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}estático apply3dTransform(t,e){devolver[t[0]*e[0]+t[1]*e[1]+t[2]*e[2],t[3]*e[0]+t[4]*e[1]+t[5]*e[2],t[6]*e[0]+t[7]*e[1]+t[8]*e[2]]}estático singularValueDecompose2dScale(t){constante e=[t[0],t[2],t[1],t[3]],s=t[0]*e[0]+t[1]*e[2],n=t[0]*e[1]+t[1]*e[3],i=t[2]*e[0]+t[3]*e[2],r=t[2]*e[1]+t[3]*e[3],a=(s+r)/2,o=Math.sqrt((s+r)**2-4*(s*ri*n))/2,l=a+o||1,c=ao||1;return[Math.sqrt(l),Math.sqrt(c)]}normalizarRect(t)estático{constante e=t.slice(0);si(t[0]>t[2]){e[0]=t[2];e[2]=t[0]}si(t[1]>t[3]){e[1]=t[3];e[3]=t[1]}devuelve e}estático intersect(t,e){constante s=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),n=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));si(s>n)devuelve nulo;constante i=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),r=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));devolver i>r?null:[s,i,n,r]}bezierBoundingBoxestático(t,e,s,n,i,r,a,o){const l=[],c=[[],[]];sea h,d,u,p,g,f,m,b;para(sea c=0;c<2;++c){si(0===c){d=6*t-12*s+6*i;h=-3*t+9*s-9*i+3*a;u=3*s-3*t}sino{d=6*e-12*n+6*r;h=-3*e+9*n-9*r+3*o;u=3*n-3*e}si(Math.abs(h)<1e-12){si(Math.abs(d)<1e- 12)continuar;p=-u/d;0<p&&p<1&&l.push(p)}de lo contrario{m=d*d-4*u*h;b=Math.sqrt(m);si(!(m<0)){g=(-d+b)/(2*h);0<g&&g<1&&l.push(g);f=(-db)/(2*h);0<f&&f<1&&l.push(f)}}}dejar A,_=l.length;const y=_;for(;_--;){p=l[_];A=1-p;c[0][_]=A*A*A*t+3*A*A*p*s+3*A*p*p*i+p*p*p*a;c[1][_]=A*A*A*e+3*A*A*p*n+3*A*p*p*r+p*p*p*o}c[0][y]=t;c[1][y]=e;c[0][y+1]=a;c[1][y+1]=o;c[0].length=c[1].length=y+2;return[Math.min(...c[0]),Math.min(...c[1]),Math.max(...c[0]),Math.max(...c[1])]}}e.Util=Util;const o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 ,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];función stringToUTF8String(t){return decodeURIComponent(escape(t))}},(t,e,s)=>{s(3)},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});e.isNodeJS=void 0;const s=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);e.isNodeJS=s},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{valor:!0});exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0;exports.getDocument=obtenerDocumento;exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory;exports.version=void 0;var _util=__w_pdfjs_require__(1),_almacenamiento_de_anotaciones=__w_pdfjs_require__(5),_utilidades_de_visualización=__w_pdfjs_require__(8),_cargador_de_fuentes=__w_pdfjs_require__(11),_lienzo=__w_pdfjs_require__(12),_opciones_de_trabajador=__w_pdfjs_require__(15),_es_nodo=__w_pdfjs_require__(3),_controlador_de_mensajes=__w_pdfjs_require__(16),_metadatos=__w_pdfjs_require__(17),_configuración_de_contenido_opcional=__w_pdfjs_require__(18),_flujo_de_transporte=__w_pdfjs_require__(19),_texto_xfa=__w_pdfjs_require__(20);constante TAMAÑO DE TROZO DE RANGO PREDETERMINADO=65536, TIEMPO DE ESPERA DE CANCELACIÓN DE RENDERIZACIÓN=100; dejar DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exportaciones.DefaultCanvasFactory=DefaultCanvasFactory; dejar DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exportaciones.DefaultCMapReaderFactory=DefaultCMapReaderFactory; dejar Función setPDFNetworkStreamFactory(t){createPDFNetworkStream=t} getDocument(t){const e=new PDFDocumentLoadingTask;let s;if("string"==typeof t||t instanceof URL)s={url:t};else if((0,_util.isArrayBuffer)(t))s={data:t};else if(t instanceof PDFDataRangeTransport)s={range:t};else{if("object"!=typeof t)throw new Error("Parámetro no válido en getDocument, se necesita una cadena, una URL, un TypedArray o un objeto de parámetro.");if(!t.url&&!t.data&&!t.range)throw new Error("Objeto de parámetro no válido: se necesita .data, .range o .url");s=t}const n=Object.create(null);let i=null,r=null;for(const t in s){const e=s[t];switch(t){case"url":if("undefined"!=typeof window)try{n[t]=new URL(e,window.location).href;continue}catch(t){(0,_util.warn)(`No se puede crear una URL válida: "${t}".`)}else if("string"==typeof e||e instanceof URL){n[t]=e.toString();continue}throw new Error("Datos de URL de PDF no válidos: se espera una cadena o un objeto URL en la propiedad URL.");case"range":i=e;continue;case"worker":r=e;continue;case"data":if(_is_node.isNodeJS&&"undefined"!=typeof Buffer&&e instanceof Buffer)n[t]=new Uint8Array(e);else{if(e instanceof Uint8Array)break;if("string"==typeof e)n[t]=(0,_util.stringToBytes)(e);else if("object"!=typeof e||null===e||isNaN(e.length)){if(!(0,_util.isArrayBuffer)(e))throw new Error("Datos binarios PDF no válidos: se espera un objeto TypedArray, una cadena o similar a una matriz en la propiedad de datos.");n[t]=new Uint8Array(e)}else n[t]=new Uint8Array(e)}continue}n[t]=e}n.CMapReaderFactory=n.CMapReaderFactory||DefaultCMapReaderFactory;n.StandardFontDataFactory=n.StandardFontDataFactory||DefaultStandardFontDataFactory;n.ignoreErrors=!0!==n.stopAtErrors;n.fontExtraProperties=!0===n.fontExtraProperties;n.pdfBug=!0===n.pdfBug;n.enableXfa=!0===n.enableXfa;(!Number.isInteger(n.rangeChunkSize)||n.rangeChunkSize<1)&&(n.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE);("string"!=typeof n.docBaseUrl||(0,_display_utils.isDataScheme)(n.docBaseUrl))&&(n.docBaseUrl=null);(!Number.isInteger(n.maxImageSize)||n.maxImageSize<-1)&&(n.maxImageSize=-1);"string"!=typeof n.cMapUrl&&(n.cMapUrl=null);"string"!=typeof n.standardFontDataUrl&&(n.standardFontDataUrl=null);"boolean"!=typeof n.useWorkerFetch&&(n.useWorkerFetch=n.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&n.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory);"boolean"!=typeof n.isEvalSupported&&(n.isEvalSupported=!0);"booleano"!=tipo de n.disableFontFace&&(n.disableFontFace=_is_node.isNodeJS);"booleano"!=tipo de n.useSystemFonts&&(n.useSystemFonts=!_is_node.isNodeJS&&!n.disableFontFace);"object"==tipo de n.ownerDocument&&null!==n.ownerDocument||(n.ownerDocument=globalThis.document);"booleano"!=tipo de n.disableRange&&(n.disableRange=!1);"booleano"!=tipo de n.disableStream&&(n.disableStream=!1);"booleano"!=tipo de n.disableAutoFetch&&(n.disableAutoFetch=!1);(0,_util.setVerbosityLevel)(n.verbosity);if(!r){const t={verbosity:n.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};r=t.port?PDFWorker.fromPort(t):new PDFWorker(t);e._worker=r}const a=e.docId;r.promise.then((function(){if(e.destroyed)throw new Error("Carga abortada");const t=_fetchDocument(r,n,i,a),s=new Promise((function(t){let e;i?e=new _transport_stream.PDFDataTransportStream({longitud:n.longitud,initialData:n.initialData,progressiveDone:n.progressiveDone,contentDispositionFilename:n.contentDispositionFilename,disableRange:n.disableRange,disableStream:n.disableStream},i):n.data||(e=createPDFNetworkStream({url:n.url,longitud:n.longitud,httpHeaders:n.httpHeaders,withCredentials:n.withCredentials,rangeChunkSize:n.rangeChunkSize,disableRange:n.disableRange,disableStream:n.disableStream}));t(e)}));return Promise.all([t,s]).then((function([t,s]){if(e.destruido) arrojar nuevo Error("Carga abortada"); constante i=nuevo _message_handler.MessageHandler(a,t,r.port),o=nuevo WorkerTransport(i,e,s,n);e._transport=o;i.send("Listo",null)}))})).catch(e._capability.reject);devolver e}función asíncrona _fetchDocument(t,e,s,n){si(t.destruido) arrojar nuevo Error("El trabajador fue destruido");si(s){e.length=s.length;e.initialData=s.initialData;e.progressiveDone=s.progressiveDone;e.contentDispositionFilename=s.contentDispositionFilename} constante i=esperar t.messageHandler.sendWithPromise("GetDocRequest",{docId:n,apiVersion:"2.16.105",source:{data:e.data,url:e.url,password:e.password,disableAutoFetch:e.disableAutoFetch,rangeChunkSize:e.rangeChunkSize,length:e.length},maxImageSize:e.maxImageSize,disableFontFace:e.disableFontFace,docBaseUrl:e.docBaseUrl,ig noreErrors:e.ignoreErrors,isEvalSupported:e.isEvalSupported,fontExtraProperties:e.fontExtraProperties,enableXfa:e.enableXfa,useSystemFonts:e.useSystemFonts,cMapUrl:e.useWorkerFetch?e.cMapUrl:null,standardFontDataUrl:e.useWorkerFetch?e.standardFontDataUrl:null});e.data&&(e.data=null);if(t.destroyed)throw nuevo Error("El trabajador fue destruido"); return i}class PDFDocumentLoadingTask{static#t=0;constructor(){this._capability=(0,_util.createPromiseCapability)();this._transport=null;this._worker=null;this.docId="d"+PDFDocumentLoadingTask.#t++;this.destroyed=!1;this.onPassword=null;this.onProgress=null;this.onUnsupportedFeature=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;await(this._transport?.destroy());this._transport=null;if(this._worker){this._worker.destroy();this._worker=null}}}exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(t,e,s=!1,n=null){esto.longitud=t;esto.datosinicial=e;esto.progressiveDone=s;esto.nombreArchivoDisposiciónContenido=n;esto._ListenersDeRango=[];esto._ListenersDeProgreso=[];esto._ListenersDeLecturaProgresiva=[];esto._ListenersDeProgresoDone=[];esto._CapacidadDeListado=(0,_util.cr eatePromiseCapability)()}addRangeListener(t){este._rangeListeners.push(t)}addProgressListener(t){este._progressListeners.push(t)}addProgressiveReadListener(t){este._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){este._progressiveDoneListeners.push(t)}onDataRange(t,e){para(constante s de este._rangeListeners)s(t,e)}onDataProgress(t,e){this._readyCapability.promise.then((()=>{para(const s de este._progressListeners)s(t,e)}))}onDataProgressiveRead(t){this._readyCapability.promise.then((()=>{para(const e de este._progressiveReadListeners)e(t)}))}onDataProgressiveDone(){this._readyCapability.promise.then((()=>{para(const t de este._progressiveDoneListeners)t()}))}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){(0,_util.unreachable)("Método abstracto PDFDataRangeTransport.requestDataRange")}abortar(){}}exportaciones.PDFDataRangeTransport=PDFDataRangeTransport;clase PDFDocumentProxy{constructor(t,e){this._pdfInfo=t;this._transport=e;Object.defineProperty(this,"fingerprint",{get(){(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, por favor, utilice `PDFDocumentProxy.fingerprints` en su lugar.");return this.fingerprints[0]}});Object.defineProperty(this,"getStats",{value:async()=>{(0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, por favor, utilice el captador `PDFDocumentProxy.stats` en su lugar.");return this.stats||{streamTypes:{},fontTypes:{}}}})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}obtener estadísticas(){devolver this._transport.stats}obtener isPureXfa(){devolver!!this._transport._htmlForXfa}obtener allXfaHtml(){devolver this._transport._htmlForXfa}obtenerPágina(t){devolver this._transport.getPage(t)}obtenerÍndiceDePágina(t){devolver this._transport.getPageIndex(t)}obtenerDestinos(){devolver this._transport.getDestinations()}obtenerDestino(t){devolver this._transport.getDestination(t)}obtenerEtiquetasDePágina(){devolver this._transport.getPageLabels()}obtenerDiseñoDePágina(){devolver this._transport.getDiseñoDePágina()}obtenerModoDePágina(){devolver this._transport.getModoDePágina()}obtenerPreferenciasDeVisor(){devolver este._transporte.getViewerPreferences()}obtenerAcciónApertura(){devolver este._transporte.getOpenAction()}obtenerAdjuntos(){devolver este._transporte.getAttachments()}obtenerJavaScript(){devolver este._transporte.getJavaScript()}obtenerJSActions(){devolver este._transporte.getDocJSActions()}obtenerEsquema(){devolver este._transporte.getOutline()}obtenerConfigContenidoOpcional(){devolver este._transporte.getConfigContenidoOpcional()}obtenerPermisos(){devolver este._transporte.getPermisos()}obtenerMetadatos(){devolver este._transporte.getMetadata()}obtenerInfoMarca(){devolver este._transporte.getMarcaInfo()}obtenerDatos(){devolver este._transporte.getDatos()}obtenerInfoDescarga(){devolver este._transporte.CapacidadDeDescargaInfo.Promesa}cleanup(t=!1){devolver this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument llamado mientras `annotationStorage` está vacío, por favor use el método getData en su lugar."); return this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return este._transport.getCalculationOrderIds()}}exporta.PDFDocumentProxy=PDFDocumentProxy;clase PDFPageProxy{constructor(t,e,s,n,i=!1){este._pageIndex=t;este._pageInfo=e;este._ownerDocument=n;este._transport=s;este._stats=i?new _display_utils.StatTimer:null;este._pdfBug=i;este.commonObjs=s.commonObjs;este.objs=new PDFObjects;este._bitmaps=new Set;este.cleanupAfterRender=!1;este.pendingCleanup=!1;este._intentStates=new Map;este._annotationPromises=new Map;este.destroyed=!1}obtener pageNumber(){devolver este._pageIndex+1}obtener rotación(){devolver esto._pageInfo.rotate}obtener referencia(){devolver esto._pageInfo.ref}obtener unidad de usuario(){devolver esto._pageInfo.unidad de usuario}obtener vista(){devolver esto._pageInfo.vista}obtener Vistaport({escala:t, rotación:e=this.rotate, desplazamientoX:s=0, desplazamientoY:n=0, noFlip:i=!1}={}){devolver nuevo _display_utils.PageViewport({viewBox:this.view, escala:t, rotación:e, desplazamientoX:s, desplazamientoY:n, noFlip:i})}obtener Anotaciones({intención:t="mostrar"}={}){constante e=this._transport.getRenderingIntent(t);dejar s=this._annotationPromises.get(e.cacheKey);if(!s){s=this._transport.getAnnotations(this._pageIndex,e.renderingIntent);this._annotationPromises.set(e.cacheKey,s);s=s.then((t=>{for(const e of t){void 0!==e.titleObj&&Object.defineProperty(e,"title",{get(){(0,_display_utils.deprecated)("Propiedad `title` en la anotación, utilice `titleObj` en su lugar.");return e.titleObj.str}});void 0!==e.contentsObj&&Object.defineProperty(e,"contents",{get(){(0,_display_utils.deprecated)("Propiedad `contents` en la anotación, utilice `contentsObj` en su lugar."); devolver e.contentsObj.str}})}devolver t}))}devolver s}getJSActions(){devolver this._jsActionsPromise||=this._transport.getPageJSActions(this._pageIndex)}async getXfa(){devolver this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,viewport:e,intent:s="display",annotationMode:n=_util.AnnotationMode.ENABLE,transform:i=null,imageLayer:r=null,canvasFactory:a=null,background:o=null,optionalContentConfigPromise:l=null,annotationCanvasMap:c=null,pageColors:h=null,printAnnotationStorage:d=null}){if(void 0!==arguments[0]?.renderInteractiveForms){(0,_display_utils.deprecated)("render ya no acepta la opción `renderInteractiveForms`, utilice la opción `annotationMode` en su lugar.");!0===arguments[0].renderInteractiveForms&&n===_util.AnnotationMode.ENABLE&&(n=_util.AnnotationMode.ENABLE_FORMS)}if(void 0!==arguments[0]?.includeAnnotationStorage){(0,_display_utils.deprecated)("render ya no acepta la opción `includeAnnotationStorage`, utilice la opción `annotationMode` en su lugar.");!0===arguments[0].includeAnnotationStorage&&n===_util.AnnotationMode.ENABLE&&(n=_util.AnnotationMode.ENABLE_STORAGE)}this._stats&&this._stats.time("General");const u=this._transport.getRenderingIntent(s,n,d);this.pendingCleanup=!1;l||(l=this._transport.getOptionalContentConfig());let p=this._intentStates.get(u.cacheKey);if(!p){p=Object.create(null);this._intentStates.set(u.cacheKey,p)}if(p.streamReaderCancelTimeout){clearTimeout(p.streamReaderCancelTimeout);p.streamReaderCancelTimeout=null}const g=a||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),f=!!(u.renderingIntent&_util.RenderingIntentFlag.PRINT);if(!p.displayReadyCapability){p.displayReadyCapability=(0,_util.createPromiseCapability)();p.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null};this._stats&&this._stats.tiempo("Solicitud de página"); this._pumpOperatorList(u)}const complete=t=>{p.renderTasks.delete(m);(this.cleanupAfterRender||f)&&(this.pendingCleanup=!0);this._tryCleanup();if(t){m.capability.reject(t);this._abortOperatorList({intentState:p,reason:t instanceof Error?t:new Error(t)})}else m.capability.resolve();if(this._stats){this._stats.timeEnd("Renderizado");this._stats.timeEnd("General")}},m=new InternalRenderTask({callback:complete,params:{canvasContext:t,viewport:e,transform:i,imageLayer:r,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:p.operatorList,pageIndex:this._pageIndex,canvasFactory:g,useRequestAnimationFrame:!f,pdfBug:this._pdfBug,pageColors:h});(p.renderTasks||=new Set).add(m);const b=m.task;Promise.all([p.displayReadyCapability.promise,l]).then((([t,e])=>{if(this.pendingCleanup)complete();else{this._stats&&this._stats.time("Rendering");m.initializeGraphics({transparency:t,optionalContentConfig:e});m.operatorListChanged()}})).catch(complete);return b}getOperatorList({intent:t="display",annotationMode:e=_util.AnnotationMode.ENABLE,printAnnotationStorage:s=null}={}){const n=this._transport.getRenderingIntent(t,e,s,!0);let i,r=this._intentStates.get(n.cacheKey);if(!r){r=Object.create(null);this._intentStates.set(n.cacheKey,r)}if(!r.opListReadCapability){i=Object.create(null);i.operatorListChanged=función operatorListChanged(){if(r.operatorList.lastChunk){r.opListReadCapability.resolve(r.operatorList);renderTasks.delete(i)}};r.opListReadCapability=(0,_util.createPromiseCapability)();(r.renderTasks||=nuevo conjunto).add(i);r.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null};this._stats&&this._stats.time("Página Solicitud");this._pumpOperatorList(n)}devuelve r.opListReadCapability.promesa}streamTextContent({disableCombineTextItems:t=!1,includeMarkedContent:e=!1}={}){devuelve this._transport.messageHandler.sendWithStream("ObtenerContenidoDeTexto",{pageIndex:this._pageIndex,combineTextItems:!0!==t,includeMarkedContent:!0===e},{highWaterMark:100,tamaño:t=>t.items.length})}getTextContent(t={}){si(this._transport._htmlForXfa)devuelve this.getXfa().entonces((t=>_xfa_text.XfaText.textContent(t)));const e=this.streamTextContent(t);devuelve nueva Promesa((function(t,s){const n=e.getReader(),i={items:[],styles:Object.create(null)};!function pump(){n.read().then((function({value:e,done:s}){if(s)t(i);else{Object.assign(i.styles,e.styles);i.items.push(...e.items);pump()}}),s)}()}))}getStructTree(){return this._structTreePromise||=this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values()){this._abortOperatorList({intentState:e,reason:new Error("La página fue destruido."), fuerza:!0}); si (!e.opListReadCapability) para (const s de e.renderTasks){t.push(s.completed); s.cancel()}} esto.objs.clear(); para (const t de esto._bitmaps) t.close(); esto._bitmaps.clear();this._annotationPromises.clear();this._jsActionsPromise=null;this._structTreePromise=null;this.pendingCleanup=!1;return Promise.all(t)}cleanup(t=!1){this.pendingCleanup=!0;return this._tryCleanup(t)}_tryCleanup(t=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;this._intentStates.clear();this.objs.clear();this._annotationPromises.clear();this._jsActionsPromise=null;this._structTreePromise=null;t&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const t de this._bitmaps)t.close();this._bitmaps.clear();this.pendingCleanup=!1;return!0}_startRenderPage(t,e){const s=this._intentStates.get(e);if(s){this._stats&&this._stats.timeEnd("Página Solicitud"); s.displayReadyCapability&&s.displayReadyCapability.resolve(t)}}_renderPageChunk(t,e){para(sea s=0,n=t.length;s<n;s++){e.operatorList.fnArray.push(t.fnArray[s]);e.operatorList.argsArray.push(t.argsArray[s])}e.operatorList.lastChunk=t.lastChunk;e.operatorList.separateAnnots=t.separateAnnots;para(const t de e.renderTasks)t.operatorListChanged();t.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageMap:s}){const n=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:s}).getReader(),i=this._intentStates.get(e);i.streamReader=n;const pump=()=>{n.read().then((({value:t,done:e})=>{if(e)i.streamReader=null;else if(!this._transport.destroyed){this._renderPageChunk(t,i);pump()}}),(t=>{i.streamReader=null;if(!this._transport.destroyed){if(i.operatorList){i.operatorList.lastChunk=!0;for(const t of i.renderTasks)t.operatorListChanged();this._tryCleanup()}if(i.displayReadyCapability)i.displayReadyCapability.reject(t);de lo contrario{if(!i.opListReadCapability)throw t;i.opListReadCapability.reject(t)}}}))};bombear()}_abortOperatorList({intentState:t,reason:e,force:s=!1}){if(t.streamReader){if(!s){if(t.renderTasks.size>0)return;if(e instanceof _display_utils.RenderingCancelledException){t.streamReaderCancelTimeout=setTimeout((()=>{this._abortOperatorList({intentState:t,reason:e,force:!0});t.streamReaderCancelTimeout=null}),RENDERING_CANCELLED_TIMEOUT);return}}t.streamReader.cancel(new _util.AbortException(e.message)).catch((()=>{}));t.streamReader=null;if(!this._transport.destroyed){for(const[e,s]of this._intentStates)if(s===t){this._intentStates.delete(e);break}this.cleanup()}}}obtener estadísticas(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[];this._deferred=Promise.resolve()}postMessage(t,e){const s={data:structuredClone(t,e)};this._deferred.then((()=>{for(const t of this._listeners)t.call(this,s)}))}addEventListener(t,e){this._listeners.push(e)}removeEventListener(t,e){const s=this._listeners.indexOf(e);this._listeners.splice(s,1)}terminate(){this._listeners.length=0}}exporta.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;if(_is_node.isNodeJS&&"función"==tipo de require){PDFWorkerUtil.isWorkerDisabled=!0;PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js"}else if("objeto"==tipo dedocumento){const t=documento?.currentScript?.src;t&&(PDFWorkerUtil.fallbackWorkerSrc=t.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=función(t,e){let s;try{s=nueva URL(t);if(!s.origin||"null"===s.origin)return!1}catch(t){return!1}const n=nueva URL(e,s);return s.origin===n.origin};PDFWorkerUtil.createCDNWrapper=función(t){const e=`importScripts("${t}");`;return URL.createObjectURL(nuevo Blob([e]))};clase PDFWorker{estático#e=nuevo Mapa débil;constructor({nombre:t=null,puerto:e=null,verbosidad:s=(0,_util.getVerbosityLevel)()}={}){si(e&&PDFWorker.#e.has(e))generar nuevo Error("No se puede usar más de un PDFWorker por puerto.");este.nombre=t;este.destruido=!1;este.verbosidad=s;este._readyCapability=(0,_util.createPromiseCapability)();este._puerto=null;este._webWorker=null;este._messageHandler=null;si(e){PDFWorker.#e.set(e,this);este._initializeFromPort(e)}de lo contrario este._initialize()}obtener promesa(){devolver este._readyCapability.promise}obtener puerto(){devolver este._puerto}obtener messageHandler(){devolver este._manejadorDeMensajes}_inicializarDesdePuerto(t){este._puerto=t;este._manejadorDeMensajes=nuevo _manejadorDeMensajes.ManejadorDeMensajes("principal","trabajador",t);este._manejadorDeMensajes.en("listo",(función(){}));este._listoCapacidad.resolver()}_inicializar(){si(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){dejar{workerSrc:t}=PDFWorker;intentar{PDFWorkerUtil.isSameOrigin(ventana.ubicación.href,t)||(t=PDFWorkerUtil.createCDNWrapper(nueva URL(t,ventana.ubicación).href));const e=nuevo Trabajador(t),s=nuevo _manejador_de_mensajes.MessageHandler("principal","trabajador",e),terminateEarly=()=>{e.removeEventListener("error",onWorkerError);s.destroy();e.terminate();this.destroyed?this._readyCapability.reject(new Error("El trabajador fue destruido")):this._setupFakeWorker()},onWorkerError=()=>{this._webWorker||terminateEarly()};e.addEventListener("error",onWorkerError);s.on("prueba",(t=>{e.removeEventListener("error",onWorkerError);if(this.destroyed)terminateEarly();de lo contrario if(t){this._messageHandler=s;this._port=e;this._webWorker=e;this._readyCapability.resolve();s.send("configure",{verbosity:this.verbosity})}else{this._setupFakeWorker();s.destroy();e.terminate()}}));s.on("ready",(t=>{e.removeEventListener("error",onWorkerError);if(this.destroyed)terminateEarly();else try{sendTest()}catch(t){this._setupFakeWorker()}}));const sendTest=()=>{const t=new Uint8Array;s.send("test",t,[t.buffer])};sendTest();return}catch(t){(0,_util.info)("El trabajador ha sido deshabilitado.")}}this._setupFakeWorker()}_setupFakeWorker(){if(!PDFWorkerUtil.isWorkerDisabled){(0,_util.warn)("Configurando trabajador falso.");PDFWorkerUtil.isWorkerDisabled=!0}PDFWorker._setupFakeWorkerGlobal.then((t=>{if(this.destroyed){this._readyCapability.reject(new Error("El trabajador fue destruido"));return}const e=new LoopbackPort;this._port=e;const s="fake"+PDFWorkerUtil.fakeWorkerId++,n=new _message_handler.MessageHandler(s+"_worker",s,e);t.setup(n,e);const i=new _message_handler.MessageHandler(s,s+"_worker",e);this._messageHandler=i;this._readyCapability.resolve();i.send("configure",{verbosity:this.verbosity})})).catch((t=>{this._readyCapability.reject(new Error(`Error al configurar el trabajador falso: "${t.message}".`))}))}destruir(){this.destroyed=!0;if(this._webWorker){this._webWorker.terminate();this._webWorker=null}PDFWorker.#e.delete(this._port);this._port=null;if(this._messageHandler){this._messageHandler.destroy();this._messageHandler=null}}estático fromPort(t){if(!t?.port)throw new Error("PDFWorker.fromPort - firma de método no válida.");return this.#e.has(t.port)?this.#e.get(t.port):new PDFWorker(t)}estático obtenerworkerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc; si (null!==PDFWorkerUtil.fallbackWorkerSrc){_is_node.isNodeJS||(0,_display_utils.deprecated)('No se especificó "GlobalWorkerOptions.workerSrc".'); devolver PDFWorkerUtil.fallbackWorkerSrc}generar nuevo Error('No se especificó "GlobalWorkerOptions.workerSrc".')}obtener _mainThreadWorkerMessageHandler() estático {intentar{devolver globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch(t){devolver null}}obtener _setupFakeWorkerGlobal() estático {const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler; si (mainWorkerMessageHandler) devolver mainWorkerMessageHandler; if(_is_node.isNodeJS&&"function"==typeof require){const trabajador=eval("require")(this.workerSrc); return trabajador.WorkerMessageHandler}await(0,_display_utils.loadScript)(this.workerSrc); return ventana.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports.PDFWorker=PDFWorker;PDFWorker.getWorkerSrc=function(){(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, por favor, use `PDFWorker.workerSrc` en su lugar."); return this.workerSrc};class WorkerTransport{#s=null;#n=new Map;#i=new Mapa; #r = nulo; constructor (t, e, s, n) {este. MessageHandler = t; este. ChargingTask = e; este. CommonObjs = nuevos PDFObjects; este. FontLoader = nuevo _ Font_loader. FontLoader ({ DocId: e. DocId, OnUnsupportedFeature: este. _onUnsupportedFeature. Bind (este), OwnerDocument: n. OwnerDocument, StyleElement: n. StyleElement}); este. _ Params = n; si (! n. UseWorkerFetch) {este. CMapReaderFactory = nuevo n. CMapReaderFactory ({ BaseUrl: n. cMapUrl, IsCompressed: n. cMapPacked}); este. StandardFontDataFactory = nuevo n.StandardFontDataFactory({baseUrl:n.standardFontDataUrl})}this.destroyed=!1;this.destroyCapability=null;this._passwordCapability=null;this._networkStream=s;this._fullReader=null;this._lastProgress=null;this.downloadInfoCapability=(0,_util.createPromiseCapability)();this.setupMessageHandler()}obtener annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.Almacenamiento de anotaciones)}obtener estadísticas(){devolver esto.#s}getRenderingIntent(t,e=_util.AnnotationMode.ENABLE,s=null,n=!1){let i=_util.RenderingIntentFlag.DISPLAY,r=null;switch(t){case"any":i=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":i=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - intención no válida: ${t}`)}switch(e){case _util.AnnotationMode.DISABLE:i+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:i+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:i+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE;r=(i&_util.RenderingIntentFlag.PRINT&&s instanceof _annotation_storage.PrintAnnotationStorage?s:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - modo de anotación no válido: ${e}`)}n&&(i+=_util.RenderingIntentFlag.OPLIST);return{renderingIntent:i,cacheKey:`${i}_${_annotation_storage.AnnotationStorage.getHash(r)}`,annotationStorageMap:r}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0;this.destroyCapability=(0,_util.createPromiseCapability)();this._passwordCapability&&this._passwordCapability.reject(new Error("El trabajador fue destruido durante la devolución de llamada onPassword"));const t=[];for(const e of esto.#n.values())t.push(e._destroy());esto.#n.clear();esto.#i.clear();esto.hasOwnProperty("annotationStorage")&&esto.annotationStorage.resetModified();const e=esto.messageHandler.sendWithPromise("Terminar",null);t.push(e);Promise.all(t).then((()=>{esto.commonObjs.clear();esto.fontLoader.clear();esto.#r=null;esto._getFieldObjectsPromise=null;esto._hasJSActionsPromise=null;esto._networkStream&&esto._networkStream.cancelAllRequests(new _util.AbortException("El trabajador fue terminado.")); si (este.mensajeHandler) {este.mensajeHandler.destroy();este.mensajeHandler=null}este.destroyCapability.resolve()}),este.destroyCapability.reject);devuelve este.destroyCapability.promise}setupMessageHandler(){const{mensajeHandler:t,loadingTask:e}=this;t.on("GetReader",((t,e)=>{(0,_util.assert)(este._networkStream,"GetReader - no hay instancia de `IPDFStream` disponible.");this._fullReader=this._networkStream.getFullReader();this._fullReader.onProgress=t=>{this._lastProgress={loaded:t.loaded,total:t.total}};e.onPull=()=>{this._fullReader.read().then((function({value:t,done:s}){if(s)e.close();else{(0,_util.assert)((0,_util.isArrayBuffer)(t),"GetReader: se esperaba un ArrayBuffer.");e.enqueue(new Uint8Array(t),1,[t])}})).catch((t=>{e.error(t)}))};e.onCancel=t=>{this._fullReader.cancel(t);e.ready.catch((t=>{if(!this.destroyed)throw t}))}}));t.on("ReaderHeadersReady",(t=>{const s=(0,_util.createPromiseCapability()),n=this._fullReader;n.headersReady.then((()=>{if(!n.isStreamingSupported||!n.isRangeSupported){this._lastProgress&&e.onProgress?.(this._lastProgress);n.onProgress=t=>{e.onProgress?.({loaded:t.loaded,total:t.total})}}s.resolve({isStreamingSupported:n.isStreamingSupported,isRangeSupported:n.isRangeSupported,contentLength:n.contentLength})}),s.reject);return s.promise}));t.on("GetRangeReader",((t,e)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no hay ninguna instancia de `IPDFStream` disponible.");const s=this._networkStream.getRangeReader(t.begin,t.end);if(s){e.onPull=()=>{s.read().then((function({value:t,done:s}){if(s)e.close();else{(0,_util.assert)((0,_util.isArrayBuffer)(t),"GetRangeReader - se esperaba un ArrayBuffer.");e.enqueue(new Uint8Array(t),1,[t])}})).catch((t=>{e.error(t)}))};e.onCancel=t=>{s.cancel(t);e.ready.catch((t=>{if(!this.destroyed)throw t}))}}else e.close()}));t.on("GetDoc",(({pdfInfo:t})=>{this._numPages=t.numPages;this._htmlForXfa=t.htmlForXfa;delete t.htmlForXfa;e._capability.resolve(new PDFDocumentProxy(t,this))}));t.on("DocException",(function(t){let s;switch(t.name){case "PasswordException":s=new _util.PasswordException(t.message,t.code);break;case "InvalidPDFException":s=new _util.InvalidPDFException(t.message);break;case "MissingPDFException":s=new _util.MissingPDFException(t.message);break;case "UnexpectedResponseException":s=new _util.UnexpectedResponseException(t.message,t.status);break;case"UnknownErrorException":s=new _util.UnknownErrorException(t.message,t.details);break;default:(0,_util.unreachable)("DocException - se esperaba un error válido.")}e._capability.reject(s)}));t.on("Solicitud de contraseña",(t=>{this._passwordCapability=(0,_util.createPromiseCapability)();if(e.onPassword){const updatePassword=t=>{t instanceof Error?this._passwordCapability.reject(t):this._passwordCapability.resolve({contraseña:t})};try{e.onPassword(updatePassword,t.code)}catch(t){this._passwordCapability.reject(t)}}else this._passwordCapability.reject(new _util.PasswordException(t.message,t.code));return this._passwordCapability.promise}));t.on("Datos cargados",(t=>{e.onProgress?.({loaded:t.length,total:t.length});this.downloadInfoCapability.resolve(t)}));t.on("StartRenderPage",(t=>{if(this.destroyed)return;this.#n.get(t.pageIndex)._startRenderPage(t.transparency,t.cacheKey)}));t.on("commonobj",(([e,s,n])=>{if(!this.destroyed&&!this.commonObjs.has(e))switch(s){case"Font":const i=this._params;if("error"in n){const t=n.error;(0,_util.warn)(`Error durante la carga de la fuente: ${t}`);this.commonObjs.resolve(e,t);break}let r=null;i.pdfBug&&globalThis.FontInspector?.enabled&&(r={registerFont(t,e){globalThis.FontInspector.fontAdded(t,e)}});const a=new _font_loader.FontFaceObject(n,{isEvalSupported:i.isEvalSupported,disableFontFace:i.disableFontFace,ignoreErrors:i.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:r});this.fontLoader.bind(a).catch((s=>t.sendWithPromise("FontFallback",{id:e}))).finally((()=>{!i.fontExtraProperties&&a.data&&(a.data=null);this.commonObjs.resolve(e,a)}));break;case"FontPath":case"Image":this.commonObjs.resolve(e,n);break;default:throw new Error(`Se obtuvo el tipo de objeto común desconocido ${s}`)}}));t.on("obj",(([t,e,s,n])=>{if(this.destroyed)return;const i=this.#n.get(e);if(!i.objs.has(t))switch(s){case"Image":i.objs.resolve(t,n);const e=8e6;if(n){let t;if(n.bitmap){const{bitmap:e,width:s,height:r}=n;t=s*r*4;i._bitmaps.add(e)}else t=n.data?.length||0;t>e&&(i.cleanupAfterRender=!0)}break;case"Pattern":i.objs.resolve(t,n);break;default:throw new Error(`Se obtuvo un tipo de objeto desconocido ${s}`)}}));t.on("DocProgress",(t=>{this.destroyed||e.onProgress?.({loaded:t.loaded,total:t.total})}));t.on("DocStats",(t=>{this.destroyed||(this.#s=Object.freeze({streamTypes:Object.freeze(t.streamTypes),fontTypes:Object.freeze(t.fontTypes)}))}));t.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this));t.on("FetchBuiltInCMap",(t=>this.destroyed?Promise.reject(new Error("El trabajador fue destruido.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(t):Promise.reject(new Error("CMapReaderFactory no se ha inicializado, consulte el parámetro `useWorkerFetch`."))));t.on("FetchStandardFontData",(t=>this.destroyed?Promise.reject(new Error("Worker fue destruido.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(t):Promise.reject(new Error("StandardFontDataFactory no se ha inicializado, consulte el parámetro `useWorkerFetch`."))))}_onUnsupportedFeature({featureId:t}){this.destroyed||this.loadingTask.onUnsupportedFeature?.(t)}getData(){return this.messageHandler.sendWithPromise("Obtener datos", null)}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Solicitud de página no válida."); const e=t-1,s=this.#i.get(e);if(s)return s; const n=this.messageHandler.sendWithPromise("Obtener página",{pageIndex:e}).then((t=>{if(this.destroyed)throw new Error("Transporte destruido"); const s=new PDFPageProxy(e,t,this,this._params.ownerDocument,this._params.pdfBug);this.#n.set(e,s);return s}));this.#i.set(e,n);return n}getPageIndex(t){devuelve "object"!=typeof t||null===t||!Number.isInteger(t.num)||t.num<0||!Number.isInteger(t.gen)||t.gen<0?Promise.reject(new Error("Solicitud de pageIndex no válida.")):this.messageHandler.sendWithPromise("ObtenerPageIndex",{num:t.num,gen:t.gen})}getAnnotations(t,e){devuelve this.messageHandler.sendWithPromise("ObtenerAnotaciones",{pageIndex:t,intent:e})}saveDocument(){devuelve este.messageHandler.sendWithPromise("Guardar documento",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,nombre de archivo:this._fullReader?.nombre de archivo??null}).finally((()=>{this.annotationStorage.resetModified()}))}getFieldObjects(){devuelve this._getFieldObjectsPromise||=this.messageHandler.sendWithPromise("GetFieldObjects",null)}hasJSActions(){devuelve this._hasJSActionsPromise||=this.messageHandler.sendWithPromise("HasJSActions",null)}getCalculationOrderIds(){devuelve this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){devuelve this.messageHandler.sendWithPromise("ObtenerDestinos", null)}getDestination(t){devuelve "string"!=typeof t?Promise.reject(new Error("Solicitud de destino no válida.")):this.messageHandler.sendWithPromise("ObtenerDestino",{id:t})}getPageLabels(){devuelve this.messageHandler.sendWithPromise("ObtenerEtiquetasDePágina", null)}getPageLayout(){devuelve this.messageHandler.sendWithPromise("ObtenerDiseñoDePágina", null)}getPageMode(){devuelve this.messageHandler.sendWithPromise("ObtenerModoDePágina", null)}getViewerPreferences(){devuelve this.messageHandler.sendWithPromise("ObtenerPreferenciasDeVisor", null)}getOpenAction(){devuelve este.mensajeHandler.sendWithPromise("ObtenerAcciónAbrir", null)}obtenerAdjuntos(){devolver este.mensajeHandler.sendWithPromise("ObtenerAdjuntos", null)}obtenerJavaScript(){devolver este.mensajeHandler.sendWithPromise("ObtenerJavaScript", null)}obtenerDocJSActions(){devolver este.mensajeHandler.sendWithPromise("ObtenerDocJSActions", null)}obtenerPageJSActions(t){devolver este.mensajeHandler.sendWithPromise("ObtenerPageJSActions", {pageIndex:t})}obtenerStructTree(t){devolver este.mensajeHandler.sendWithPromise("ObtenerStructTree", {pageIndex:t})}obtenerOutline(){devolver este.mensajeHandler.sendWithPromise("ObtenerEsquema", null)}getOptionalContentConfig(){devuelve este.mensajeHandler.sendWithPromise("ObtenerOptionalContentConfig", null).luego((t=>new _optional_content_config.OptionalContentConfig(t)))}getPermissions(){devuelve este.mensajeHandler.sendWithPromise("ObtenerPermisos", null)}getMetadata(){devuelve este.#r||=este.mensajeHandler.sendWithPromise("ObtenerMetadatos", null).luego((t=>({info:t[0],metadatos:t[1]?new _metadata.Metadata(t[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null})))}getMarkInfo(){devuelve this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){await this.messageHandler.sendWithPromise("Cleanup",null);if(!this.destroyed){for(const t of this.#n.values()){if(!t.cleanup())arroja un nuevo Error(`startCleanup: La página ${t.pageNumber} está actualmente representación.`)}this.commonObjs.clear();t||this.fontLoader.clear();this.#r=null;this._getFieldObjectsPromise=null;this._hasJSActionsPromise=null}}obtener parámetros de carga(){const t=this._params;return(0,_util.shadow)(this,"parámetros de carga",{disableAutoFetch:t.disableAutoFetch,enableXfa:t.enableXfa})}}clase PDFObjects{#a=Objeto.create(null);#o(t){const e=this.#a[t];return e||(this.#a[t]={capability:(0,_util.createPromiseCapability(),data:null})}get(t,e=null){if(e){const s=this.#o(t);s.capability.promise.then((()=>e(s.data)));return null}const s=this.#a[t];if(!s?.capability.settled)throw new Error(`Solicitando objeto que aún no se ha resuelto ${t}.`);return s.data}has(t){return this.#a[t]?.capability.settled||!1}resolve(t,e=null){const s=esto.#o(t);s.datos=e;s.capacidad.resolve()}borrar(){esto.#a=Objeto.crear(null)}}clase RenderTask{#l=null;constructor(t){esto.#l=t;esto.onContinue=null}obtener promesa(){devolver esto.#l.capacidad.promesa}cancelar(){esto.#l.cancel()}obtener anotaciones separadas(){const{anotaciones separadas:t}=esto.#l.operadorList;si(!t)devolver!1;const{anotaciónCanvasMap:e}=esto.#l;devolver t.formulario||t.canvas&&e?.tamaño>0}}exportaciones.RenderTask=RenderTask;clase InternalRenderTask{estático#c=nuevo Conjunto débil;constructor({devolución de llamada:t, parámetros:e, objetos:s, objetos comunes:n, mapa de lienzo de anotación:i, lista de operadores:r, índice de página:a, fábrica de lienzo:o, marco de animación de solicitud de uso:l=!1, error de PDF:c=!1, colores de página:h=null}){esto.devolución de llamada=t;esto.parámetros=e;esto.objetos=s;esto.objetos comunes=n;esto.anotación ionCanvasMap=i;this.operatorListIdx=null;this.operatorList=r;this._pageIndex=a;this.canvasFactory=o;this._pdfBug=c;this.pageColors=h;this.running=!1;this.graphicsReadyCallback=null;this.graphicsReady=!1;this._useRequestAnimationFrame=!0===l&&"indefinido"!=typeof ventana;this.cancelled=!1;this.capability=(0,_util.createPromiseCapability)();this.task=new RenderTask(this);this._cancelBound=this.cancel.bind(this);this._continueBound=this._continue.bind(this);this._scheduleNextBound=this._scheduleNext.bind(this);this._nextBound=this._next.bind(this);this._canvas=e.canvasContext.canvas}completar(){devolver this.capability.promise.catch((function(){}))}initializeGraphics({transparencia:t=!1,optionalContentConfig:e}){si(this.cancelled)devolver;si(this._canvas){si(InternalRenderTask.#c.has(this._canvas))arrojar nuevo Error("No se puede usar El mismo lienzo durante varias operaciones de render(). Use un lienzo diferente o asegúrese de que las operaciones anteriores se hayan cancelado o completado. _canvas.CanvasGraphics(s,this.commonObjs,this.objs,this.canvasFactory,r,e,this.annotationCanvasMap,this.pageColors);this.gfx.beginDrawing({transform:i,viewport:n,transparency:t,background:a});this.operatorListIdx=0;this.graphicsReady=!0;this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(t=null){this.running=!1;this.cancelled=!0;this.gfx&&this.gfx.endDrawing();this._canvas&&InternalRenderTask.#c.delete(this._canvas);this.callback(t||new _display_utils.RenderingCancelledException(`Renderizado cancelado, página ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){if(this.graphicsReady){this.stepper&&this.stepper.updateOperatorList(this.operatorList);this.running||this._continue()}else este.graphicsReadyCallback||(este.graphicsReadyCallback=este._continueBound)}_continue(){este.ejecutando=!0;este.cancelado||(este.tarea.onContinue?este.tarea.onContinue(este._scheduleNextBound):este._scheduleNext())}_scheduleNext(){este._useRequestAnimationFrame?window.requestAnimationFrame((()=>{este._nextBound().catch(este._cancelBound)})):Promise.resolve().then(este._nextBound).catch(este._cancelBound)}asincrónico _next(){if(!this.cancelled){this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper);if(this.operatorListIdx===this.operatorList.argsArray.length){this.running=!1;if(this.operatorList.lastChunk){this.gfx.endDrawing();this._canvas&&InternalRenderTask.#c.delete(this._canvas);this.callback()}}}}}const version="2.16.105";exports.version=version;const construir="172ccdbe5";exportaciones.construir=construir},(t,e,s)=>{Objeto.defineProperty(e,"__esModule",{valor:!0});e.PrintAnnotationStorage=e.AnnotationStorage=void 0;var n=s(1),i=s(6),r=s(10);clase AnnotationStorage{constructor(){this._storage=new Map;this._modified=!1;this.onSetModified=null;this.onResetModified=null;this.onAnnotationEditor=null}obtenerValor(t,e){const s=this._storage.get(t);devolver void 0===s?e:Objeto.asignar(e,s)}obtenerValorSinRaw(t){devolver this._storage.get(t)}eliminar(t){this._storage.eliminar(t);0===this._storage.tamaño&&this.resetModified();si("función"==tipo de this.onAnnotationEditor){para(const t de this._storage.values())si(t instancia de i.AnnotationEditor)devolver;this.onAnnotationEditor(null)}}establecerValor(t,e){const s=this._storage.get(t);let n=!1;si(void 0!==s){para(const[t,i]de Object.entries(e))si(s[t]!==i){n=!0;s[t]=i}}de lo contrario{n=!0;this._storage.set(t,e)}n&&this.#h();e instancia de i.AnnotationEditor&&"función"==tipo de esto.onAnnotationEditor&&esto.onAnnotationEditor(e.constructor._type)}has(t){devuelve esto._almacenamiento.has(t)}getAll(){devuelve esto._almacenamiento.tamaño>0?(0,n.objectFromMap)(esto._almacenamiento):null}get size(){devuelve esto._almacenamiento.tamaño}#h(){if(!this._modified){this._modified=!0;"función"==tipo de esto.onSetModified&&esto.onSetModified()}}resetModified(){if(this._modified){this._modified=!1;"función"==tipo de esto.onResetModified&&esto.onResetModified()}}get print(){devuelve nuevo PrintAnnotationStorage(esto)}get serializable(){si(0===este._storage.size)devuelve null;const t=new Mapa;para(const[e,s]de este._storage){const n=s instancia de i.AnnotationEditor?s.serialize():s;n&&t.set(e,n)}devuelve t}estático getHash(t){si(!t)devuelve"";const e=new r.MurmurHash3_64;para(const[s,n]de t)e.update(`${s}:${JSON.stringify(n)}`);devuelve e.hexdigest()}}e.AnnotationStorage=AnnotationStorage;clase PrintAnnotationStorage extiende AnnotationStorage{#d=null;constructor(t){super();this.#d=structuredClone(t.serializable)}obtener print(){(0,n.unreachable)("No debería llamar a PrintAnnotationStorage.print")}obtener serializable(){devolver this.#d}}e.PrintAnnotationStorage=PrintAnnotationStorage},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});e.AnnotationEditor=void 0;var n=s(7),i=s(1);clase AnnotationEditor{#u=this.focusin.bind(this);#p=this.focusout.bind(this);#g=!1;#f=!1;#m=!1;#b=AnnotationEditor._zIndex++;static _colorManager=new n.ColorManager;static _zIndex=1;constructor(t){this.constructor===AnnotationEditor&&(0,i.unreachable)("No se puede inicializar AnnotationEditor.");this.parent=t.parent;this.id=t.id;this.width=this.height=null;this.pageIndex=t.parent.pageIndex;this.name=t.name;this.div=null;const[e,s]=this.parent.viewportBaseDimensions;this.x=tx/e;this.y=ty/s;this.rotation=this.parent.viewport.rotation;this.isAttachedToDOM=!1}obtención estática _defaultLineColor(){return(0,i.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#b}focusin(t){this.#g?this.#g=!1:this.parent.setSelected(this)}focusout(t){if(! este.isAttachedToDOM)devolver;si(!t.relatedTarget?.closest(`#${this.id}`)){t.preventDefault();este.parent.isMultipleSelection||este.commitOrRemove()}}commitOrRemove(){este.isEmpty()?this.remove():este.commit()}commit(){este.parent.addToAnnotationStorage(this)}dragstart(t){constante e=this.parent.div.getBoundingClientRect();this.startX=t.clientX-ex;this.startY=t.clientY-ey;t.dataTransfer.setData("texto sin formato",this.id);t.dataTransfer.effectAllowed="mover"}setAt(t,e,s,n){const[i,r]=this.parent.viewportBaseDimensions;[s,n]=this.screenToPageTranslation(s,n);this.x=(t+s)/i;this.y=(e+n)/r;this.div.style.left= 100*this.x+"%";this.div.style.top=100*this.y+"%"}translate(t,e){const[s,n]=this.parent.viewportBaseDimensions;[t,e]=this.screenToPageTranslation(t,e);this.x+=t/s;this.y+=e/n;this.div.style.left=100*this.x+"%";this.div.style.top=100*this.y+"%"}screenToPageTranslation(t,e){const{rotación:s}=this.parent.viewport;switch(s){caso 90:return[e,-t];caso 180:return[-t,-e];caso 270: return[-e,t]; valor predeterminado: return[t,e]}}setDims(t,e){const[s,n]=this.parent.viewportBaseDimensions;this.div.style.width=100*t/s+"%";this.div.style.height=100*e/n+"%"}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div");this.div.setAttribute("dat a-editor-rotation",(360-this.rotation)%360);this.div.className=this.name;this.div.setAttribute("id",this.id);this.div.setAttribute("tabIndex",0);this.setInForeground();this.div.addEventListener("enfoque de entrada",this.#u);this.div.addEventListener("enfoque de salida",this.#p);const[t,e]=this.obtenerTraducciónInicial();this.translate(t,e);(0,n.bindEvents)(this,this.div,["dragstart","pointerdown"]);devolver this.div}pointerdown(t){constante e=n.KeyboardManager.platform.isMac;if(0!==t.button||t.ctrlKey&&e)t.preventDefault();else{t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this);this.#g=!0}}getRect(t,e){const[s,n]=this.parent.viewportBaseDimensions,[i,r]=this.parent.pageDimensions,a=i*t/s,o=r*e/n,l=this.x*i,c=this.y*r,h=this.width*i,d=this.height*r;switch(this.rotation){case 0:return[l+a,rcod,l+a+h,rco];case 90:return[l+o,r-c+a,l+o+d,r-c+a+h];caso 180:return[lah,r-c+o,la,r-c+o+d];caso 270:return[lod,rcah,lo,rca];predeterminado:lanzar nuevo Error("Rotación inválida")}}getRectInCurrentCoords(t,e){const[s,n,i,r]=t,a=is,o=rn;switch(this.rotation){caso 0:return[s,er,a,o];caso 90:return[s,en,o,a];caso 180:return[i,en,a,o];caso 270:return[i,er,o,a];predeterminado:lanzar nuevo Error("Rotación inválida rotación")}}onceAdded(){}isEmpty(){devuelve!1}enableEditMode(){this.#m=!0}disableEditMode(){this.#m=!1}isInEditMode(){devuelve esto.#m}shouldGetKeyboardEvents(){devuelve!1}needsToBeRebuilt(){devuelve esto.div&&!this.isAttachedToDOM}rebuild(){this.div?.addEventListener("focusin",this.#u)}serialize(){(0,i.unreachable)("Un editor debe ser serializable")}static deserialize(t,e){const s=new este.prototipo.constructor({padre:e,id:e.getNextId()});s.rotación=t.rotación;const[n,i]=e.pageDimensions,[r,a,o,l]=s.getRectInCurrentCoords(t.rect,i);sx=r/n;sy=a/i;s.ancho=o/n;s.alto=l/i;retorno s}eliminar(){this.div.removeEventListener("enfoque entrante",this.#u);this.div.removeEventListener("enfoque saliente",this.#p);this.isEmpty()||this.commit();this.parent.remove(this)}seleccionar(){this.div?.classList.add("selectedEditor")}deseleccionar(){this.div?.classList.remove("selectedEditor")}actualizarParámetros(t,e){}deshabilitarEdición(){}habilitarEdición(){}obtener propiedadesParaActualizar(){devolver{}}obtener contentDiv(){devolver this.div}obtener isEditing(){devolver this.#f}establecer isEditing(t){this.#f=t;if(t){this.parent.setSelected(this);this.parent.setActiveEditor(this)}de lo contrario este.padre.setActiveEditor(null)}}e.AnnotationEditor=AnnotationEditor},(t,e,s)=>{Object.defineProperty(e,"__esModule",{valor:!0});e.KeyboardManager=e.CommandManager=e.ColorManager=e.AnnotationEditorUIManager=void 0;e.bindEvents=función bindEvents(t,e,s){para(const n de s)e.addEventListener(n,t[n].bind(t))};e.opacityToHex=función opacityToHex(t){devuelve Math.round(Math.min(255,Math.max(1,255*t))).toString(16).padStart(2,"0"};var n=s(1),i=s(8);clase IdManager{#A=0;getId(){return`${n.AnnotationEditorPrefix}${this.#A++}`}}clase CommandManager{#_=[];#y=!1;#v;#S=-1;constructor(t=128){this.#v=t}add({cmd:t,undo:e,mustExec:s,type:n=NaN,overwriteIfSameType:i=!1,keepUndo:r=!1}){s&&t();if(this.#y)return;const a={cmd:t,undo:e,type:n};if(-1===this.#S){this.#_.longitud>0&&(esto.#_.longitud=0);esto.#S=0;esto.#_.push(a);return}if(i&&esto.#_[esto.#S].type===n){r&&(a.undo=esto.#_[esto.#S].undo);esto.#_[esto.#S]=a;return}const o=esto.#S+1;si(o===esto.#v)esto.#_.empalmar(0,1);sino{esto.#S=o;o<esto.#_.longitud&&esto.#_.empalmar(o)}esto.#_.empujar(a)}deshacer(){si(-1!==esto.#S){esto.#y=!0;esto.#_[esto.#S].deshacer();esto.#y=!1;esto.#S-=1}}rehacer(){si(esto.#S<esto.#_.longitud-1){esto.#S+=1;esto.#y=!0;esto.#_[esto.#S].cmd();esto.#y=!1}}tieneAlgoQueDeshacer(){retorno-1!==esto.#S}tieneAlgoQueRehacer(){retorno esto.#S<esto.#_.length-1}destroy(){esto.#_=null}}e.CommandManager=CommandManager;clase KeyboardManager{constructor(t){esto.buffer=[];esto.callbacks=nuevo Mapa;esto.allKeys=nuevo Conjunto;const e=KeyboardManager.platform.isMac;para(const[s,n]de t)para(const t de s){const s=t.startsWith("mac+");si(e&&s){esto.callbacks.set(t.slice(4),n);esto.allKeys.add(t.split("+").en(-1))}de lo contrario si(!e&&!s){esto.callbacks.set(t,n);esto.allKeys.add(t.split("+").en(-1))}}}estático obtener plataforma(){const t="indefinido"!=tipo de navegador?navigator.platform:"";return(0,n.shadow)(this,"platform",{isWin:t.includes("Win"),isMac:t.includes("Mac")})}#x(t){t.altKey&&this.buffer.push("alt");t.ctrlKey&&this.buffer.push("ctrl");t.metaKey&&this.buffer.push("meta");t.shiftKey&&this.buffer.push("shift");this.buffer.push(t.key);const e=this.buffer.join("+");this.buffer.length=0;return e}exec(t,e){if(!this.allKeys.has(e.key))return;const s=this.callbacks.get(this.#x(e));if(s){s.bind(t)();e.stopPropagation();e.preventDefault()}}}e.KeyboardManager=KeyboardManager;clase ClipboardManager{#E=null;copy(t){if(t){Array.isArray(t)?this.#E=t.map((t=>t.serialize())):this.#E=[t.serialize()];this.#E=this.#E.filter((t=>!!t));0===this.#E.length&&(this.#E=null)}}paste(){return this.#E}isEmpty(){return null===this.#E}destroy(){this.#E=null}}clase ColorManager{static _colorsMapping=new Mapa([["TextoCanvas",[0,0,0]],["Canvas",[255,255,255]]]); obtener _colores(){const t=new Mapa([["TextoCanvas",null],["Canvas",null]]);(0,i.getColorValues)(t);devolver(0,n.shadow)(this,"_colors",t)}convertir(t){const e=(0,i.getRGB)(t);si(!window.matchMedia("(forced-colors: active)").matches)devolver e;para(const[t,s]de this._colors)si(s.every(((t,s)=>t===e[s])))devolver ColorManager._colorsMapping.get(t);devolver e}obtenerCódigoHex(t){const e=this._colors.get(t);devolver e?n.Util.makeHexColor(...e):t}}e.ColorManager=ColorManager;clase AnnotationEditorUIManager{#C=nulo;#P=nuevo Mapa;#T=nuevo Mapa;#w=nuevo Portapapeles;#k=nuevo Administrador de comandos;#F=0;#M=nulo;#R=nulo;#D=nuevo IdManager;#I=!1;#O=n.AnnotationEditorType.NONE;#L=nuevo Conjunto;#N=this.keydown.bind(this);#B=this.onEditingAction.bind(this);#j=this.onPageChanging.bind(this);#U={isEditing:!1,isEmpty:!0,hasEmptyClipboard:!0,tieneAlgoQueDeshacer:!1,tieneAlgoQueRehacer:!1,tieneEditorSeleccionado:!1};#q=null;static _keyboardManager=new Administrador de teclado ([[["ctrl+a","mac+meta+a"],AnnotationEditorUIManager.prototype.seleccionar todo],[["ctrl+c","mac+meta+c"],AnnotationEditorUIManager.prototype.copiar],[["ctrl+v","mac+meta+v"],AnnotationEditorUIManager.prototype.pegar],[["ctrl+x","mac+meta+x"],AnnotationEditorUIManager.prototype.cortar],[["ctrl+z","mac+meta+z"],AnnotationEditorUIManager.prototype.deshacer],[["ctrl+y","ctrl+mayús+Z","mac+meta+mayús+Z"],AnnotationEditorUIManager.prototype.rehacer],[["Retroceso","alt+Retroceso as","ctrl+Retroceso","mayús+Retroceso","mac+Retroceso","mac+alt+Retroceso","mac+ctrl+Retroceso","Supr","ctrl+Supr","mayús+Supr"],AnnotationEditorUIManager.prototype.delete],[["Escape","mac+Escape"],AnnotationEditorUIManager.prototype.unselectAll]]);constructor(t,e){this.#q=t;this.#R=e;this.#R._on("accióndeedición",this.#B);this.#R._on("cambiodepágina",this.#j)}destroy(){this.#W();this.#R._off("accióndeedición",this.#B);this.#R._off("cambiodepágina",this.#j);for(const t of esto.#T.values())t.destroy();esto.#T.clear();esto.#P.clear();esto.#C=null;esto.#L.clear();esto.#w.destroy();esto.#k.destroy()}onPageChanging({pageNumber:t}){esto.#F=t-1}focusMainContainer(){esto.#q.focus()}#z(){esto.#q.addEventListener("keydown",esto.#N)}#W(){esto.#q.removeEve ntListener("keydown",this.#N)}keydown(t){this.getActive()?.shouldGetKeyboardEvents()||AnnotationEditorUIManager._keyboardManager.exec(this,t)}onEditingAction(t){["deshacer","rehacer","cortar","copiar","pegar","eliminar","seleccionarTodo"].includes(t.name)&&this[t.name]()}#G(t){Object.entries(t).so yo((([t,e])=>esto.#U[t]!==e))&&esto.#R.dispatch("estadosdeleditordeanotacióncambiados",{origen:esto,detalles:Object.assign(esto.#U,t)})}#H(t){esto.#R.dispatch("parámetrosdeleditordeanotacióncambiados",{origen:esto,detalles:t})}setEditingState(t){if(t){esto.#z();esto.#G({estáEditando:esto.#O!==n.Ann otationEditorType.NONE,estáVacío:esto.#V(),tieneAlgoQueDeshacer:esto.#k.tieneAlgoQueDeshacer(),tieneAlgoQueRehacer:esto.#k.tieneAlgoQueRehacer(),tieneEditorSeleccionado:!1,tienePortapapelesVacío:esto.#w.estáVacío()})}else{esto.#W();esto.#G({estáEditando:!1})}}registerEditorTypes(t){esto.#M=t;para(const t de esto.#M)esto.#H(t.defaultPropertiesToUpdate)}getId(){devolver esto.#D.getId()}addLayer(t){esto.#T.set(t.pageIndex,t);esto.#I?t.enable():t.disable()}removeLayer(t){esto.#T.delete(t.pageIndex)}updateMode(t){esto.#O=t;if(t===n.AnnotationEditorType.NONE){esto.setEditingState(!1);esto.#X()}else{esto.setEditingState(!0);esto.#$();for(const e de esto.#T.values())e.updateMode(t)}}updateToolbar(t){t!==esto.#O&&esto.#R.dispatch("cambiar modo de editor de anotaciones",{origen:this,modo:t})}updateParams(t,e){para(constantes de esto.#L)s.updateParams(t,e);para(constantes de esto.#M)s.updateDefaultParams(t,e)}#$(){si(!this.#I){esto.#I=!0;para(constantes de esto.#T.values())t.enable()}}#X(){esto.unselectAll();si(esto.#I){esto.#I=!1;para(constantes de esto.#T.values())t.disable()}}getEditors(t){constantes e=[];para(constantes de esto.#P.values())s.pageIndex===t&&e.push(s);return e}getEditor(t){devuelve esto.#P.get(t)}addEditor(t){esto.#P.set(t.id,t)}removeEditor(t){esto.#P.delete(t.id);esto.unselect(t)}#Y(t){constante e=esto.#T.get(t.pageIndex);e?e.addOrRebuild(t):esto.addEditor(t)}setActiveEditor(t){si(esto.#C!==t){esto.#C=t;t&&esto.#H(t.propertiesToUpdate)}}toggleSelected(t){si(esto.#L.has(t)){esto.#L.delete(t);t.unselect();esto.#G({hasSelectedEditor:esto.hasSelection})}de lo contrario{esto.#L.add(t);t.select();esto.#H(t.propertiesToUpdate);esto.#G({hasSelectedEditor:!0})}}setSelected(t){para(const e de esto.#L)e!==t&&e.deseleccionar();esto.#L.borrar();esto.#L.agregar(t);t.seleccionar();esto.#H(t.propertiesToUpdate);esto.#G({hasSelectedEditor:!0})}isSelected(t){devolver esto.#L.has(t)}deseleccionar(t){t.deseleccionar();esto.#L.eliminar(t);esto.#G({hasSelectedEditor:this.hasSelection})}obtener hasSelection(){devolver 0!==esto.#L.tamaño}deshacer(){esto.#k.deshacer();esto.#G({tieneAlgoQueDeshacer:esto.#k.tieneAlgoQueDeshacer(),tieneAlgoQueRehacer:!0,estáVacío:esto.#V()})}rehacer(){esto.#k.redo();esto.#G({tieneAlgoQueDeshacer:!0,tieneAlgoQueRehacer:esto.#k.tieneAlgoQueRehacer(),estáVacío:esto.#V()})}addCommands(t){esto.#k.add(t);esto.#G({tieneAlgoQueDeshacer:!0,tieneAlgoQueRehacer:!1,estáVacío:esto.#V()})}#V(){si(0===esto.#P.tamaño)devolver!0;si(1===esto.#P.tamaño)para(const t de este.#P.values())devuelve t.isEmpty();devuelve!1}eliminar(){este.#C&&este.#C.commitOrRemove();si(!este.hasSelection)devuelve;const t=[...este.#L];este.addCommands({cmd:()=>{para(const e de t)e.remove()},deshacer:()=>{para(const e de t)este.#Y(e)},mustExec:!0})}copiar(){este.#C&&este.#C.commitOrRemove();si(este.hasSelection){const t=[];para(const e de esto.#L)e.isEmpty()||t.push(e);if(0===t.length)return;esto.#w.copy(t);esto.#G({hasEmptyClipboard:!1})}}cortar(){esto.copiar();esto.borrar()}pegar(){if(esto.#w.isEmpty())return;esto.unselectAll();const t=esto.#T.get(esto.#F),e=esto.#w.paste().map((e=>t.deserialize(e)));esto.addCommands({cmd:()=>{for(const t of e)esto.#Y(t);esto.#K(e)},undo:()=>{for(const t of e)t.remove()},mustExec:!0})}#K(t){esto.#L.clear();for(const e of t)if(!e.isEmpty()){esto.#L.add(e);e.select()}esto.#G({hasSelectedEditor:!0})}selectAll(){for(const t de esto.#L)t.commit();esto.#K(esto.#P.values())}unselectAll(){if(esto.#C)this.#C.commitOrRemove();else if(0!==this.#K.size){for(const t de esto.#L)t.unselect();this.#L.clear();this.#G({hasSelectedEditor:!1})}}isActive(t){return this.#C===t}getActive(){return this.#C}getMode(){return esto.#O}}e.AnnotationEditorUIManager=AnnotationEditorUIManager},(t,e,s)=>{Object.defineProperty(e,"__esModule",{valor:!0});e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=e.AnnotationPrefix=void 0;e.deprecated=función obsoleta(t){console.log(Uso de API obsoleto: "+t)}; e.getColorValues=función getColorValues(t){const e=document.createElement("span"); e.style.visibility="hidden"; document.body.append(e); for(const s of t.keys()){e.style.color=s; const n=window.getComputedStyle(e).color; t.set(s,getRGB(n))}e.remove()}; e.getCurrentTransform=función getCurrentTransform(t){const{a:e,b:s,c:n,d:i,e:r,f:a}=t.getTransform();return[e,s,n,i,r,a]}; e.getCurrentTransformInverse=función obtenerTransformaciónActualInversa(t){const{a:e,b:s,c:n,d:i,e:r,f:a}=t.obtenerTransformación().invertirSelf();devolver[e,s,n,i,r,a]};e.obtenerNombreDeArchivoDeUrl=función obtenerNombreDeArchivoDeUrl(t){const e=t.índiceDe("#"),s=t.índiceDe("?"),n=Math.min(e>0?e:t.longitud,s>0?s:t.longitud);devolver t.subcadena(t.últimoÍndiceDe("/",n)+1,n)};e.obtenerNombreDeArchivoPdfDeUrl=función obtenerNombreDeArchivoPdfDeUrl(t,e="documento.pdf"){si("cadena"!=tipo de t)devolver e;if(isDataScheme(t)){(0,i.warn)('getPdfFilenameFromUrl: ignore "data:"-URL por razones de rendimiento.');return e}const s=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,n=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(t);let r=s.exec(n[1])||s.exec(n[2])||s.exec(n[3]);if(r){r=r[0];if(r.includes("%"))try{r=s.exec(decodeURIComponent(r))[0]}catch(t){}}return r||e};e.getRGB=getRGB;e.getXfaPageViewport=función getXfaPageViewport(t,{escala:e=1,rotación:s=0}){const{ancho:n,alto:i}=t.attributes.style,r=[0,0,parseInt(n),parseInt(i)];devolver nuevo PageViewport({viewBox:r,escala:e,rotación:s})};e.isDataScheme=isDataScheme;e.isPdfFile=función isPdfFile(t){devolver "cadena"==tipo de t&&/\.pdf$/i.test(t)};e.isValidFetchUrl=isValidFetchUrl;e.loadScript=función loadScript(t,e=!1){devolver nueva Promesa(((s,n)=>{constante i=document.createElement("script");i.src=t;i.onload=function(t){e&&i.remove();s(t)};i.onerror=function(){n(new Error(`No se puede cargar el script en: ${i.src}`))};(document.head||document.documentElement).append(i)}))};var n=s(9),i=s(1);e.AnnotationPrefix="pdfjs_internal_id_";clase PixelsPerInch{CSS estático=96;PDF estático=72;PDF_TO_CSS_UNITS estático=this.CSS/this.PDF}e.PixelsPerInch=PixelsPerInch;clase DOMCanvasFactory extiende n.BaseCanvasFactory{constructor({ownerDocument:t=globalThis.document}={}){super();this._document=t}_createCanvas(t,e){const s=this._document.createElement("canvas");s.width=t;s.height=e;return s}}e.DOMCanvasFactory=DOMCanvasFactory;función asíncrona fetchData(t,e=!1){if(isValidFetchUrl(t,document.baseURI)){const s=await fetch(t);if(!s.ok)throw new Error(s.statusText);return e?new Uint8Array(await s.arrayBuffer()):(0,i.stringToBytes)(await s.text())}return new Promise(((s,n)=>{const r=new XMLHttpRequest;r.open("GET",t,!0);e&&(r.responseType="arraybuffer");r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(200===r.status||0===r.status){let t;e&&r.response?t=new Uint8Array(r.response):!e&&r.responseText&&(t=(0,i.stringToBytes)(r.responseText));if(t){s(t);return}}n(new Error(r.statusText))}};r.send(null)}))}la clase DOMCMapReaderFactory extiende n.BaseCMapReaderFactory{_fetchData(t,e){return fetchData(t,this.isCompressed).then((t=>({cMapData:t,compressionType:e})))}}e.DOMCMapReaderFactory=DOMCMapReaderFactory;la clase DOMStandardFontDataFactory extiende n.BaseStandardFontDataFactory{_fetchData(t){return fetchData(t,!0)}}e.DOMStandardFontDataFactory=DOMStandardFontDataFactory;la clase DOMSVGFactory extiende n.BaseSVGFactory{_createSVG(t){devuelve document.createElementNS("http://www.w3.org/2000/svg",t)}}e.DOMSVGFactory=DOMSVGFactory;clase PageViewport{constructor({viewBox:t,escala:e,rotación:s,desplazamientoX:n=0,desplazamientoY:i=0,dontFlip:r=!1}){this.viewBox=t;this.escala=e;this.rotación=s;this.offsetX=n;this.offsetY=i;const a=(t[2]+t[0])/2,o=(t[3]+t[1])/2;let l,c,h,d,u,p,g,f;(s%=360)<0&&(s+=360);switch(s){case 180:l=-1;c=0;h=0;d=1;break;case 90:l=0;c=1;h=1;d=0;break;case 270:l=0;c=-1;h=-1;d=0;break;case 0:l=1;c=0;h=0;d=-1;break;default:throw new Error("PageViewport: Rotación no válida, debe ser un múltiplo de 90 grados.")}si(r){h=-h;d=-d}si(0===l){u=Math.abs(ot[1])*e+n;p=Math.abs(at[0])*e+i;g=Math.abs(t[3]-t[1])*e;f=Math.abs(t[2]-t[0])*e}sino{u=Math.abs(at[0])*e+n;p=Math.abs(ot[1])*e+i;g=Math.abs(t[2]-t[0])*e;f=Math.abs(t[3 ]-t[1])*e}this.transform=[l*e,c*e,h*e,d*e,ul*e*ah*e*o,pc*e*ad*e*o];this.width=g;this.height=f}clone({escala:t=this.scale,rotación:e=this.rotación,desplazamientoX:s=this.offsetX,desplazamientoY:n=this.offsetY,dontFlip:i=!1}={}){return new PageViewport({viewBox:this.viewBox.slice(),scale:t,rotation:e,offsetX:s,offsetY:n,dontFlip:i})}convertToViewportPoint(t,e){return i.Util.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=i.Util.applyTransform([t[0],t[1]],this.transform),s=i.Util.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],s[0],s[1]]}convertToPdfPoint(t,e){return i.Util.applyInverseTransform([t,e],this.transform)}}e.PageViewport=PageViewport;clase RenderingCancelledException extiende i.BaseException{constructor(t,e){super(t,"RenderingCancelledException");this.type=e}}e.RenderingCancelledException=RenderingCancelledException;function isDataScheme(t){const e=t.length;let s=0;for(;s<e&&""===t[s].trim();)s++;return"data:"===t.substring(s,s+5).toLowerCase()}e.StatTimer=class StatTimer{constructor(){this.started=Object.create(null);this.times=[]}time(t){t en this.started&&(0,i.warn)(`El temporizador ya se está ejecutando durante ${t}`);this.started[t]=Date.now()}timeEnd(t){t en this.started||(0,i.warn)(`El temporizador no se ha iniciado durante ${t}`);this.times.push({nombre:t,inicio:this.started[t],fin:Fecha.now()});eliminar this.started[t]}toString(){const t=[];let e=0;para(const t de this.times){const s=t.nombre;s.length>e&&(e=s.length)}para(const s de this.times){const n=s.fin-s.inicio;t.push(`${s.nombre.padEnd(e)} ${n}ms\n`)}devuelve t.join("")}};función isValidFetchUrl(t,e){try{const{protocolo:s}=e?new URL(t,e):new URL(t);return"http:"===s||"https:"===s}catch(t){return!1}}let r;e.PDFDateString=class PDFDateString{static toDateObject(t){if(!t||"string"!=typeof t)return null;r||(r=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=r.exec(t);if(!e)return null;const s=parseInt(e[1],10);let n=parseInt(e[2],10);n=n>=1&&n<=12?n-1:0;let i=parseInt(e[3],10);i=i>=1&&i<=31?i:1;let a=parseInt(e[4],10);a=a>=0&&a<=23?a:0;let o=parseInt(e[5],10);o=o>=0&&o<=59?o:0;let l=parseInt(e[6],10);l=l>=0&&l<=59?l:0;const c=e[7]||"Z";let h=parseInt(e[8],10);h=h>=0&&h<=23?h:0;let d=parseInt(e[9],10)||0;d=d>=0&&d<=59?d:0;si("-"===c){a+=h;o+=d}sino si("+"===c){a-=h;o-=d}devuelve nueva Fecha(Fecha.UTC(s,n,i,a,o,l))}};función obtenerRGB(t){si(t.iniciaCon("#")){const e=parseInt(t.slice(1),16);devuelve[(16711680&e)>>16,(65280&e)>>8,255&e]}si(t.iniciaCon("rgb("))devuelve t.slice(4,-1).split(",").map((t=>parseInt(t)));if(t.startsWith("rgba("))return t.slice(5,-1).split(",").map((t=>parseInt(t))).slice(0,3);(0,i.warn)(`Formato de color no válido: "${t}"`);return[0,0,0]}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var n=s(1);class BaseCanvasFactory{constructor(){this.constructor===BaseCanvasFactory&&(0,n.unreachable)("No se puede inicializar BaseCanvasFactory.")}create(t,e){if(t<=0||e<=0)throw new Error("Tamaño de lienzo no válido");const s=this._createCanvas(t,e);return{canvas:s,context:s.getContext("2d")}}reset(t,e,s){if(!t.canvas)throw new Error("No se especificó el lienzo");if(e<=0||s<=0)throw new Error("Tamaño de lienzo no válido");t.canvas.width=e;t.canvas.height=s}destroy(t){if(!t.canvas)throw new Error("El lienzo no está especificado"); t.canvas.width=0; t.canvas.height=0; t.canvas=null; t.context=null}_createCanvas(t,e){(0,n.unreachable)("Se llamó al método abstracto `_createCanvas`.")}}e.BaseCanvasFactory=BaseCanvasFactory;class BaseCMapReaderFactory{constructor({baseUrl:t=null,isCompressed:e=!1}){this.constructor===BaseCMapReaderFactory&&(0,n.unreachable)("No se puede inicializar BaseCMapReaderFactory.");this.baseUrl=t;this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error('Se debe especificar el parámetro "baseUrl" de CMap, asegúrese de que los parámetros de la API "cMapUrl" y "cMapPacked" estén proporcionado.');if(!t)throw new Error("Se debe especificar el nombre de CMap.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":""),s=this.¿está comprimido?n.CMapCompressionType.BINARY:n.CMapCompressionType.NONE; devolver this._fetchData(e,s).catch((t=>{throw new Error(`No se puede cargar ${this.isCompressed?"binary ":""}CMap en: ${e}`)}))}_fetchData(t,e){(0,n.unreachable)("Se llamó al método abstracto `_fetchData`.")}}e.BaseCMapReaderFactory=BaseCMapReaderFactory;clase BaseStandardFontDataFactory{constructor({baseUrl:t=null}){this.constructor===BaseStandardFontDataFactory&&(0,n.unreachable)("No se puede inicializar BaseStandardFontDataFactory.");this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error('Debe especificarse el parámetro de fuente estándar "baseUrl", asegúrese de que se proporcione el parámetro de API "standardFontDataUrl".');if(!t)throw new Error("Debe especificarse el nombre del archivo de la fuente.");const e=`${this.baseUrl}${t}`;return this._fetchData(e).catch((t=>{throw new Error(`No se pueden cargar los datos de la fuente en: ${e}`)}))}_fetchData(t){(0,n.unreachable)("Se llamó al método abstracto `_fetchData`.")}}e.BaseStandardFontDataFactory=BaseStandardFontDataFactory;class BaseSVGFactory{constructor(){this.constructor===BaseSVGFactory&&(0,n.unreachable)("No se puede inicializar BaseSVGFactory.")}create(t,e,s=!1){if(t<=0||e<=0)throw new Error("Dimensiones SVG no válidas");const n=this._createSVG("svg:svg");n.setAttribute("versión","1.1");if(!s){n.setAttribute("ancho",`${t}px`);n.setAttribute("alto",`${e}px`)}n.setAttribute("preserveAspectRatio","none");n.setAttribute("viewBox",`0 0 ${t} ${e}`);return n}createElement(t){if("string"!=typeof t)throw new Error("Tipo de elemento SVG no válido");return this._createSVG(t)}_createSVG(t){(0,n.unreachable)("Se llamó al método abstracto `_createSVG`.")}}e.BaseSVGFactory=BaseSVGFactory},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});e.MurmurHash3_64=void 0;var n=s(1);const i=3285377520,r=4294901760,a=65535;e.MurmurHash3_64=class MurmurHash3_64{constructor(t){this.h1=t?4294967295&t:i;this.h2=t?4294967295&t:i}update(t){let e,s;if("string"==typeof t){e=new Uint8Array(2*t.length);s=0;for(let n=0,i=t.length;n<i;n++){const i=t.charCodeAt(n);if(i<=255)e[s++]=i;else{e[s++]=i>>>8;e[s++]=255&i}}}else{if(!(0,n.isArrayBuffer)(t))throw new Error("Formato de datos incorrecto en MurmurHash3_64_update. La entrada debe ser una cadena o una matriz.");e=t.slice();s=e.byteLength}const i=s>>2,o=s-4*i,l=new Uint32Array(e.buffer,0,i);let c=0,h=0,d=este.h1,u=este.h2;const p=3432918353,g=461845907,f=11601,m=13715;para(sea t=0;t<i;t++)si(1&t){c=l[t];c=c*p&r|c*f&a;c=c<<15|c>>>17;c=c*g&r|c*m&a;d^=c;d=d<<13|d>>>19;d=5*d+3864292196}sino{h=l[t];h=h*p&r|h*f&a;h=h<<15|h>>>17;h=h*g&r|h*m&a;u^=h;u=u<<13|u>>>19;u=5*u+3864292196}c=0;cambiar(o){caso 3:c^=e[4*i+2]<<16;caso 2:c^=e[4*i+1]<<8;caso 1:c^=e[4*i];c=c*p&r|c*f&a;c=c<<15|c>>>17;c=c*g&r|c*m&a;1&i?d^=c:u^=c}this.h1=d;this.h2=u}hexdigest(){let t=este.h1,e=este.h2;t^=e>>>1;t=3981806797*t&r|36045*t&a;e=4283543511*e&r|(2950163797*(e<<16|t>>>16)&r)>>>16;t^=e>>>1;t=444984403*t&r|60499*t&a;e=3301882366*e&r|(3120437893*(e<<16|t>>>16)&r)>>>16;t^=e>>>1;const s=(t>>>0).toString(16),n=(e>>>0).toString(16);retorno s.padStart(8,"0")+n.padStart(8,"0")}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});e.FontLoader=e.FontFaceObject=void 0;var n=s(1);class BaseFontLoader{constructor({docId:t,onUnsupportedFeature:e,ownerDocument:s=globalThis.document,styleElement:i=null}){this.constructor===BaseFontLoader&&(0,n.unreachable)("No se puede inicializar BaseFontLoader.");this.docId=t;this._onUnsupportedFeature=e;this._document=s;this.nativeFontFaces=[];this.styleElement=null}addNativeFontFace(t){this.nativeFontFaces.push(t);this._document.fonts.add(t)}insertRule(t){let e=this.styleElement;if(!e){e=this.styleElement=this._document.createElement("style");e.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`;this._document.documentElement.getElementsByTagName("head")[0].append(e)}const s=e.sheet;s.insertRule(t,s.cssRules.length)}clear(){for(const t of este.nativeFontFaces)este._document.fonts.delete(t);este.nativeFontFaces.length=0;si(este.styleElement){este.styleElement.remove();este.styleElement=null}}async bind(t){si(t.attached||t.missingFile)return;t.attached=!0;si(este.isFontLoadingAPISupported){const e=t.createNativeFontFace();si(e){este.addNativeFontFace(e);try{await e.loaded}catch(s){este._onUnsupportedFeature({featureId:n.UNSUPPORTED_FEATURES.errorFontLoadNative});(0,n.warn)(`Error al cargar la fuente '${e.family}': '${s}'.`); t.disableFontFace=!0;throw s}}return}const e=t.createFontFaceRule();if(e){this.insertRule(e);if(this.isSyncFontLoadingSupported)return;await new Promise((s=>{const n=this._queueLoadingCallback(s);this._prepareFontLoadEvent([e],[t],n)}))}}_queueLoadingCallback(t){(0,n.unreachable)("Método abstracto `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return(0,n.shadow)(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){(0,n.unreachable)("Método abstracto `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,n.unreachable)("Método abstracto `_loadTestFont`.")}_prepareFontLoadEvent(t,e,s){(0,n.unreachable)("Método abstracto `_prepareFontLoadEvent`.")}}let i;e.FontLoader=i;e.FontLoader=i=class GenericFontLoader extiende BaseFontLoader{constructor(t){super(t);this.loadingContext={requests:[],nextRequestId:0};this.loadTestFontId=0}get isSyncFontLoadingSupported(){let t=!1;if("undefined"==typeof navigator)t=!0;else{/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent)?.[1]>=14&&(t=!0)}return(0,n.shadow)(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){const e=this.loadingContext,s={id:"pdfjs-font-loading-"+e.nextRequestId++,done:!1,complete:function completeRequest(){(0,n.assert)(!s.done,"completeRequest() no se puede llamar dos veces.");s.done=!0;for(;e.requests.length>0&&e.requests[0].done;){const t=e.requests.shift();setTimeout(t.callback,0)}},callback:t};e.requests.push(s);return s}get _loadTestFont(){return(0,n.shadow)(esto,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAg UZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAA LwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/h gAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAA FoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAAACAAYJAAAAA AAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAAAAAAAIAABAAAADgCuAAEAAAAAAAAAAAQAAA AEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAEAAAAAAAAUAAQAAAAEAAAAAAAYAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJA AYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA AAAAAA ... FhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAagABAAAAAAAAAAAD6AAAAAAAAAA=="))}_prepareFontLoadEvent(t,e,s){función int32(t,e){devuelve t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|255&t.charCodeAt(e+3)}función spliceString(t,e,s,n){devuelve t.substring(0,e)+n+t.substring(e+s)}let i,r;const a=this._document.createElement("canvas");a.width=1;a.height=1;const o=a.getContext("2d");let l=0;const c=`lt${Date.now()}${this.loadTestFontId++}`;let h=this._loadTestFont;h=spliceString(h,976,c.length,c);const d=1482184792;sea u=int32(h,16);para(i=0,r=c.length-3;i<r;i+=4)u=u-d+int32(c,i)|0;i<c.length&&(u=u-d+int32(c+"XXX",i)|0);h=spliceString(h,16,4,(0,n.string32)(u));const p=`@font-face {font-family:"${c}";src:${`url(data:font/opentype;base64,${btoa(h)});`}}`;esto.insertRule(p); const g=[]; para (const t de e) g.push(t.loadedName); g.push(c); const f=this._document.createElement("div"); f.style.visibility="hidden"; f.style.width=f.style.height="10px"; f.style.position="absolute"; f.style.top=f.style.left="0px"; para (const t de g) {const e=this._document.createElement("span"); e.textContent="Hola"; e.style.fontFamily=t; f.append(e)} this._document.body.append(f); !function isFontReady(t,e) {l++; if(l>30) {(0,n.warn)("La fuente de prueba de carga nunca se cargó."); e(); return} o.font="30px "+t;o.fillText(".",0,20);o.getImageData(0,0,1,1).data[3]>0?e():setTimeout(isFontReady.bind(null,t,e))}(c,(()=>{f.remove();s.complete()}))}};e.FontFaceObject=clase FontFaceObject{constructor(t,{isEvalSupported:e=!0,disableFontFace:s=!1,ignoreErrors:n=!1,onUnsupportedFeature:i,fontRegistry:r=null}){this.compiledGlyphs=Object.create(null);for(const e in t)this[e]=t[e];this.isEvalSupported=!1!==e;this.disableFontFace=!0===s;this.ignoreErrors=!0===n;this._onUnsupportedFeature=i;this.fontRegistry=r}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(this.cssFontInfo){const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`);t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}else t=new FontFace(este.loadedName,este.datos,{});este.fontRegistry&&este.fontRegistry.registerFont(este);devuelve t}createFontFaceRule(){si(!este.datos||este.disableFontFace)devuelve null;const t=(0,n.bytesToString)(este.datos),e=`url(datos:${este.mimetype};base64,${btoa(t)});`;let s;si(este.cssFontInfo){let t=`font-weight: ${este.cssFontInfo.fontWeight};`;este.cssFontInfo.italicAngle&&(t+=`font-style: oblique ${este.cssFontInfo.italicAngle}deg;`);s=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${t}src:${e}}`}else s=`@font-face {font-family:"${this.loadedName}";src:${e}}`;this.fontRegistry&&this.fontRegistry.registerFont(this,e);return s}getPathGenerator(t,e){if(void 0!==this.compiledGlyphs[e])return this.compiledGlyphs[e];let s;try{s=t.get(this.loadedName+"_path_"+e)}catch(t){if(!this.ignoreErrors)throw t;this._onUnsupportedFeature({featureId:n.UNSUPPORTED_FEATURES.errorFontGetPath});(0,n.warn)(`getPathGenerator - ignorando el carácter: "${t}".`); return this.compiledGlyphs[e]=function(t,e){}}if(this.isEvalSupported&&n.FeatureTest.isEvalSupported){const t=[];for(const e of s){const s=void 0!==e.args?e.args.join(","):"";t.push("c.",e.cmd,"(",s,");\n")}return this.compiledGlyphs[e]=new Function("c","size",t.join(""))}return este.compiledGlyphs[e]=función(t,e){para(const n de s){"escala"===n.cmd&&(n.args=[e,-e]);t[n.cmd].aplicar(t,n.args)}}}}},(t,e,s)=>{Objeto.defineProperty(e,"__esModule",{valor:!0});e.CanvasGraphics=void 0;var n=s(8),i=s(1),r=s(13),a=s(14),o=s(3);const l=4096,c=o.isNodeJS&&"undefined"==typeof Path2D?-1:1e3,h=16;clase CachedCanvases{constructor(t){this.canvasFactory=t;this.cache=Object.create(null)}getCanvas(t,e,s){let n;if(void 0!==this.cache[t]){n=this.cache[t];this.canvasFactory.reset(n,e,s)}else{n=this.canvasFactory.create(e,s);this.cache[t]=n}return n}delete(t){delete este.cache[t]}clear(){para(const t en este.cache){const e=este.cache[t];este.canvasFactory.destroy(e);eliminar este.cache[t]}}}función dibujarImageAtIntegerCoords(t,e,s,i,r,a,o,l,c,h){const[d,u,p,g,f,m]=(0,n.getCurrentTransform)(t);si(0===u&&0===p){const n=o*d+f,b=Math.round(n),A=l*g+m,_=Math.round(A),y=(o+c)*d+f,v=Math.abs(Math.round(y)-b)||1,S=(l+h)*g+m,x=Math.abs(Math.round(S)-_)||1;t.setTransform(Math.sign(d),0,0,Math.sign(g),b,_);t.drawImage(e,s,i,r,a,0,0,v,x);t.setTransform(d,u,p,g,f,m);return[v,x]}if(0===d&&0===g){const n = l*p+f, b = Math.round(n), A = o*u+m, _ = Math.round(A), y = (l+h)*p+f, v = Math.abs(Math.round(y)-b)||1, S = (o+c)*u+m, x = Math.abs(Math.round(S)-_)||1; t.setTransform(0, Math.sign(u), Math.sign(p), 0, b, _); t.drawImage(e,s,i,r,a,0,0,x,v); t.setTransform(d,u,p,g,f,m); return[x,v]} t.drawImage(e,s,i,r,a,o,l,c,h); return[Math.hypot(d,u)*c, Math.hypot(p,g)*h]} clase CanvasExtraState{constructor(t,e){este.alphaIsShape=!1;este.fontSize=0;este.fontSizeScale=1;este.textMatrix=i.IDENTITY_MATRIX;este.textMatrixScale=1;este.fontMatrix=i.FONT_IDENTITY_MATRIX;este.leading=0;este.x=0;este.y=0;este.lineX=0;este.lineY=0;este.charSpacing=0;este.wordSpacing=0;este.texto HScale=1; este.textRenderingMode=i.TextRenderingMode.FILL; este.textRise=0; este.fillColor="#000000"; este.strokeColor="#000000"; este.patternFill=!1; este.fillAlpha=1; este.strokeAlpha=1; este.lineWidth=1; este.activeSMask=null; este.transferMaps=null; este.startNewPathAndClipBox([0,0,t,e])}clone(){constante t=Object.create(this);t.clipBox=this.clipBox.slice();return t}setCurrentPoint(t,e){this.x=t;this.y=e}updatePathMinMax(t,e,s){[e,s]=i.Util.applyTransform([e,s],t);this.minX=Math.min(this.minX,e);this.minY=Math.min(this.minY,s);this.maxX=Math.max(this.maxX,e);this.maxY=Math.max(this.maxY,s)}updateRectMinMax(t,e){const s=i.Util.applyTransform(e,t),n=i.Util.applyTransform(e.slice(2),t);this.minX=Math.min(this.minX,s[0],n[0]);this.minY=Math.min(this.minY,s[1],n[1]);this.maxX=Math.max(this.maxX,s[0],n[0]);this.maxY=Math.max(this.maxY,s[1],n[1])}updateS calingPathMinMax(t,e){i.Util.scaleMinMax(t,e);this.minX=Math.min(this.minX,e[0]);this.maxX=Math.max(this.maxX,e[1]);this.minY=Math.min(this.minY,e[2]);this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,s,n,r,a,o,l,c,h){const d=i.Util.bezierBoundingBox(e,s,n,r,a,o,l,c);if(h){h[0]=Math.min(h[0],d[0],d[2]);h[1]=Math.max(h[1],d[0],d[2]);h[2]=Math.min(h[2],d[1],d[3]);h[3]=Math.max(h[3],d[1],d[3])}else this.updateRectMinMax(t,d)}getPathBoundingBox(t=r.PathType.FILL,e=null){const s=[this.minX,this.minY,this.maxX,this.maxY];if(t===r.PathType.STROKE){e||(0,i.unreachable)("El cuadro delimitador del trazo debe incluir la transformación.");const t=i.Util.singularValueDecompose2dScale(e),n=t[0]*this.lineWidth/2,r=t[1]*this.lineWidth/2;s[0]-=n;s[1]-=r;s[2]+=n;s[3]+=r}return s}updateClipFromPath(){const t=i.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return este.minX===1/0}startNewPathAndClipBox(t){este.clipBox=t;este.minX=1/0;este.minY=1/0;este.maxX=0;este.maxY=0}getClippedPathBoundingBox(t=r.PathType.FILL,e=null){devolver i.Util.intersect(este.clipBox,este.getPathBoundingBox(t,e))}}función putBinaryImageData(t,e,s=null){si("indefinido"!=tipo de ImageData&&e instancia de ImageData){t.putImageData(e,0,0);devolver}const n=e.alto,r=e.ancho,a=n%h,o=(na)/h,l=0===a?o:o+1,c=t.createImageData(r,h);let d,u=0;const p=e.datos,g=c.datos;let f,m,b,A,_,y,v,S;if(s)switch(s.longitud){caso 1:_=s[0];y=s[0];v=s[0];S=s[0];break;caso 4:_=s[0];y=s[1];v=s[2];S=s[3]}if(e.tipo===i.ImageKind.GRAYSCALE_1BPP){const e=p.byteLength,s=new Uint32Array(g.buffer,0,g.byteLength>>2),n=s.longitud,A=r+7>>3;let _=4294967295,y=i.FeatureTest.isLittleEndian?4278190080:255;S&&255===S[0]&&0===S[255]&&([_,y]=[y,_]);para(f=0;f<l;f++){b=f<o?h:a;d=0;para(m=0;m<b;m++){const t=eu;let n=0;const i=t>A?r:8*t-7,a=-8&i;let o=0,l=0;para(;n<a;n+=8){l=p[u++];s[d++]=128&l?_:y;s[d++]=64&l?_:y;s[d++]=32&l?_:y;s[d++]=16&l?_:y;s[d++]=8&l?_:y;s[d++]=4&l?_:y;s[d++]=2&l?_:y;s[d++]=1&l?_:y}para(;n<i;n++){si(0===o){l=p[u++];o=128}s[d++]=l&o?_:y;o>>=1}}para(;d<n;)s[d++]=0;t.putImageData(c,0,f*h)}}de lo contrario si(e.tipo===i.ImageKind.RGBA_32BPP){const e=!!(_||y||v);m=0;A=r*h*4;para(f=0;f<o;f++){g.establecer(p.submatriz(u,u+A));u+=A;si(e)para(sea t=0;t<A;t+=4){_&&(g[t+0]=_[g[t+0]]);y&&(g[t+1]=y[g[t+1]]);v&&(g[t+2]=v[g[t+2]])}t.ponerImageData(c,0,m);m+=h}si(f<l){A=r*a*4;g.establecer(p.submatriz(u,u+A));si(e)para(sea t=0;t<A;t+=4){_&&(g[t+0]=_[g[t+0]]);y&&(g[t+1]=y[g[t+1]]);v&&(g[t+2]=v[g[t+2]])}t.putImageData(c,0,m)}}else{if(e.kind!==i.ImageKind.RGB_24BPP)throw new Error(`tipo de imagen incorrecto: ${e.kind}`);{constante e=!!(_||y||v);b=h;A=r*b;para(f=0;f<l;f++){si(f>=o){b=a;A=r*b}d=0;para(m=A;m--;){g[d++]=p[u++];g[d++]=p[u++];g[d++]=p[u++];g[d++]=255}si(e)para(sea t=0;t<d;t+=4){_&&(g[t+0]=_[g[t+0]]);y&&(g[t+1]=y[g[t+1]]);v&&(g[t+2]=v[g[t+2]])}t.putImageData(c,0,f*h)}}}}función putBinaryImageMask(t,e){if(e.bitmap){t.drawImage(e.bitmap,0,0);return}const s=e.height,n=e.width,i=s%h,r=(si)/h,o=0===i?r:r+1,l=t.createImageData(n,h);let c=0;const d=e.data,u=l.data;for(let e=0;e<o;e++){const s=e<r?h:i;({srcPos:c}=(0,a.applyMaskImageData)({src:d,srcPos:c,dest:u,width:n,height:s}));t.putImageData(l,0,e*h)}}función copyCtxState(t,e){const s=["estilo de trazo","estilo de relleno","regla de relleno","alfa global","AnchoDeLínea", "TerminalDeLínea", "UniónDeLínea", "LímiteDeInglete", "OperaciónCompuestaGlobal", "fuente"]; para (let n=0,i=s.length;n<i;n++){const i=s[n];void 0!==t[i]&&(e[i]=t[i])} si (void 0!==t.setLineDash){e.setLineDash(t.getLineDash());e.lineDashOffset=t.lineDashOffset}} función resetCtxToDefault(t,e){t.strokeStyle=t.fillStyle=e||"#000000";t.fillRule="distinto de cero";t.globalAlpha=1;t.lineWidth=1;t.lineCap="tope";t.lineJoin="inglete";t.miterLimit=10;t.globalCompositeOperation="fuente sobre";t.font="10px sans-serif";if(void 0!==t.setLineDash){t.setLineDash([]);t.lineDashOffset=0}}función composeSMaskBackdrop(t,e,s,n){constante i=t.length;for(let r=3;r<i;r+=4){constante i=t[r];si(0===i){t[r-3]=e;t[r-2]=s;t[r-1]=n}de lo contrario si(i<255){const a=255-i;t[r-3]=t[r-3]*i+e*a>>8;t[r-2]=t[r-2]*i+s*a>>8;t[r-1]=t[r-1]*i+n*a>>8}}}función composeSMaskAlpha(t,e,s){const n=t.length;para(let i=3;i<n;i+=4){const n=s?s[t[i]]:t[i];e[i]=e[i]*n*.00392156862745098|0}}función composeSMaskLuminosity(t,e,s){const n=t.length;for(let i=3;i<n;i+=4){const n=77*t[i-3]+152*t[i-2]+28*t[i-1];e[i]=s?e[i]*s[n>>8]>>8:e[i]*n>>16}}función composeSMask(t,e,s,n){const i=n[0],r=n[1],a=n[2]-i,o=n[3]-r;if(0!==a&&0!==o){!función genericComposeSMask(t,e,s,n,i,r,a,o,l,c,h){const d=!!r,u=d?r[0]:0,p=d?r[1]:0,g=d?r[2]:0;let f;f="Luminosidad"===i?composeSMaskLuminosidad:composeSMaskAlpha;const m=Math.min(n,Math.ceil(1048576/s));for(let i=0;i<n;i+=m){const r=Math.min(m,ni),b=t.getImageData(oc,i+(lh),s,r),A=e.getImageData(o,i+l,s,r);d&&composeSMaskBackdrop(b.data,u,p,g);f(b.data,A.data,a);e.putImageData(A,o,i+l)}}(e.context,s,a,o,e.subtype,e.backdrop,e.transferMap,i,r,e.offsetX,e.offsetY);t.save();t.globalAlpha=1;t.globalCompositeOperation="source-over";t.setTransform(1,0,0,1,0,0);t.drawImage(s.canvas,0,0);t.restore()}}función getImageSmoothingEnabled(t,e){constante s=i.Util.singularValueDecompose2dScale(t);s[0]=Math.fround(s[0]);s[1]=Math.fround(s[1]);const r=Math.fround((globalThis.devicePixelRatio||1)*n.PixelsPerInch.PDF_TO_CSS_UNITS);devuelve void 0!==e?e:s[0]<=r||s[1]<=r}const d=["a tope","redondo","cuadrado"],u=["inglete","redondo","bisel"],p={},g={};clase CanvasGraphics{constructor(t,e,s,n,i,r,a,o){this.ctx=t;this.current=new CanvasExtraState(este.ctx.canvas.width,este.ctx.canvas.height);este.stateStack=[];este.pendingClip=null;este.pendingEOFill=!1;este.res=null;este.xobjs=null;este.commonObjs=e;este.objs=s;este.canvasFactory=n;este.imageLayer=i;este.groupStack=[];este.processingTy pe3=nulo;este.baseTransform=nulo;este.baseTransformStack=[];este.groupLevel=0;este.smaskStack=[];este.smaskCounter=0;este.tempSmask=nulo;este.suspendedCtx=nulo;este.contentVisible=!0;este.markedContentStack=[];este.optionalContentConfig=r;este.cachedCanvases=new CachedCanvases(this.canvasFactory); this.cachedPatterns=nuevo mapa; this.annotationCanvasMap=a; this.viewportScale=1; this.outputScaleX=1; this.outputScaleY=1; this.backgroundColor=o?.background||null; this.foregroundColor=o?.foreground||null; this._cachedScaleForStroking=null; this._cachedGetSinglePixelWidth=null; this._cachedBitmapsMap=nuevo mapa}getObject(t,e=null){devuelve "cadena"==tipo de t?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transformar:t,viewport:e,transparencia:s=!1,fondo:i=null}){constante r=este.ctx.canvas.ancho,a=este.ctx.canvas.alto,o=i||"#ffffff";este.ctx.guardar();si(este.colordeprimerplano&&este.colordefondo){este.ctx.estiloderelleno=este.colordeprimerplano;const t=este.colordeprimerplano=este.ctx.estiloderelleno;este.ctx.estiloderelleno=este.colordefondo;const e=este.colordefondo=este.ctx.estiloderelleno;let s=!0,i=o;este.ctx.estiloderelleno=o;i=este.ctx.estiloderelleno;s="cadena"==tipode i&&/^#[0-9A-Fa-f]{6}$/.test(i);if("#000000"===t&&"#ffffff"===e||t===e||!s)this.foregroundColor=this.backgroundColor=null;else{const[s,r,a]=(0,n.getRGB)(i),newComp=t=>(t/=255)<=.03928?t/12.92:((t+.055)/1.055)**2.4,o=Math.round(.2126*newComp(s)+.7152*newComp(r)+.0722*newComp(a));this.selectColor=(s,n,i)=>{const r=.2126*nuevaComp(s)+.7152*nuevaComp(n)+.0722*nuevaComp(i);devuelve Math.round(r)===o?e:t}}}this.ctx.fillStyle=this.backgroundColor||o;this.ctx.fillRect(0,0,r,a);this.ctx.restore();if(s){constante t=this.cachedCanvases.getCanvas("transparent",r,a);this.compositeCtx=this.ctx;this.transparentCanvas=t.canvas;this.ctx=t.context;this.ctx.save();this.ctx.transform(...(0,n.getCurrentTransform)(this.compositeCtx))}this.ctx.save();resetCtxToDefault(this.ctx,this.foregroundColor);if(t){this.ctx.transform(...t);this.outputScaleX=t[0];this.outputScaleY=t[0]}this.ctx.transform(...e.transform);this.viewportScale=e.scale;this.baseTransform=(0,n.getCurrentTransform)(this.ctx);if(this.imageLayer){(0,n.deprecated)("La funcionalidad `imageLayer` se eliminará en el futuro.");this.imageLayer.beginLayout()}}executeOperatorList(t,e,s,n){const r=t.argsArray,a=t.fnArray;let o=e||0;const l=r.length;if(l===o)return o;const c=lo>10&&"function"==typeof s,h=c?Date.now()+15:0;let d=0;const u=this.commonObjs,p=this.objs;let g;for(;;){if(void 0!==n&&o===n.nextBreakPoint){n.breakIt(o,s);return o}g=a[o];if(g!==i.OPS.dependency)this[g].apply(this,r[o]);else for(const t of r[o]){const e=t.startsWith("g_")?u:p;si(!e.has(t)){e.get(t,s);devuelve o}}o++;si(o===l)devuelve o;si(c&&++d>10){si(Fecha.now()>h){s();devuelve o}d=0}}}#J(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore();if(this.transparentCanvas){this.ctx=this.compositeCtx;this.ctx.save();this.ctx.setTransform(1,0,0,1,0,0);this.ctx.drawImage(this.transparentCanvas,0,0);this.ctx.restore();this.transparentCanvas=null}}endDrawing(){this.#J();this.cachedCanvases.clear();this.cachedPatterns.clear();para(const t de este._cachedBitmapsMap.values()){para(const e de t.values())"indefinido"!=tipo de HTMLCanvasElement&&e instancia de HTMLCanvasElement&&(e.width=e.height=0);t.clear()}este._cachedBitmapsMap.clear();este.imageLayer&&este.imageLayer.endLayout()}_scaleImage(t,e){const s=t.width,n=t.height;let i,r,a=Math.max(Math.hypot(e[0],e[1]),1),o=Math.max(Math.hypot(e[2],e[3]),1),l=s,c=n,h="prescale1";for(;a>2&&l>1||o>2&&c>1;){let e = l, s = c; drawImage(t,0,0,l,c,0,0,e,s);t=i.canvas;l=e;c=s;h="prescale1"===h?"prescale2":"prescale1"}return{img:t,paintWidth:l,paintHeight:c}}_createMaskCanvas(t){const e=this.ctx,{ancho:s,alto:a}=t,o=this.current.fillColor,l=this.current.patternFill,c=(0,n.getCurrentTransform)(e);let h,d,u,p;if((t.bitmap||t.data)&&t.count>1){const e=t.bitmap||t.data.buffer,s=c.slice(0,4);d=JSON.stringify(l?s:[s,o]);h=this._cachedBitmapsMap.get(e);if(!h){h=new Map;this._cachedBitmapsMap.set(e,h)}const n=h.get(d);if(n&&!l){return{canvas:n,offsetX:Math.round(Math.min(c[0],c[2])+c[4]),offsetY:Math.round(Math.min(c[1],c[3])+c[5])}}u=n}if(!u){p=this.cachedCanvases.getCanvas("maskCanvas",s,a);putBinaryImageMask(p.context,t)}let g=i.Util.transform(c,[1/s,0,0,-1/a,0,0]);g=i.Util.transform(g,[1,0,0,1,0,-a]);const f=i.Util.applyTransform([0,0],g),m=i.Util.applyTransform([s,a],g),b=i.Util.normalizeRect([f[0],f[1],m[0],m[1]]),A=Math.round(b[2]-b[0])||1,_=Math.round(b[3]-b[1])||1,y=this.cachedCanvases.getCanvas("fillCanvas",A,_),v=y.context,S=Math.min(f[0],m[0]),x=Math.min(f[1],m[1]);v.translate(-S,-x);v.transfor m(...g); si(!u){u=this._scaleImage(p.canvas,(0,n.getCurrentTransformInverse)(v));u=u.img;h&&l&&h.set(d,u)}v.imageSmoothingEnabled=getImageSmoothingEnabled((0,n.getCurrentTransform)(v),t.interpolate);drawImageAtIntegerCoords(v,u,0,0,u.width,u.height,0,0,s,a);v.globalCompositeOperation="source-in";const E=i.Util.transform((0,n.getCurrentTransformInverse)(v),[1,0,0,1,-S,-x]);v.fillStyle=l?o.getPattern(e,this,E,r.PathType.FILL):o;v.fillRect(0,0,s,a);if(h&&!l){this.cachedCanvases.delete("fillCanvas");h.set(d,y.canvas)}return{canvas:y.canvas,offsetX:Math.round(S),offsetY:M ath.round(x)}}setLineWidth(t){t!==este.current.lineWidth&&(este._cachedScaleForStroking=null);este.current.lineWidth=t;este.ctx.lineWidth=t}setLineCap(t){este.ctx.lineCap=d[t]}setLineJoin(t){este.ctx.lineJoin=u[t]}setMiterLimit(t){este.ctx.miterLimit=t}setDash(t,e){constante s=this.ctx;if(void 0!==s.setLineDash){s.setLineDash(t);s.lineDashOffset=e}}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(let e=0,s=t.length;e<s;e++){const s=t[e],n=s[0],i=s[1];switch(n){case"LW":this.setLineWidth(i);break;case "LC":this. setLineCap(i);break;case "LJ":this. setLineJoin(i);break;case "ML":this. setMiterLimit(i);break;case "D":this. setDash(i[0],i[1]);break;case "RI":this. setRenderingIntent(i);break;case "FL":this. setFlatness(i);break;case "Font":this. setFont(i[0],i[1]);break;case "CA":this.c actual.strokeAlpha=s[1];break;case"ca":this.current.fillAlpha=s[1];this.ctx.globalAlpha=s[1];break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null;this.tempSMask=null;this.checkSMaskState();break;case"TR":this.current.transferMaps=i}}}obtener inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("se llamó a beginSMaskMode mientras ya estaba en modo smask");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(s,t,e);this.suspendedCtx=this.ctx;this.ctx=i.context;const r=this.ctx;r.setTransform(...(0,n.getCurrentTransform)(this.suspendedCtx));copyCtxState(this.suspendedCtx,r);!function mirrorContextOperations(t,e){if(t._removeMirroring)throw new Error("El contexto ya se está reenviando operaciones.");t.__originalSave=t.save;t.__originalRestore=t.restore;t.__originalRotate=t.rotate;t.__originalScale=t.scale;t.__originalTranslate=t.translate;t.__originalTransform=t.transform;t.__originalSetTransform=t.setTransform;t.__originalResetTransform=t.resetTransform;t.__originalClip=t.clip;t.__originalMoveTo=t.moveTo;t.__originalLineTo=t.lineTo;t.__originalBezierCurveTo=t.bezierCurveTo;t.__originalRect=t.rect;t.__originalClosePath=t.closePath;t.__originalBeginPath=t.beginPath;t._remov eMirroring=()=>{t.save=t.__originalSave;t.restore=t.__originalRestore;t.rotate=t.__originalRotate;t.scale=t.__originalScale;t.translate=t.__originalTranslate;t.transform=t.__originalTransform;t.setTransform=t.__originalSetTransform;t.resetTransform=t.__originalResetTransform;t.clip=t.__originalClip;t.moveTo=t.__originalMoveTo;t.lineTo=t.__originalLineTo;t.bezierCurveTo=t.__originalBezierCurveTo;t.rect=t.__originalRect;t.closePath=t.__originalClosePath;t.beginPath=t.__originalBeginPath;eliminar t._removeMirroring};t.save=función ctxSave(){e.save();this.__originalSave()};t.restore=función ctxRestore(){e.restore();this.__originalRestore()};t.translate=función ctxTranslate(t,s){e.translate(t,s);this.__originalTranslate(t,s)};t.scale=función ctxScale(t,s){e.scale(t,s);this.__originalScale(t,s)};t.transform=función ctxTransform(t,s,n,i,r,a){e.transform(t,s,n,i,r,a);this.__originalTransform(t,s,n,i,r,a)};t.setTransform=función ctxSetTransform(t,s,n,i,r,a){e.setTransform(t,s,n,i,r,a);this.__originalSetTransform(t,s,n,i,r,a)};t.resetTransform=función ctxResetTransform(){e.resetTransform();this.__originalResetTransform()};t.rotate=función ctxRotate(t){e.rotate(t);this.__originalRotate(t)};t.clip=función ctxRotate(t){e.clip(t);this.__originalClip(t)};t.moveTo=función(t,s){e.moveTo(t,s);this.__originalMoveTo(t,s)};t.lineTo=función(t,s){e.lineTo(t,s);this.__originalLineTo(t,s)};t.bezierCurveTo=función(t,s,n,i,r,a){e.bezierCurveTo(t,s,n,i,r,a);this.__originalBezierCurveTo(t,s,n,i,r,a)};t.rect=función(t ,s,n,i){e.rect(t,s,n,i);this.__originalRect(t,s,n,i)};t.closePath=function(){e.closePath();this.__originalClosePath()};t.beginPath=function(){e.beginPath();this.__originalBeginPath()}}(r,this.suspendedCtx);this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw nuevo Error("endSMaskMode llamado sin estar en modo smask");this.ctx._removeMirroring();copyCtxState(this.ctx,this.suspendedCtx);this.ctx=this.suspendedCtx;this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;if(t){t[0]=Math.floor(t[0]);t[1]=Math.floor(t[1]);t[2]=Math.ceil(t[2]);t[3]=Math.ceil(t[3])}else t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=este.current.activeSMask;composeSMask(este.suspendedCtx,e,este.ctx,t);este.ctx.save();este.ctx.setTransform(1,0,0,1,0,0);este.ctx.clearRect(0,0,este.ctx.canvas.width,este.ctx.canvas.height);este.ctx.restore()}save(){if(este.inSMaskMode){copyCtxState(este.ctx,este.suspendedCtx);este.suspendedCtx.save()}else este.ctx.save();const t=este.actual;este.stateStack.push(t);este.actual=t.clone()}restaurar(){0===este.stateStack.longitud&&este.inSMaskMode&&este.endSMaskMode();si(0!==este.stateStack.longitud){este.actual=este.stateStack.pop();si(este.inSMaskMode){este.suspendedCtx.restaurar();copiarCtxState(este.suspendedCtx,este.ctx)}de lo contrario este.ctx.restore();este.checkSMaskState();este.pendingClip=null;este._cachedScaleForStroking=null;este._cachedGetSinglePixelWidth=null}}transform(t,e,s,n,i,r){este.ctx.transform(t,e,s,n,i,r);este._cachedScaleForStroking=null;este._cachedGetSinglePixelWidth=null}constructPath(t,e,s){const r=este.ctx,a=este.current;let o,l,c=ax,h=ay;const d=(0,n.getCurrentTransform)(r),u=0===d[0]&&0===d[3]||0===d[1]&&0===d[2],p=u?s.slice(0):null;for(let s=0,n=0,g=t.length;s<g;s++)switch(0|t[s]){case i.OPS.rectangle:c=e[n++];h=e[n++];const t=e[n++],s=e[n++],g=c+t,f=h+s;r.moveTo(c,h);if(0===t||0===s)r.lineTo(g,f);else{r.lineTo(g,h);r.lineTo(g,f);r.lineTo(c,f)}u||a.updateRectMinMax(d,[c,h,g,f]);r.closePath();break;case i.OPS.moveTo:c=e[n++];h=e[n++];r.moveTo(c,h);u||a.updatePathMinMax(d,c,h);break;case i.OPS.lineTo:c=e[n++];h=e[n++];r.lineTo(c,h);u||a.updatePathMinMax(d,c,h);break;case i.OPS.curveTo:o=c;l=h;c=e[n+4];h=e[n+5];r.bezierCurveTo(e[n],e[n+1],e[n+2],e[n+3],c,h);a.updateCurvePathMinMax(d,o,l,e[n],e[n+1],e[n+2],e[n+3],c,h,p);n+=6;break;case i.OPS.curveTo2:o=c;l=h;r.bezierCurveTo(c,h,e[n],e[n+1],e[n+2],i.OPS.curveTo3:o=c;l=h;c=e[n+2];h=e[n+3];r.bezierCurveTo(e[n],e[n+1],c,h,c,h);a.updateCurvePathMinMax(d,o,l,e[n],e[n+1],c,h,c,h,p);n+=4;break;case i.OPS.closePath:r.closePath()}u&&a.updateScalingPathMinMax(d,p);a.setCurrentPoint(c,h)}closePath(){this.ctx.closePath()}stroke(t){t=void 0===t||t;const e=this.ctx,s=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha;if(this.contentVisible)if("object"==typeof s&&s?.getPattern){e.save();e.strokeStyle=s.getPattern(e,this,(0,n.getCurrentTransformInverse)(e),r.PathType.STROKE);this.rescaleAndStroke(!1);e.restore()}else este.rescaleAndStroke(!0);t&&este.consumePath(este.current.getClippedPathBoundingBox());e.globalAlpha=este.current.fillAlpha}closeStroke(){este.closePath();este.stroke()}fill(t){t=void 0===t||t;const e=este.ctx,s=este.current.fillColor;let i=!1;if(este.current.patternFill){e.save();e.fillStyle=s.getPattern(e,este,(0,n.getCurrentTransformInverse)(e),r.PathType.FILL);i=!0}const a=this.current.getClippedPathBoundingBox();if(this.contentVisible&&null!==a)if(this.pendingEOFill){e.fill("evenodd");this.pendingEOFill=!1}else e.fill();i&&e.restore();t&&this.consumePath(a)}eoFill(){this.pendingEOFill=!0;this.fill()}fillStroke(){this.fill(!1);this.stroke(!1);this.consumePath()}eoFillStroke(){this.pendingEOFill=!0;this.fillStroke()}closeFillStroke(){this.closePath();this.fillStroke()}closeEOFillStroke(){this.pendingEOFi ll=!0;este.closePath();este.fillStroke()}endPath(){este.consumePath()}clip(){este.pendingClip=p}eoClip(){este.pendingClip=g}beginText(){este.current.textMatrix=i.IDENTITY_MATRIX;este.current.textMatrixScale=1;este.current.x=este.current.lineX=0;este.current.y=este.current.lineY=0}endText(){constante t=this.pendingTextPaths,e=this.ctx;if(void 0!==t){e.save();e.beginPath();for(const s of t){e.setTransform(...s.transform);e.translate(sx,sy);s.addToPath(e,s.fontSize)}e.restore();e.clip();e.beginPath();delete this.pendingTextPaths}else e.beginPath()}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){const s=this.commonObjs.get(t),n=this.current;if(!s)throw new Error(`No se encuentra la fuente para ${t}`);n.fontMatrix=s.fontMatrix||i.FONT_IDENTITY_MATRIX;0!==n.fontMatrix[0]&&0!==n.fontMatrix[3]||(0,i.warn)("Matriz de fuente no válida para la fuente "+t);if(e<0){e=-e;n.fontDirection=-1}else n.fontDirection=1;this.current.font=s;this.current.fontSize=e;if(s.isType3Font)return;const r=s.loadedName||"sans-serif";let a="normal";s.black?a="900":s.bold&&(a="bold");const o=s.itálica?"itálica":"normal",l=`"${r}", ${s.fallbackName}`;let c=e;e<16?c=16:e>100&&(c=100);this.current.fontSizeScale=e/c;this.ctx.fuente=`${o} ${a} ${c}px ${l}`}setTextRenderingMode(t){este.current.textRenderingMode=t}setTextRise(t){este.current.textRise=t}moveText(t,e){este.current.x=este.current.lineX+=t;este.current.y=este.current.lineY+=e}setLeadingMoveText(t,e){este.setLeading(-e);este.moveText(t,e)}s etTextMatrix(t,e,s,n,i,r){este.current.textMatrix=[t,e,s,n,i,r];este.current.textMatrixScale=Math.hypot(t,e);este.current.x=este.current.lineX=0;este.current.y=este.current.lineY=0}nextLine(){este.moveText(0,este.current.leading)}paintChar(t,e,s,r){const a=este.ctx,o=este.current,l=o.font,c=o.textRenderingMode,h=o.fontSize/o.fontSizeScale,d=c&i.TextRenderingMode.FILL_STROKE_MASK,u=!!(c&i.TextRenderingMode.ADD_TO_PATH_FLAG),p=o.patternFill&&!l.missingFile;let g;(l.disableFontFace||u||p)&&(g=l.getPathGenerator(this.commonObjs,t));if(l.disableFontFace||p){a.save();a.translate(e,s);a.beginPath();g(a,h);r&&a.setTransform(...r);d!==i.TextRenderingMode.FILL&&d!==i.TextRenderingMode.FILL_STROKE||a.fill();d!==i.TextRenderingMode.STROKE&&d!==i.TextRenderingMode.FILL_STROKE||a.stroke();a.re tienda()}de lo contrario{d!==i.TextRenderingMode.FILL&&d!==i.TextRenderingMode.FILL_STROKE||a.fillText(t,e,s);d!==i.TextRenderingMode.STROKE&&d!==i.TextRenderingMode.FILL_STROKE||a.strokeText(t,e,s)}si(u){(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transformar:(0,n.getCurrentTransform)(a),x:e,y:s,fontSize:h,addToPath:g})}}obtener isFontSubpixelAAEnabled(){const{contexto:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1);t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let s=!1;for(let t=3;t<e.length;t+=4)if(e[t]>0&&e[t]<255){s=!0;break}return(0,i.shadow)(this,"isFontSubpixelAAEnabled",s)}showText(t){const e=this.current,s=e.font;if(s.isType3Font)return this.showType3Text(t);const a=e.fontSize;if(0===a)return;const o=this.ctx,l=e.fontSizeScale,c=e.charSpacing,h=e.wordSpacing,d=e.fontDirection,u=e.textHScale*d,p=t.length,g=s.vertical,f=g?1:-1,m=s.defaultVMetrics,b=a*e.fontMatrix[0],A=e.textRenderingMode===i.TextRenderingMode.FILL&&!s.disableFontFace&&!e.patternFill;o.save();o.transform(...e.textMatrix);o.translate(ex,e.y+e.textRise);d>0?o.scale(u,-1):o.scale(u,1);let _;if(e.patternFill){o.save();const t=e.fillColor.getPattern(o,this,(0,n.getCurrentTransformInverse)(o),r.PathType.FILL);_=(0,n.getCurrentTransform)(o);o.restore();o.fillStyle=t}let y=e.lineWidth;const v=e.textMatrixScale;if(0===v||0===y){const t=e.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;t!==i.TextRenderingMode.STROKE&&t!==i.TextRenderingMode.FILL_STROKE||(y=this.getSinglePixelWidth())}else y/=v;if(1!==l){o.scale(l,l);y/=l}o.lineWidth=y;let S,x=0;para(S=0;S<p;++S){const e=t[S];si("número"==tipo de e){x+=f*e*a/1e3;continúa}let n=!1;const i=(e.isSpace?h:0)+c,r=e.fontChar,u=e.accent;let p,y,v,E=e.width;si(g){const t=e.vmetric||m,s=-(e.vmetric?t[1]:.5*E)*b,n=t[2]*b;E=t?-t[0]:E;p=s/l;y=(x+n)/l}de lo contrario{p=x/l;y=0}si(s.remeasure&&E>0){const t=1e3*o.measureText(r).width/a*l;si(E<t&&this.isFontSubpixelAAEnabled){const e=E/t;n=!0;o.save();o.scale(e,1);p/=e}de lo contrario E!==t&&(p+=(Et)/2e3*a/l)}if(this.contentVisible&&(e.isInFont||s.missingFile))if(A&&!u)o.fillText(r,p,y);else{this.paintChar(r,p,y,_);if(u){const t=p+a*u.offset.x/l,e=ya*u.offset.y/l;this.paintChar(u.fontChar,t,e,_)}}v=g?E*bi*d:E*b+i*d;x+=v;n&&o.restore()}g?ey-=x:e.x+=x*u;o.restore();this.compose()}showType3Text(t){const e=este.ctx,s=este.actual,n=s.fuente,r=s.tamañofuente,a=s.direcciónfuente,o=n.vertical?1:-1,l=s.espaciadocaracteres,c=s.espaciadopalabras,h=s.escalaHSeltexto*a,d=s.matrizfuente||i.MATRIZ_IDENTIDAD_FUENTE,u=t.longitud;let p,g,f,m;si(!(s.textRenderingMode===i.TextRenderingMode.INVISIBLE)&&0!==r){this._cachedScaleForStroking=null;this._cachedGetSinglePixelWidth=null;e.save();e.transform(...s.textMatrix);e.translate(sx,sy);e.scale(h,a);para(p=0;p<u;++p){g=t[p];si("número"==tipo de g){m=o*g*r/1e3;this.ctx.translate(m,0);s.x+=m*h;continúa}const a=(g.isSpace?c:0)+l,u=n.charProcOperatorList[g.operatorListId];si(!u){(0,i.warn)(`Carácter de tipo 3 "${g.operatorListId}" no está disponible.`); continuar} si (este.contentVisible) {este.processingType3=g; este.save();e.scale(r,r);e.transform(...d); este.executeOperatorList(u); este.restore()} f = i.Util.applyTransform([g.width,0],d)[0]*r+a;e.translate(f,0);s.x+=f*h}e.restore(); este.processingType3=null}} establecerCharWidth(t,e) {} establecerCharWidthAndBounds(t,e,s,n,i,r) {este.ctx.rect(s,n,is,rn); este.ctx.clip(); este.endPath()} obtenerColorN_Pattern(t) {dejar e; si ("TilingPattern"===t[0]) {constante s=t[1],i=this.baseTransform||(0,n.getCurrentTransform)(this.ctx),a={createCanvasGraphics:t=>new CanvasGraphics(t,this.commonObjs,this.objs,this.canvasFactory)};e=new r.TilingPattern(t,s,this.ctx,a,i)}de lo contrario e=this._getPattern(t[1],t[2]);devolver e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(argumentos)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(argumentos);this.current.patternFill=!0}setStrokeRGBColor(t,e,s){constante n=this.selectColor?.(t,e,s)||i.Util.makeHexColor(t,e,s);this.ctx.strokeStyle=n;this.current.strokeColor=n}setFillRGBColor(t,e,s){const n=this.selectColor?.(t,e,s)||i.Util.makeHexColor(t,e,s);this.ctx.fillStyle=n;this.current.fillColor=n;this.current.patternFill=!1}_getPattern(t,e=null){let s;if(this.cachedPatterns.has(t))s=this.cachedPatterns.get(t);else{s=(0,r.getShadingPattern)(this.objs.get(t));this.cachedPatterns.set(t,s)}e&&(s.matrix=e);return s}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const s=this._getPattern(t);e.fillStyle=s.getPattern(e,this,(0,n.getCurrentTransformInverse)(e),r.PathType.SHADING);const a=(0,n.getCurrentTransformInverse)(e);if(a){const t=e.canvas,s=t.width,n=t.height,r=i.Util.applyTransform([0,0],a),o=i.Util.applyTransform([0,n],a),l=i.Util.applyTransform([s,0],a),c=i.Util.applyTransform([s,n],a),h=Math.min(r[0],o[0],l[0],c[0]),d=Math.min(r[1],o[1],l[1],c[1]),u=Math.max(r[0],o[0],l[0],c[0]),p=Math.max(r[1],o[1],l[1],c[1]);this.ctx.fillRect(h,d,uh,pd)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox());this.restore()}beginInlineImage(){(0,i.unreachable)("No se debe llamar beginInlineImage")}beginImageData(){(0,i.unreachable)("No se debe llamar a beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible){this.save();this.baseTransformStack.push(this.baseTransform);Array.isArray(t)&&6===t.length&&this.transform(...t);this.baseTransform=(0,n.getCurrentTransform)(this.ctx);if(e){const t=e[2]-e[0],s=e[3]-e[1];this.ctx.rect(e[0],e[1],t,s);this.current.updateRectMinMax((0,n.getCurrentTransform)(this.ctx),e);this.clip();this.endPath()}}}paintFormXObjectEnd(){if(this.contentVisible){this.restore();this.baseTransform=this.baseTransformStack.pop()}}beginGroup(t){if(!this.contentVisible)return;this.save();if(this.inSMaskMode){this.endSMaskMode();this.current.activeSMask=null}const e=this.ctx;t.isolated||(0,i.info)("TODO: Soporte no aislado grupos.");t.knockout&&(0,i.warn)("Grupos de knockout no compatibles.");const s=(0,n.getCurrentTransform)(e);t.matrix&&e.transform(...t.matrix);if(!t.bbox)throw new Error("Se requiere cuadro delimitador.");let r=i.Util.getAxialAlignedBoundingBox(t.bbox,(0,n.getCurrentTransform)(e));const a=[0,0,e.canvas.width,e.canvas.height];r=i.Util.intersect(r,a)||[0,0,0,0];const o=Math.floor(r[0]),c=Math.floor(r[1]);let h=Math.max(Math.ceil(r[2])-o,1),d=Math.max(Math.ceil(r[3])-c,1),u=1,p=1;si(h>l){u=h/l;h=l}si(d>l){p=d/l;d=l}este.current.startNewPathAndClipBox([0,0,h,d]);sea g="groupAt"+este.groupLevel;t.smask&&(g+="_smask_"+este.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(g,h,d),m=f.context;m.scale(1/u,1/p);m.translate(-o,-c);m.transform(...s);if(t.smask)this.smaskStack.push({canvas:f.canvas,contexto:m,offsetX:o,offsetY:c,scaleX:u,scaleY:p,subtipo:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,st artTransformInverse:null});else{e.setTransform(1,0,0,1,0,0);e.translate(o,c);e.scale(u,p);e.save()}copyCtxState(e,m);this.ctx=m;this.setGState([["BM","source-over"],["ca",1],["CA",1]]);this.groupStack.push(e);this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,s=this.groupStack.pop();this.ctx=s;this.ctx.imageSmoothingEnabled=!1;if(t.smask){this.tempSMask=this.smaskStack.pop();this.restore()}else{this.ctx.restore();const t=(0,n.getCurrentTransform)(this.ctx);this.restore();this.ctx.save();this.ctx.setTransform(...t);const s=i.Util.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],t);this.ctx.drawImage(e.canvas,0,0);this.ctx.restore();this.compose(s)}}beginAnnotation(t,e,s,r,a){this.#J();resetCtxToDefault(este.ctx,este.foregroundColor);este.ctx.save();este.save();este.baseTransform&&este.ctx.setTransform(...este.baseTransform);if(Array.isArray(e)&&4===e.length){constante r=e[2]-e[0],o=e[3]-e[1];si(a&&this.annotationCanvasMap){(s=s.slice())[4]-=e[0];s[5]-=e[1];(e=e.slice())[0]=e[1]=0;e[2]=r;e[3]=o;const[a,l]=i.Util.singularValueDecompose2dScale((0,n.getCurrentTransform)(this.ctx)),{viewportScale:c}=this,h=Math.ceil(r*this.outputScaleX*c),d=Math.ceil(o*this.outputScaleY*c);this.annotationCanvas=this.canvasFactory.create(h ,d);const{canvas:u,context:p}=this.annotationCanvas;this.annotationCanvasMap.set(t,u);this.annotationCanvas.savedCtx=this.ctx;this.ctx=p;this.ctx.setTransform(a,0,0,-l,0,o*l);resetCtxToDefault(this.ctx,this.foregroundColor)}else{resetCtxToDefault(this.ctx,this.foregroundColor);this.ctx.rect(e[0],e[1],r,o);this.ctx.clip();this.endPath()}}this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height);this.transform(...s);this.transform(...r)}endAnnotation(){if(this.annotationCanvas){this.ctx=this.annotationCanvas.savedCtx;delete this.annotationCanvas.savedCtx;delete this.annotationCanvas}}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;(t=this.getObject(t.data,t)).count=e;const s=this.ctx,n=this.processingType3;if(n){void 0===n.compilado&&(n.compilado=función compileType3Glyph(t){const{ancho:e,alto:s}=t;si(e>c||s>c)devuelve null;const n=nuevo Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),i=e+1;let r,a,o,l=nuevo Uint8Array(i*(s+1));const h=e+7&-8;let d=nuevo Uint8Array(h*s),u=0;para(const e de t.data){let t=128;para(;t>0;){d[u++]=e&t?0:255;t>>=1}}let p=0;u=0;si(0!==d[u]){l[0]=1;++p}para(a=1;a<e;a++){si(d[u]!==d[u+1]){l[a]=d[u]?2:1;++p}u++}si(0!==d[u]){l[a]=2;++p}para(r=1;r<s;r++){u=r*h;o=r*i;si(d[uh]!==d[u]){l[o]=d[u]?1:8;++p}sea t=(d[u]?4:0)+(d[uh]?8:0);para(a=1;a<e;a++){t=(t>>2)+(d[u+1]?4:0)+(d[u-h+1]?8:0);si(n[t]){l[o+a]=n[t];++p}u++}si(d[uh]!==d[u]){l[o+a]=d[u]?2:4;++p}si(p>1e3)devolver nulo}u=h*(s-1);o=r*i;si(0!==d[u]){l[o]=8;++p}para(a=1;a<e;a++){si(d[u]!==d[u+1]){l[o+a]=d[u]?4:8;++p}u++}si(0!==d[u]){l[o+a]=4;++p}si(p>1e3)devuelve nulo;const g=new Int32Array([0,i,-1,0,-i,0,0,0,1]),f=new Path2D;para(r=0;p&&r<=s;r++){let t=r*i;const s=t+e;para(;t<s&&!l[t];)t++;si(t===s)continuar;f.moverA(t%i,r);const n=t;dejar a=l[t];hacer{const e=g[a];hacer{t+=e}mientras(!l[t]);const s=l[t];si(5!==s&&10!==s){a=s;l[t]=0}sino{a=s&51*a>>4;l[t]&=a>>2|a<<2}f.lineA(t%i,t/i|0);l[t]||--p}mientras(n!==t);--r}d=null;l=null;regresar function(t){t.save();t.scale(1/e,-1/s);t.translate(0,-s);t.fill(f);t.beginPath();t.restore()}}(t));if(n.compilado){n.compilado(s);return}}const i=this._createMaskCanvas(t),r=i.canvas;s.save();s.setTransform(1,0,0,1,0,0);s.drawImage(r,i.offsetX,i.offsetY);s.restore();this.compose()}paintImageMaskXObjectRepeat(t,e,s=0,r=0,a,o){if(!this.contentVisible)return;t=this.obtenerObjeto(t.datos,t); constante l=this.ctx;l.guardar(); constante c=(0,n.obtenerTransformaciónActual)(l);l.transform(e,s,r,a,0,0); constante h=this._createMaskCanvas(t);l.establecerTransform(1,0,0,1,0,0);para(dejar t=0,n=o.longitud;t<n;t+=2){constante n=i.Util.transform(c,[e,s,r,a,o[t],o[t+1]]),[d,u]=i.Util.aplicarTransform([0,0],n);l.dibujarImage(h.canvas,d,u)}l.restaurar();this.componer()}pintarImageMaskXObjectGroup(t){si(!this.contenidoVisible)devolver; constante e=this.ctx,s=this.current.fillColor,i=this.current.patternFill;for(const a of t){const{datos:t,ancho:o,alto:l,transformar:c}=a,h=this.cachedCanvases.getCanvas("maskCanvas",o,l),d=h.context;d.save();putBinaryImageMask(d,this.getObject(t,a));d.globalCompositeOperation="source-in";d.fillStyle=i?s.getPattern(d,this,(0,n.getCurrentT ransformInverse)(e),r.PathType.FILL):s;d.fillRect(0,0,o,l);d.restore();e.save();e.transform(...c);e.scale(1,-1);drawImageAtIntegerCoords(e,h.canvas,0,0,o,l,0,-1,1,1);e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);e?this.paintInlineImageXObject(e):(0,i.warn)("La imagen dependiente aún no está lista")}paintImageXObjectRepeat(t,e,s,n){if(!this.contentVisible)return;const r=this.getObject(t);if(!r){(0,i.warn)("La imagen dependiente aún no está lista");return}const a=r.width,o=r.height,l=[];for(let t=0,i=n.longitud;t<i;t+=2)l.push({transformar:[e,0,0,s,n[t],n[t+1]],x:0,y:0,w:a,h:o});this.paintInlineImageXObjectGroup(r,l)}paintInlineImageXObject(t){si(!this.contentVisible)devolver;constante e=t.ancho,s=t.alto,r=this.ctx;this.guardar();r.escala(1/e,-1/s);dejar a;si("función"==tipodeHTMLElement&&t instanciadeHTMLElement||!t.datos)a=t;de lo contrario{constante n=this.cachedCanvases.getCanvas("inlineImage",e,s);putBinaryImageData(n.context,t,this.current.transferMaps);a=n.canvas}const o=this._scaleImage(a,(0,n.getCurrentTransformInverse)(r));r.imageSmoothingEnabled=getImageSmoothingEnabled((0,n.getCurrentTransform)(r),t.interpolate);const[l,c]=drawImageAtIntegerCoords(r,o.img,0,0,o.paintWidth,o.paintHeight,0,-s,e,s);if(this.imageLay er){const[e,r]=i.Util.applyTransform([0,-s],(0,n.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:t,left:e,top:r,width:l,height:c})}this.compose();this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const s=this.ctx,r=t.width,a=t.height,o=this.cachedCanvases.getCanvas("inlineImage",r,a);putBinaryImageData(o.context,t,this.current.transferMaps);for(const l of e){s.save();s.transform(...l.transform);s.scale(1,-1);drawImageAtIntegerCoords(s,o.canvas,lx,ly,lw,lh,0,-1,1,1);if(this.imageLayer){const[e,s]=i.Util.applyTransform([lx,ly],(0,n.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:t, izquierda:e, arriba:s, ancho:r, alto:a})}s.restore()}this.compose()}paintSolidColorImageMask(){if(this.contentVisible){this.ctx.fillRect(0,0,1,1);this.compose()}}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){"OC"===t?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0});this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop();this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath();this.pendingClip||this.compose(t);const s=this.ctx;if(this.pendingClip){e||(this.pendingClip===g?s.clip("evenodd"):s.clip());this.pendingClip=null}this.current.startNewPathAndClipBox(this.current.clipBox);s.beginPath()}getSinglePixelWidth(){si(!this._cachedGetSinglePixelWidth){const t=(0,n.getCurrentTransform)(this.ctx);si(0===t[1]&&0===t[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));sino{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),s=Math.hypot(t[0],t[2]),n=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(s,n)/e}}devolver este._cachedGetSinglePixelWidth}getScaleForStroking(){si(!este._cachedScaleForStroking){const{anchoDeLínea:t}=este.current,e=(0,n.getCurrentTransform)(este.ctx);sea s,i;si(0===e[1]&&0===e[2]){const n=Math.abs(e[0]),r=Math.abs(e[3]);si(0===t){s=1/n;i=1/r}sino{const e=n*t,a=r*t;s=e<1?1/e:1;i=a<1?1/a:1}}sino{const n=Math.abs(e[0]*e[3]-e[2]*e[1]),r=Math.hypot(e[0],e[1]),a=Math.hypot(e[2],e[3]);si(0===t){s=a/n;i=r/n}sino{const e=t*n;s=a>e?a/e:1;i=r>e?r/e:1}}this._cachedScaleForStroking=[s,i]}devuelve this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:e}=this,{lineWidth:s}=this.current,[i,r]=this.getScaleForStroking();e.lineWidth=s||1;si(1===i&&1===r){e.stroke();devuelve}let a,o,l;si(t){a=(0,n.getCurrentTransform)(e);o=e.getLineDash().slice();l=e.lineDashOffset}e.scale(i,r);const c=Math.max(i,r);e.setLineDash(e.getLineDash().map((t=>t/c)));e.lineDashOffset/=c;e.stroke();si(t){e.setTransform(...a);e.setLineDash(o);e.lineDashOffset=l}}isContentVisible(){para(let t=this.markedContentStack.length-1;t>=0;t--)si(!this.markedContentStack[t].visible)devuelve!1;devuelve!0}}e.CanvasGraphics=CanvasGraphics;para(const t en i.OPS)void 0!==CanvasGraphics.prototype[t]&&(CanvasGraphics.prototype[i.OPS[t]]=CanvasGraphics.prototype[t])},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});e.TilingPattern=e.PathType=void 0;e.getShadingPattern=function getShadingPattern(t){switch(t[0]){case"RadialAxial":return new RadialAxialShadingPattern(t);case"Mesh":return new MeshShadingPattern(t);case"Dummy":return new DummyShadingPattern}throw new Error(`Tipo IR desconocido: ${t[0]}`)};var n=s(1),i=s(8),r=s(3);const a={RELLENO:"Relleno",TRAZO:"Trazo",SOMBREADO:"Sombreado"};e.PathType=a;función applyBoundingBox(t,e){if(!e||r.isNodeJS)return;const s=e[2]-e[0],n=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],s,n);t.clip(i)}clase BaseShadingPattern{constructor(){this.constructor===BaseShadingPattern&&(0,n.unreachable)("No se puede inicializar BaseShadingPattern.")}getPattern(){(0,n.unreachable)("Se llamó al método abstracto `getPattern`.")}}clase RadialAxialShadingPattern extiende BaseShadingPattern{constructor(t){super();este._tipo=t[1];este._bbox=t[2];este._colorStops=t[3];este._p0=t[4];este._p1=t[5];este._r0=t[6];este._r1=t[7];este.matrix=null}_createGradient(t){let e;"axial"===este._tipo?e=t.createLinearGradient(este._p0[0],este._p0[1],este._p1[0],este._p1[1]):"radial"===este._tipo&&(e=t.createRadialGradient(este._p0[0],este._p0[1],este._r0,este._p1[0],este._p1[1],este._r1)); para (const t de este._colorStops)e.addColorStop(t[0],t[1]); devolver e}getPattern(t,e,s,r){let o; si (r===a.STROKE||r===a.FILL){const a=e.current.getClippedPathBoundingBox(r,(0,i.getCurrentTransform)(t))||[0,0,0,0],l=Math.ceil(a[2]-a[0])||1,c=Math.ceil(a[3]-a[1])||1,h=e.ca chedCanvases.getCanvas("pattern",l,c,!0),d=h.context;d.clearRect(0,0,d.canvas.width,d.canvas.height);d.beginPath();d.rect(0,0,d.canvas.width ,d.canvas.height);d.translate(-a[0],-a[1]);s=n.Util.transform(s,[1,0,0,1,a[0],a[1]]);d.transform(...e.baseTransform);this.matrix&&d.transform(...this.matrix);applyBoundingBox(d,this._bbox);d.fillStyle=this._createGradient(d);d.fill();o=t.createPattern(h.canvas,"no-repeat");const u=nueva DOMMatrix(s);try{o.setTransform(u)}catch(t){(0,n.warn)(`RadialAxialShadingPattern.getPattern: "${t?.message}".`)}}else{applyBoundingBox(t,this._bbox);o=this._createGradient(t)}return o}}función drawTriangle(t,e,s,n,i,r,a,o){const l=e.coords,c=e.colors,h=t.data,d=4*t.width;let u;si(l[s+1]>l[n+1]){u=s;s=n;n=u;u=r;r=a;a=u}si(l[n+1]>l[i+1]){u=n;n=i;i=u;u=a;a=o;o=u}si(l[s+1]>l[n+1]){u=s;s=n;n=u;u=r;r=a;a=u}const p=(l[s]+e.offsetX)*e.scaleX,g=(l[s+1]+e.offsetY)*e.scaleY,f=(l[n]+e.offsetX)*e.scaleX,m=(l[n+1]+e.offsetY)*e.scaleY,b=(l[i]+e.offsetX)*e.scaleX,A=(l[i+1]+e.offsetY)*e.scaleY;si(g>=A)devolver;const _=c[r],y=c[r+1],v=c[r+2],S=c[a],x=c[a+1],E=c[a+2],C=c[o],P=c[o+1],T=c[o+2],w=Math.round(g),k=Math.round(A);sea F, M, R, D, I, O, L, N; para (sea t = w; t <= k; t++) {si (t < m) {sea e; e = t < g? 0: (gt) / (gm); F = p - (pf) * e; M = _ - (_ - S) * e; R = y - (y x) * e; D = v - (v E) * e} de lo contrario {sea e; e = t > A? 1: m = = = A? 0: (mt) / (m A); F = f - (fb) * e; M = S - (SC) * e; R = x - (x P) * e; D = E - (ET) * e} sea e;e=t<g?0:t>A?1:(gt)/(gA);I=p-(pb)*e;O=_-(_-C)*e;L=y-(yP)*e;N=v-(vT)*e;constante s=Math.round(Math.min(F,I)),n=Math.round(Math.max(F,I));sea i=d*t+4*s;para(sea t=s;t<=n;t++){e=(Ft)/(FI);e<0?e=0:e>1&&(e=1);h[i++]=M-(MO)*e|0;h[i++]=R-(RL)*e|0;h[i++]=D-(DN)*e|0;h[i++]=255}}}función dibujarFigura(t,e,s){constante n=e.coords,i=e.colors;let r,a;switch(e.type){case"lattice":const o=e.verticesPerRow,l=Math.floor(n.length/o)-1,c=o-1;for(r=0;r<l;r++){let e=r*o;for(let r=0;r<c;r++,e++){drawTriangle(t,s,n[e],n[e+1],n[e+o],i[e],i[e+1],i[e+o]);drawTriangle(t,s,n[e+o+1],n[e+1],n[e+o],i[e+o+1],i[e+1],i[e+o])}}break;case"triangles":for(r=0,a=n.length;r<a;r+=3)drawTriangle(t,s,n[r],n[r+1],n[r+2],i[r],i[r+1],i[r+2]);break;default:throw new Error("figura ilegal")}}clase MeshShadingPattern extiende BaseShadingPattern{constructor(t){super();esta._coords=t[2];esta._colors=t[3];esta._figures=t[4];esta._bounds=t[5];esta._bbox=t[7];esta._background=t[8];esta.matrix=null}_createMeshCanvas(t,e,s){constante n=Math.floor(this._bounds[0]),i=Math.floor(this._bounds[1]),r=Math.ceil(this._bounds[2])-n,a=Math.ceil(this._bounds[3])-i,o=Math.min(Math.ceil(Math.abs(r*t[0]*1.1)),3e3),l=Math.min(Math.ceil(Math.abs(a*t[1]*1.1)),3e3),c=r/o,h=a/l,d={coords:this._coords,colores:this._colors,offsetX:-n,offsetY:-i,scaleX:1/c,scaleY:1/h},u=o+4,p=l+4,g=s.getCanvas("mesh",u,p,!1),f=g.context,m=f.createImageData(o,l);if(e){const t=m.data;for(let s=0,n=t.length;s<n;s+=4){t[s]=e[0];t[s+1]=e[1];t[s+2]=e[2];t[s+3]=255}}for(const t of this._figures)drawFigure(m,t,d);f.putImageData(m,2,2);return{canvas:g.canvas,offsetX:n-2*c,offsetY:i-2*h,scaleX:c,scaleY:h}}getPattern(t,e,s,r){applyBoundingBox(t,this._bbox);let o;if(r===a.SHADING)o=n.Util.singularValueDecompose2dScale((0,i.getCurrentTransform)(t));else{o=n.Util.singularValueDecompose2dScale(e.baseTransform);if(this.matrix){const t=n.Util.singularValueDecompose2dScale(this.matrix);o=[o[0]*t[0],o[1]*t[1]]}}const l=this._createMeshCanvas(o,r===a.SHADING?null:this._background,e.cachedCanvases);if(r!==a.SHADING){t.setTransform(...e.baseTransform);this.matrix&&t.transform(...this.matrix)}t.translate(l.offsetX,l.offsetY);t.scale(l.scaleX,l.scaleY);return t.createPattern(l.canvas,"no-repeat")}}clase DummyShadingPattern extiende BaseShadingPattern{getPattern(){return"hotpink"}}const o=1,l=2;clase TilingPattern{obtener estático TAMAÑO MÁXIMO_PATRÓN(){return(0,n.shadow)(this,"TAMAÑO MÁXIMO_PATRÓN",3e3)}constructor(t,e,s,n,i){this.operatorList=t[2];this.matrix=t[3]||[1,0,0,1,0,0];this.bbox=t[4];this.xstep=t[5];this.ystep=t[6];this.paintType=t[7];this.tilingType=t[8];this.color=e;this.ctx=s;this.canvasGraphicsFactory=n;this.baseTransform=i}createPatternCanvas(t){constante e=este.operatorList,s=este.bbox,r=este.xstep,a=este.ystep,o=este.paintType,l=este.tilingType,c=este.color,h=este.canvasGraphicsFactory;(0,n.info)("Tipo de mosaico: "+l);const d=s[0],u=s[1],p=s[2],g=s[3],f=n.Util.singularValueDecompose2dScale(this.matrix),m=n.Util.singularValueDecompose2dScale(this.baseTransform),b=[f[0]*m[0],f[1]*m[1]],A=this.getSizeAndScale(r,this.ctx.canvas.width,b[0]),_=this.getSizeAndScale(a,this.ctx.canvas.height,b[1]),y=t.cachedCanvases.getCanvas("patrón",A.tamaño,_.tamaño,!0),v=y.contexto,S=h.createCanvasGraphics(v);S.groupLevel=t.groupLevel;this.setFillAndStrokeStyleToContext(S,o,c);let x=d,E=u,C=p,P=g;si(d<0){x=0;C+=Math.abs(d)}si(u<0){E=0;P+=Math.abs(u)}v.translate(-A.scale*x,-_.scale*E);S.transform(A.scale,0,0,_.scale,0,0);v.save();this.clipBbox(S,x,E,C,P);S.baseTransform=(0,i.getCurrentTransform)(S.ctx);S.executeOperatorList(e);S.endDrawing();return{canvas:y.canvas,scaleX:A.scale,scaleY:_.scale,offsetX:x,offsetY:E}}getSizeAndScale(t,e,s){t=Math.abs(t);const n=Math.max(TilingPattern.MAX_PATTERN_SIZE,e);let i=Math.ceil(t*s);i>=n?i=n:s=i/t;return{escala:s,tamaño:i}}clipBbox(t,e,s,n,r){const a=ne,o=rs;t.ctx.rect(e,s,a,o);t.current.updateRectMinMax((0,i.getCurrentTransform)(t.ctx),[e,s,n,r]);t.clip();t.endPath()}setFillAndStrokeStyleToContext(t,e,s){const i=t.ctx,r=t.current;switch(e){case o:const t=this.ctx;i.fillStyle=t.fillStyle;i.strokeStyle=t.strokeStyle;r.fillColor=t.fillStyle;r.strokeColor=t.strokeStyle;break;case l:const a=n.Util.makeHexColor(s[0],s[1],s[2]);i.fillStyle=a;i.strokeStyle=a;r.fillColor=a;r.strokeColor=a;break;default:throw new n.FormatError(`Tipo de pintura no compatible: ${e}`)}}getPattern(t,e,s,i){let r=s;if(i!==a.SHADING){r=n.Util.transform(r,e.baseTransform);this.matrix&&(r=n.Util.transform(r,this.matrix))}const o=this.createPatternCanvas(e);let l=new DOMMatrix(r);l=l.translate(o.offsetX,o.offsetY);l=l.scale(1/o.scaleX,1/o.scaleY);const c=t.createPattern(o.canvas,"repeat");try{c.setTransform(l)}catch(t){(0,n.warn)(`TilingPattern.getPattern: "${t?.message}".`)}devolver c}}e.TilingPattern=TilingPattern},(t,e,s)=>{Object.defineProperty(e,"__esModule",{valor:!0});e.applyMaskImageData=función applyMaskImageData({src:t,srcPos:e=0,dest:s,destPos:i=0,ancho:r,alto:a,inverseDecode:o=!1}){constante l=n.FeatureTest.isLittleEndian?4278190080:255,[c,h]=o?[0,l]:[l,0],d=r>>3,u=7&r,p=t.length;s=new Uint32Array(s.buffer);for(let n=0;n<a;n++){for(const n=e+d;e<n;e++){const. n=e<p?t[e]:255;s[i++]=128&n?h:c;s[i++]=64&n?h:c;s[i++]=32&n?h:c;s[i++]=16&n?h:c;s[i++]=8&n?h:c;s[i++]=4&n?h:c;s[i++]=2&n?h:c;s[i++]=1&n?h:c}si(0===u)continuar;const n=e<p?t[e++]:255;para(sea t=0;t<u;t++)s[i++]=n&1<<7-t?h:c}devolver{srcPos:e,destPos:i}};var n=s(1)},(t,e)=>{Objeto.defineProperty(e,"__esModule",{valor:!0});e.GlobalWorkerOptions=void 0;const s=Objeto.create(null);e.GlobalWorkerOptions=s;s.workerPort=void 0===s.workerPort?null:s.workerPort;s.workerSrc=void 0===s.workerSrc?"":s.workerSrc},(t,e,s)=>{Objeto.defineProperty(e,"__esModule",{valor:!0});e.MessageHandler=void 0;var n=s(1);const i=1,r=2,a=1,o=2,l=3,c=4,h=5,d=6,u=7,p=8;función wrapReason(t){t instancia de Error||"object"==typeof t&&null!==t||(0,n.unreachable)('wrapReason: Se esperaba que "reason" fuera un error (posiblemente clonado).');switch(t.name){case "AbortException": return new n.AbortException(t.message);case "MissingPDFException": return new n.MissingPDFException(t.message);case "PasswordException": return new n.PasswordException(t.message,t.code);case "UnexpectedResponseException": return new n.UnexpectedResponseException(t.message,t.status);case "UnknownErrorException": return new n.UnknownErrorException(t.message,t.details);default:return new n.UnknownErrorException(t.message,t.toString())}}e.MessageHandler=clase MessageHandler{constructor(t,e,s){este.sourceName=t;este.targetName=e;este.comObj=s;este.callbackId=1;este.streamId=1;este.streamSinks=Object.create(null);este.streamControllers=Object.create(null);este.callbackCapabilities=Object.create(null);este.actionHandler=Object.create(null);este._onComObjOnMessage=t=>{const e=t.data;si(e.targetName!==este.sourceName)return;si(e.stream){este._processStreamMessage(e);return}si(e.callback){const t=e.callbackId,s=this.callbackCapabilities[t];si(!s)throw new Error(`No se puede resolver la devolución de llamada ${t}`);delete this.callbackCapabilities[t];if(e.callback===i)s.resolve(e.data);else{if(e.callback!==r)throw new Error("Caso de devolución de llamada inesperado");s.reject(wrapReason(e.reason))}return}const n=this.actionHandler[e.action];if(!n)throw new Error(`Acción desconocida del trabajador: ${e.action}`);if(e.callbackId){const t=this.sourceName,a=e.sourceName;new Promesa((función(t){t(n(e.data))})). entonces((función(n){s.postMessage({nombreOrigen:t,nombreDestino:a,devoluciónDeCalle:i,IdDeCalle:e.IdDeCalle,datos:n})}),(función(n){s.postMessage({nombreOrigen:t,nombreDestino:a,devoluciónDeCalle:r,IdDeCalle:e.IdDeCalle,razón:wrapReason(n)})}))}de lo contrario e.streamId?this._createStreamSink(e):n(e.data)};s.addEventListener("mensaje",this._onComObjOnMessage)}en(t,e){const s=this.actionHandler;si(s[t])arrojar nuevo Error(`Ya existe un nombreDeAcción llamado "${t}"`); s[t]=e}enviar(t,e,s){this.comObj.postMessage({nombreorigen:this.nombreorigen,nombredestino:this.nombredestino,acción:t,datos:e},s)}enviarConPromesa(t,e,s){constante i=this.callbackId++,r=(0,n.createPromiseCapability)();this.callbackCapabilities[i]=r;intentar{this.comObj.postMessage({nombreorigen:this.nombreorigen,nombredestino:this.nombredestino,acción:t,callbackId:i,datos:e},s)}capturar(t){r.rechazar(t)}devolver r.promesa}enviarConStream(t,e,s,i){constante r=este.streamId++,o=este.nombreorigen,l=este.nombredestino,c=este.comObj;devuelve nuevo ReadableStream({inicio:s=>{const a=(0,n.createPromiseCapability)();este.streamControllers[r]={controlador:s,llamadainicio:a,llamadapull:null,llamadacancel:null,estáCerrado:!1};c.postMessage({nombreorigen:o,nombredestino:l,acción:t,streamId:r,datos:e,tamañodeseado:s.tamañodeseado},i);devuelve a.promesa},pull:t=>{const e=(0,n.createPromiseCapability)();this.streamControllers[r].pullCall=e;c.postMessage({nombreOrigen:o,nombreDestino:l,flujo:d,idStream:r,tamañoDeseado:t.tamañoDeseado});devolver e.promesa},cancelar:t=>{(0,n.assert)(t instancia de Error,"la cancelación debe tener una razón válida");const e=(0,n.createPromiseCapability)();this.streamControllers[r].cancelCall=e;this.streamControllers[r].isClosed=!0;c.postMessage({nombreOrigen:o,nombreDestino:l,flujo:a,idStream:r,razón:wrapReason(t)});devolver e.promesa}},s)}_createStreamSink(t){const e=t.streamId,s=este.nombreOrigen,i=t.nombreOrigen,r=este.comObj,a=este,o=este.actionHandler[t.acción],d={enqueue(t,a=1,o){if(este.isCancelled)return;const l=this.desiredSize;this.desiredSize-=a;if(l>0&&this.desiredSize<=0){this.sinkCapability=(0,n.createPromiseCapability)();this.ready=this.sinkCapability.promise}r.postMessage({nombreOrigen:s,nombreDestino:i,flujo:c,idStream:e,fragmento:t},o)},close(){if(!this.isCancelled){this.isCancelled=!0;r.postMessage({nombreOrigen:s,nombreDestino:i,flujo:l,idStream:e});delete a.streamSinks[e]}},error(t){(0,n.assert)(t instanceof Error,"error debe tener una instancia válida motivo"); si (!esto.seCancela){esto.seCancela=!0;r.mensajeDePublicado({nombreOrigen:s,nombreDestino:i,flujo:h,IdFlujo:e,motivo:wrapReason(t)})}},CapacidadDestinataria:(0,n.CapacidadCrearPromesa)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};d.sinkCapability.resolve();d.ready=d.sinkCapability.promise;this.streamSinks[e]=d;new Promise((function(e){e(o(t.data,d))})).then((function(){r.postMessage({nombreOrigen:s,nombreDestino:i,flujo:p,idStream:e,éxito:!0})}),(function(t){r.postMessage({nombreOrigen:s,nombreDestino:i,flujo:p,idStream:e,razón:wrapReason(t)})}))}_processStreamMessage(t){constante e=t.streamId,s=este.nombreOrigen,i=t.nombreOrigen,r=este.comObj,g=este.streamControllers[e],f=este.streamSinks[e];switch(t.stream){case p:t.success?g.startCall.resolve():g.startCall.reject(wrapReason(t.reason));break;case u:t.success?g.pullCall.resolve():g.pullCall.reject(wrapReason(t.reason));break;case d:if(!f){r.postMessage({nombreOrigen:s,nombreDestino:i,stream:u,streamId:e,success:!0});break}f.desiredSize<=0&&t.desiredSize>0&&f.sinkCapability.resolve();f.desiredSize=t.desiredSize;new Promesa((función(t){t(f.onPull&&f.onPull())})).entonces((función(){r.postMessage({nombreOrigen:s,nombreDestino:i,flujo:u,IdDeFlujo:e,éxito:!0})}),(función(t){r.postMessage({nombreOrigen:s,nombreDestino:i,flujo:u,IdDeFlujo:e,razón:wrapReason(t)})}));break;case c:(0,n.assert)(g,"encolar debería tener un controlador de flujo");if(g.isClosed)break;g.controller.enqueue(t.chunk);break;case l:(0,n.assert)(g,"cerrar debería tener un controlador de flujo");if(g.isClosed)break;g.isClosed=!0;g.controller.close();this._deleteStreamController(g,e);break;case h:(0,n.assert)(g,"el error debería tener un controlador de flujo");g.controller.error(wrapReason(t.reason));this._deleteStreamController(g,e);break;case o:t.success?g.cancelCall.resolve():g.cancelCall.reject(wrapReason(t.reason));this._deleteStreamController(g,e);break;case a:if(!f)break;new Promesa((función(e){e(f.onCancel&&f.onCancel(wrapReason(t.reason)))})).luego((función(){r.postMessage({nombreorigen:s,nombredestino:i,flujo:o,iddeflujo:e,éxito:!0})}),(función(t){r.postMessage({nombreorigen:s,nombredestino:i,flujo:o,iddeflujo:e,razón:wrapReason(t)})}));f.sinkCapability.reject(wrapReason(t.reason));f.isCancelled=!0;eliminar esto.streamSinks[e];romper;predeterminado:lanzar nuevo Error("Caso de flujo inesperado")}}async _deleteStreamController(t,e){esperar Promesa.allSettled([t.startCall&&t.startCall.promise,t.pullCall&&t.pullCall.promise,t.cancelCall&&t.cancelCall.promise]);eliminar este.streamControllers[e]}destroy(){this.comObj.removeEventListener("mensaje",this._onComObjOnMessage)}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{valor:!0});e.Metadata=void 0;var n=s(1);e.Metadata=class Metadata{#Q;#Z;constructor({parsedData:t,rawData:e}){this.#Q=t;this.#Z=e}getRaw(){devolver this.#Z}get(t){devolver esto.#Q.get(t)??null}getAll(){return(0,n.objectFromMap)(esto.#Q)}has(t){devuelve esto.#Q.has(t)}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{valor:!0});e.OptionalContentConfig=void 0;var n=s(1);const i=Symbol("INTERNAL");clase OptionalContentGroup{#tt=!0;constructor(t,e){this.name=t;this.intent=e}get visible(){return this.#tt}_setVisible(t,e){t!==i&&(0,n.unreachable)("Método interno `_setVisible` llamado.");this.#tt=e}}e.OptionalContentConfig=clase OptionalContentConfig{#et=!0;#st=new Map;#nt=null;#it=null;constructor(t){this.name=null;this.creator=null;if(null!==t){this.name=t.name;this.creator=t.creator;this.#it=t.order;for(const e of t.grupos)esto.#st.set(e.id,new OptionalContentGroup(e.name,e.intent));si("OFF"===t.baseState)para(const t de esto.#st.values())t._setVisible(i,!1);para(const e de t.on)esto.#st.get(e)._setVisible(i,!0);para(const e de t.off)esto.#st.get(e)._setVisible(i,!1);esto.#nt=new Map;para(const[t,e]de esto.#st)esto.#nt.set(t,e.visible)}}#rt(t){const e=t.length;si(e<2)devuelve!0;const s=t[0];para(let i=1;i<e;i++){const e=t[i];let r;if(Array.isArray(e))r=this.#rt(e);else{if(!this.#st.has(e)){(0,n.warn)(`No se encontró el grupo de contenido opcional: ${e}`);return!0}r=this.#st.get(e).visible}switch(s){case"And":if(!r)return!1;break;case"Or":if(r)return!0;break;case"Not":return!r;default:return!0}}return"And"===s}isVisible(t){if(0===this.#st.size)return!0;if(!t){(0,n.warn)("Grupo de contenido opcional no definido.");return!0}if("OCG"===t.type){if(!this.#st.has(t.id)){(0,n.warn)(`Contenido opcional grupo no encontrado: ${t.id}`); ¡devuelve! 0} devuelve esto. #st. get(t.id). visible} si ("OCMD" === t. type) {si (t. expresión) devuelve esto. #rt(t. expresión); si (! t. política | | "AnyOn" === t. política) {para (constante e de t. ids) {si (! t. has(e)) {(0, n. advertencia)(` No se encontró el grupo de contenido opcional: ${e}`); ¡devuelve! 0} si (this. #st. get(e). visible) devuelve! 0} devuelve! 1} si ("AllOn" === t. política) {para (constante e de t. ids) {si (! t. has(e)) {(0, n. advertencia)(` No se encontró el grupo de contenido opcional: ${e}`);return!0}if(!this.#st.get(e).visible)return!1}return!0}if("AnyOff"===t.policy){for(const e of t.ids){if(!this.#st.has(e)){(0,n.warn)(`No se encontró el grupo de contenido opcional: ${e}`);return!0}if(!this.#st.get(e).visible)return!0}return!1}if("AllOff"===t.policy){for(const e of t.ids){if(!this.#st.has(e)){(0,n.warn)(`No se encontró el grupo de contenido opcional: ${e}`);return!0}if(this.#st.get(e).visible)return!1}return!0}(0,n.warn)(`Política de contenido opcional desconocida ${t.policy}.`);return!0}(0,n.warn)(`Tipo de grupo desconocido ${t.type}.`);return!0}setVisibility(t,e=!0){if(this.#st.has(t)){this.#st.get(t)._setVisible(i,!!e);this.#et=null}else(0,n.warn)(`Grupo de contenido opcional no encontrado: ${t}`)}get hasInitialVisibility(){if(null!==this.#et)return this.#et;for(const[t,e]of this.#st){const s=this.#nt.get(t);if(e.visible!==s)return this.#et=!1}return this.#et=!0}getOrder(){return este.#st.size?este.#it?este.#it.slice():[...este.#st.keys()]:null}getGroups(){devuelve este.#st.size>0?(0,n.objectFromMap)(este.#st):null}getGroup(t){devuelve este.#st.get(t)||null}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});e.PDFDataTransportStream=void 0;var n=s(1),i=s(8);e.PDFDataTransportStream=class PDFDataTransportStream{constructor(t,e){(0,n.assert)(e,'PDFDataTransportStream - falta el argumento "pdfDataRangeTransport" requerido.');this._queuedChunks=[];this._progressiveDone=t.progressiveDone||!1;this._contentDispositionFilename=t.contentDispositionFilename||null;const s=t.initialData;if(s?.length>0){const t=new Uint8Array(s).buffer;this._queuedChunks.push(t)}this._pdfDataRangeTransport=e;this._isStreamingSupported=!t.disableStream;this._isRangeSupported=!t.disableRange;this._contentLength=t.length;this._fullRequestReader=null;this._rangeReaders=[];this._pdfDataRangeTransport.addRangeListener(((t,e)=>{this._onReceiveData({begin:t,chunk:e})}));this._ pdfDataRangeTransport.addProgressListener(((t,e)=>{this._onProgress({cargado:t,total:e})}));this._pdfDataRangeTransport.addProgressiveReadListener((t=>{this._onReceiveData({fragmento:t})}));this._pdfDataRangeTransport.addProgressiveDoneListener((()=>{this._onProgressiveDone()}));this._pdfDataRangeTransport.transportReady()}_onReceiveData(t){constante e=new Uint8Array(t.chunk).buffer;if(void 0===t.begin)this._fullRequestReader?this._fullRequestReader._enqueue(e):this._queuedChunks.push(e);else{const s=this._rangeReaders.some((function(s){if(s._begin!==t.begin)return!1;s._enqueue(e);return!0}));(0,n.assert)(s,"_onReceiveData - no se encontró ninguna instancia de `PDFDataTransportStreamRangeReader`.")}}get _progressiveDataLength(){devuelve this._fullRequestReader?._loaded??0}_onProgress(t){if(void 0===t.total){const e=this._rangeReaders[0];e?.onProgress&&e.onProgress({loaded:t.loaded})}else{const e=this._fullRequestReader;e?.onProgress&&e.onProgress({loaded:t.loaded,total:t.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone();this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){(0,n.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader solo se puede llamar una vez.");const t=this._queuedChunks;this._queuedChunks=null;devuelve nuevo PDFDataTransportStreamReader(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)devuelve null;const s=new PDFDataTransportStreamRangeReader(this,t,e);this._pdfDataRangeTransport.requestDataRange(t,e);this._rangeReaders.push(s);devuelve s}cancelAllRequests(t){this._fullRequestReader&&this._fullRequestReader.cancel(t);for(const e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}};clase PDFDataTransportStreamReader{constructor(t,e,s=!1,n=null){this._stream=t;this._done=s||!1;this._filename=(0,i.isPdfFile)(n)?n:null;this._queuedChunks=e||[];this._loaded=0;for(const t de this._queuedChunks)this._loaded+=t.byteLength;this._requests=[];this._headersReady=Promise.resolve();t._fullRequestReader=this;this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length>0){this._requests.shift().resolve({value:t,done:!1})}else this._queuedChunks.push(t);this._loaded+=t.byteLength}}obtener headersReady(){devolver this._headersReady}obtener filename(){devolver this._filename}obtener isRangeSupported(){devolver this._stream._isRangeSupported}obtener isStreamingSupported(){devolver this._stream._isStreamingSupported}obtener contentLength(){devolver this._stream._contentLength}asincrónico leer(){si(this._queuedChunks.length>0){devolver{valor:this._queuedChunks.shift(),hecho:!1}}si(this._done)devolver{valor:void 0,hecho:!0};const t=(0,n.createPromiseCapability)();this._requests.push(t);devolver t.promesa}cancelar(t){this._done=!0;para(const t de this._requests)t.resolve({valor:void 0,hecho:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}clase PDFDataTransportStreamRangeReader{constructor(t,e,s){this._stream=t;this._begin=e;this._end=s;this._queuedChunk=null;this._requests=[];this._done=!1;this.onProgress=null}_enqueue(t){if(!this._done){if(0===this._requests.length)this._queuedChunk=t;else{this._requests.shift().resolve({valor:t,done:!1});for(const t de this._requests)t.resolve({valor:void 0,done:!0});this._requests.length=0}this._done=!0;this._stream._removeRangeReader(this)}}obtener isStreamingSupported(){¡devuelve!1}lectura asíncrona(){si(this._queuedChunk){const t=this._queuedChunk;this._queuedChunk=null;devuelve{valor:t,hecho:!1}}si(this._hecho)devuelve{valor:void 0,hecho:!0};const t=(0,n.createPromiseCapability)();this._requests.push(t);devuelve t.promesa}cancel(t){this._done=!0;para(const t de this._requests)t.resolve({valor:void 0, hecho:!0}); esto._solicitudes.longitud=0; esto._transmisión._removeRangeReader(esto)}}},(t,e)=>{Objeto.defineProperty(e,"__esModule",{valor:!0});e.XfaText=void 0;clase XfaText{texto estáticoContenido(t){constante e=[],s={elementos:e,estilos:Objeto.crear(null)};!función caminar(t){si(!t)regresar;dejar s=null;constante n=t.nombre; si("#texto"===n)s=t.valor; de lo contrario{si(!XfaText.shouldBuildText(n))devuelve;t?.atributos?.contenidodetexto?s=t.atributos.contenidodetexto:t.valor&&(s=t.valor)}null!==s&&e.push({str:s}); si(t.hijos) para(const e de t.hijos) caminar(e)}(t); devuelve s}estático shouldBuildText(t){devuelve!("área de texto"===t||"entrada"===t||"opción"===t||"seleccionar"===t)}}e.XfaText=XfaText},(t,e,s)=>{Object.defineProperty(e,"__esModule",{valor:!0});e.NodeStandardFontDataFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var n=s(9);const fetchData=function(t){devuelve nueva Promesa(((e,s)=>{require("fs").readFile(t,((t,n)=>{!t&&n?e(new Uint8Array(n)):s(new Error(t))}))}))};clase NodeCanvasFactory extiende n.BaseCanvasFactory{_createCanvas(t,e){devuelve require("canvas").createCanvas(t,e)}}e.NodeCanvasFactory=NodeCanvasFactory;clase NodeCMapReaderFactory extiende n.BaseCMapReaderFactory{_fetchData(t,e){devuelve fetchData(t).then((t=>({cMapData:t,compressionType:e})))}}e.NodeCMapReaderFactory=NodeCMapReaderFactory;clase NodeStandardFontDataFactory extiende n.BaseStandardFontDataFactory{_fetchData(t){devuelve fetchData(t)}}e.NodeStandardFontDataFactory=NodeStandardFontDataFactory},(t,e,s)=>{Object.defineProperty(e,"__esModule",{valor:!0});e.AnnotationEditorLayer=void 0;var n=s(7),i=s(1),r=s(23),a=s(24);clase Capa del editor de anotaciones {#at;#ot=!1;#lt=this.pointerup.bind(this);#ct=this.pointerdown.bind(this);#ht=new Map;#dt=!1;#ut=!1;#pt;static _initialized=!1;constructor(t){if(!Capa del editor de anotaciones._initialized){Capa del editor de anotaciones._initialized=!0;r.FreeTextEditor.initialize(t.l10n);a.InkEditor.initialize(t.l10n);t.uiManager.registerEditorTypes([r.FreeTextEditor,a.InkEditor])}this.#pt=t.uiManager;this.annotationStorage=t.ann otationStorage;this.pageIndex=t.pageIndex;this.div=t.div;this.#at=t.accessibilityManager;this.#pt.addLayer(this)}updateToolbar(t){this.#pt.updateToolbar(t)}updateMode(t=this.#pt.getMode()){this.#gt();if(t===i.AnnotationEditorType.INK){this.addInkEditorIfNeeded(!1);this.disableClick()}de lo contrario este.enableClick();este.#pt.unselectAll()}addInkEditorIfNeeded(t){si(!t&&este.#pt.getMode()!==i.AnnotationEditorType.INK)retorno;si(!t)para(const t de este.#ht.values())si(t.isEmpty()){t.setInBackground();retorno}este.#ft({offsetX:0,offsetY:0}).setInBackground()}setEditingState(t){este.#pt.setEditingState(t)}addCommands(t){este.#pt.addCommands(t)}habilitar(){este.div.style.pointerEvents="auto";para(const t de este.#ht.values())t.enableEditing()}deshabilitar(){este.div.style.pointerEvents="none";for(const t de este.#ht.values())t.disableEditing()}setActiveEditor(t){este.#pt.getActive()!==t&&este.#pt.setActiveEditor(t)}enableClick(){este.div.addEventListener("puntero abajo",este.#ct);este.div.addEventListener("puntero arriba",este.#lt)}deshabilitarClick(){este.div.removeE ventListener("puntero abajo",this.#ct);this.div.removeEventListener("puntero arriba",this.#lt)}adjuntar(t){this.#ht.set(t.id,t)}separar(t){this.#ht.delete(t.id);this.#at?.removePointerInTextLayer(t.contentDiv)}eliminar(t){this.#pt.removeEditor(t);this.detach(t);thi s.annotationStorage.remove(t.id);t.div.style.display="ninguno";setTimeout((()=>{t.div.style.display="";t.div.remove();t.isAttachedToDOM=!1;document.activeElement===document.body&&this.#pt.focusMainContainer()}),0);this.#ut||this.addInkEditorIfNeeded(!1)}#m t(t){si(t.padre!==esto){esto.adjuntar(t);t.índiceDePágina=esto.índiceDePágina;t.padre?.adjuntar(t);t.padre=esto;si(t.div&&t.isAttachedToDOM){t.div.eliminar();esto.div.agregar(t.div)}}}agregar(t){esto.#mt(t);esto.#pt.addEditor(t);esto.adjuntar(t);si(!t.isAttachedToDOM){constante e=t.render();este.div.append(e);t.isAttachedToDOM=!0}este.moveEditorInDOM(t);t.onceAdded();este.addToAnnotationStorage(t)}moveEditorInDOM(t){este.#at?.moveElementInDOM(este.div,t.div,t.contentDiv,!0)}addToAnnotationStorage(t){t.isEmpty()||this.annotationStorage.has(t.id)||this.annotationStorage.setValue(t.id,t)}addOrRebuild(t){t.needsToBeRebuilt()?t.rebuild():this.add(t)}addANewEditor(t){this.addCommands({cmd:()=>{this.addOrRebuild(t)},undo:()=>{t.remove()},mustExec:!0})}addUndoableEditor(t){this.addCommands({cmd:()=>{this.addOrRebuild(t)},undo:()=>{t.remove()},mustExec:!1})}getNextId(){return esto.#pt.getId()}#bt(t){switch(esto.#pt.getMode()){caso i.AnnotationEditorType.FREETEXT:devuelve nuevo r.FreeTextEditor(t);caso i.AnnotationEditorType.INK:devuelve nuevo a.InkEditor(t)}devuelve nulo}deserializar(t){switch(t.annotationType){caso i.AnnotationEditorType.FREETEXT:devuelve r.FreeTextEditor.deserialize(t,esto);caso i.AnnotationEditorType.INK:devuelve a.InkEditor.deserialize(t,esto)}devuelve nulo}#ft(t){const e=esto.getNextId(),s=esto.#bt({padre:esto,id:e,x:t.offsetX,y:t.offsetY});s&&esto.add(s);devuelve s}setSelected(t){esto.#pt.setSelected(t)}toggleSelected(t){esto.#pt.toggleSelected(t)}isSelected(t){devolver esto.#pt.isSelected(t)}unselect(t){esto.#pt.unselect(t)}pointerup(t){constante e=n.KeyboardManager.platform.isMac;if(!(0!==t.button||t.ctrlKey&&e)&&t.target===esto.div&&esto.#dt){esto.#dt=!1;esto.#ot?this.#ft(t):esto.#ot=!0}}pointerdown(t){constante e=n.KeyboardManager.platform.isMac;if(0!==t.button||t.ctrlKey&&e)return;if(t.target!==this.div)return;this.#dt=!0;const s=this.#pt.getActive();this.#ot=!s||s.isEmpty()}drop(t){const e=t.dataTransfer.getData("texto/sin formato"),s=this.#pt.getEditor(e);if(!s)return;t.preventDefault();t.dataTransfer.dropEffect="mover";this.#mt(s);const n=this.div.getBoundingClientRect(),i=t.clientX-nx,r=t.clientY-ny;s.translate(is.startX,rs.startY);this.moveEditorInDOM(s);s.div.focus()}dragover(t){t.preventDefault()}destroy(){this.#pt.getActive()?.parent===this&&this.#pt.setActiveEditor(null);for(const t de this.#ht.values()){this.#at?.removePointerInTextLayer(t.contentDiv);t.isAttachedToDOM=!1;t.div.remove();t.parent=null}this.div=null;this.#ht.clear();this.#pt.removeLayer(this)}#gt(){this.#ut=!0;for(const t de esto.#ht.values())t.isEmpty()&&t.remove();esto.#ut=!1}render(t){esto.viewport=t.viewport;(0,n.bindEvents)(esto,esto.div,["dragover","drop"]);esto.setDimensions();para(const t de esto.#pt.getEditors(esto.pageIndex))esto.add(t);esto.updateMode()}update(t){esto.viewport=t.viewport;esto.setDimensions();esto.updateMode()}obtener scaleFactor(){devolver esto.viewport.scale}obtener pageDimensions(){const[t,e,s,n]=esto.viewport.viewBox;devolver[st,ne]}obtener viewportBaseDimensions(){const{ancho:t,alto:e,rotación:s}=esto.viewport;devolver s%180==0?[t,e]:[e,t]}setDimensions(){const{ancho:t,alto:e,rotación:s}=this.viewport,n=s%180!=0,i=Math.floor(t)+"px",r=Math.floor(e)+"px";this.div.style.width=n?r:i;this.div.style.height=n?i:r;this.div.setAttribute("rotación-principal-datos",s)}}e.AnnotationEditorLayer=AnnotationEditorLayer},(t,e,s)=>{Objeto.defineProperty(e,"__esModule",{valor:!0});e.FreeTextEditor=void 0;var n=s(1),i=s(7),r=s(6);clase FreeTextEditor extiende r.AnnotationEditor{#At=this.editorDivBlur.bind(this);#_t=this.editorDivFocus.bind(this);#yt=this.editorDivKeydown.bind(this);#vt;#St="";#xt=!1;#Et;static _freeTextDefaultContent="";static _l10nPromise;static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static _keyboardManager=new i.KeyboardManager([[["ctrl+Intro","mac+meta+Intro","Escape","mac+Escape"],FreeTextEditor.prototype.commitOrRemove]]); static _type="freetext";constructor(t){super({...t,name:"freeTextEditor"});this.#vt=t.color||FreeTextEditor._defaultColor||r.AnnotationEditor._defaultLineColor;this.#Et=t.fontSize||FreeTextEditor._defaultFontSize} static initialize(t){this._l10nPromise=new Map(["free_text_default_content","editor_free_text_aria_label"].map((e=>[e,t.get(e)])));const e=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(e.getPropertyValue("--freetext-padding"))}estático updateDefaultParams(t,e){switch(t){case n.AnnotationEditorParamsType.FREETEXT_SIZE:FreeTextEditor._defaultFontSize=e;break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:FreeTextEditor._defaultColor=e}}updateParams(t,e){switch(t){case n.AnnotationEditorParamsType.FREETEXT_SIZE:this.#Ct(e);break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:this.#Pt(e)}}estático get defaultPropertiesToUpdate(){devolver[[n.AnnotationEditorParamsType.FREETEXT_SIZE,FreeTextEditor._defaultFontSize],[n.AnnotationEditorParamsType.FREETEXT_COLOR,FreeTextEditor._defaultColor||r.AnnotationEditor._defaultLineColor]]}obtener propiedadesToUpdate(){devolver[[n.AnnotationEditorParamsType.FREETEXT_SIZE,this.#Et],[n.AnnotationEditorParamsType.FREETEXT_COLOR,this.#vt]]}#Ct(t){const setFontsize=t=>{this.editorDiv.style.fontSize=`calc(${t}px * var(--scale-factor))`;this.translate(0,-(t-this.#Et)*this.parent.scaleFactor);this.#Et=t;this.#Tt()},e=this.#Et;this.parent.addCommands({cmd:()=>{establecerTamañoDeFuente(t)},undo:()=>{establecerTamañoDeFuente(e)},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#Pt(t){const e=esto.#vt;esto.padre.addCommands({cmd:()=>{esto.#vt=t;esto.editorDiv.style.color=t},deshacer:()=>{esto.#vt=e;esto.editorDiv.style.color=e},mustExec:!0,tipo:n.AnnotationEditorParamsType.FREETEXT_COLOR,sobrescribirSiSameType:!0,mantenerDeshacer:!0})}obtenerTraducciónInicial(){devolver[-FreeTextEditor._internalPadding*esto.padre.scaleFactor,-(FreeTextEditor._internalPadd ing+this.#Et)*this.parent.scaleFactor]}reconstruir(){super.reconstruir();null!==this.div&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){if(!this.isInEditMode()){this.parent.setEditingState(!1);this.parent.updateToolbar(n.AnnotationEditorType.FREETEXT);super.enableEditMode();this.enableEditing();this.overlayDiv.classList.remove("habilitado");this.editorDiv.contentEditable=!0;this.div.draggable=!1;this.editorDiv.addEventListener("pulsación de tecla",this.#yt);this.editorDiv.addEventListener("enfoque",this.#_t);this.editorDiv.addEventListener("desenfoque",this.#At)}}disableEditMode(){if(this.isInEditMode()){this.parent.setEditingState(!0);super.disableEditMode();this.disableEditing();this.overlayDiv.classList.add("habilitado");this.editorDiv.contentEditable=!1;this.div.draggable=!0;this.editorDiv.removeEventListener("pulsación de tecla wn",this.#yt);this.editorDiv.removeEventListener("focus",this.#_t);this.editorDiv.removeEventListener("desenfoque",this.#At);this.div.focus();this.isEditing=!1}}focusin(t){super.focusin(t);t.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){if(!this.width){this.enableEditMode();this.editorDiv.focus()}}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1;this.parent.setEditingState(!0);super.remove()}#wt(){const t=this.editorDiv.getElementsByTagName("div");if(0===t.length)return this.editorDiv.innerText;const e=[];for(let s=0,n=t.length;s<n;s++){const n=t[s].firstChild;"#text"===n?.nodeName?e.push(n.data):e.push("")}return e.join("\n")}#Tt(){const[t,e]=this.parent.viewportBaseDimensions,s=this.div.getBoundingClientRect();this.width=s.width/t;this.height=s.height/e}commit(){super.commit();if(!this.#xt){this.#xt=!0;this.parent.addUndoableEditor(this)}this.disableEditMode();this.#St=this.#wt().trimEnd();this.#Tt()}shouldGetKeyboardEvents(){return este.isInEditMode()}dblclick(t){este.enableEditMode();este.editorDiv.focus()}keydown(t){si(t.target===este.div&&"Intro"===t.key){este.enableEditMode();este.editorDiv.focus()}}editorDivKeydown(t){FreeTextEditor._keyboardManager.exec(este,t)}editorDivFocus(t){este.isEditing=!0}editar orDivBlur(t){this.isEditing=!1}disableEditing(){this.editorDiv.setAttribute("rol","comentario");this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("rol","cuadro de texto");this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,e;if(this.width){t=this.x;e=this.y}super.render();this.editorDiv=document.createElement("div");this.editorDiv.className="internal";this.editorDiv.setAttribute("id",`${this.id}-editor`);this.enableEditing();FreeTextEditor._l10nPromise.get("editor_free_text_aria_label"). entonces((t=>this.editorDiv?.setAttribute("aria-label",t)));FreeTextEditor._l10nPromise.get("free_text_default_content").entonces((t=>this.editorDiv?.setAttribute("default-content",t)));this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;s.fontSize=`calc(${this.#Et}px * var(--scale-factor))`;s.color=this.#vt;this.div.append(this.editorDiv);this.overlayDiv=document.createElement("div");this.overlayDiv.classList.add("superposición","habilitado");this.div.append(this.overlayDiv);(0,i.bindEvents)(this,this.div,["doble clic","keydown"]);if(this.width){const[s,n]=this.parent.viewportBaseDimensions;this.setAt(t*s,e*n,this.width*s,this.height*n);for(const t de this.#St.split("\n")){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br"));this.editorDiv.append(e)}this.div.draggable=!0;this.editorDiv.contentEditable=!1}else{this.div.draggable=!1;this.editorDiv.contentEditable=!0}devolver this.div}obtener contentDiv(){devolver this.editorDiv}deserializar(t,e) estático{constante s=super.deserialize(t,e);s.#Et=t.fontSize;s.#vt=n.Util.makeHexColor(...t.color);s.#St=t.value;devolver s}serializar(){si(this.isEmpty())devolver null;constante t=EditorDeTextoLibre._internalPadding*this.parent.scaleFactor,e=this.getRect(t,t),s=r.EditorDeAnotaciones._colorManager.convert(getComputedStyle(this.editorDiv).color);devolver{tipoDeAnotación:n.TipoDeEditorDeAnotaciones.FREETEXT,color:s,tamañoDeFuente:this.#Et,valor:this.#St,índiceDePágina:this.parent.pageIndex,rect:e,rotación:this.rotación}}}e.EditorDeTextoLibre=EditorDeTextoLibre},(t,e,s)=>{Objeto.defineProperty(e,"__esModule",{valor:!0});e.EditorDeTinta=void 0;Objeto.defineProperty(e,"CurvaDeAjuste",{enumerable:!0,obtener:función(){devolver r.CurvaDeAjuste}});var n=s(1),i=s(6),r=s(25),a=s(7);const o=16;clase InkEditor extiende i.AnnotationEditor{#kt=0;#Ft=0;#Mt=0;#Rt=this.canvasPointermove.bind(this);#Dt=this.canvasPointerleave.bind(this);#It=this.canvasPointerup.bind(this);#Ot=this.canvasPointerdown.bind(this);#Lt=!1;#Nt=!1;#Bt=null;#jt=null;#Ut=0;#qt=0;#Wt=null;estático _defaultColor=null;estático _defaultOpacity=1;estático _defaultThickness=1;estático _l10nPromise;estático _type="tinta";constructor(t){super({...t,nombre:"EditorDeInk"});this.color=t.color||null;this.thickness=t.thickness||null;this.opacidad=t.opacidad||null;this.paths=[];this.bezierPath2D=[];this.currentPath=[];this.scaleFactor=1;this.translationX=this.translationY=0;this.x=0;this.y=0}inicializar(t){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink_aria_label"].map((e=>[e,t.get(e)])))}actualizarParámetrosPredeterminados(t,e){cambiar(t){caso n.AnnotationEditorParamsType.INK_THICKNESS:InkEditor._defaultThickness=e;break;case n.AnnotationEditorParamsType.INK_COLOR:InkEditor._defaultColor=e;break;case n.AnnotationEditorParamsType.INK_OPACITY:InkEditor._defaultOpacity=e/100}}updateParams(t,e){switch(t){case n.AnnotationEditorParamsType.INK_THICKNESS:this.#zt(e);break;case n.AnnotationEditorParamsType.INK_COLOR:this.#Pt(e);break;case n.AnnotationEditorParamsType.INK_OPACITY:this.#Gt(e)}}obtención estática defaultPropertiesToUpdate(){devolver[[n.AnnotationEditorParamsType.INK_THICKNESS,InkEditor._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,InkEditor._defaultColor||i.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*InkEditor._defaultOpacity)]]}obtener propiedadesParaActualizar(){devolver[[n.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||InkEditor._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,this.color||InkEditor._defaultColor||i.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??InkEditor._defaultOpacity))]]}#zt(t){constante e=este.grosor;este.padre.addCommands({cmd:()=>{este.grosor=t;este.#Ht()},deshacer:()=>{este.grosor=e;este.#Ht()},mustExec:!0,tipo:n.AnnotationEditorParamsType.INK_THICKNESS,sobrescribirSiSameType:!0,mantenerDeshacer:!0})}#Pt(t){const e=este.color;este.padre.addCommands({cmd:()=>{este.color=t;este.#Vt()},deshacer:()=>{este.color=e;este.#Vt()},mustExec:!0,tipo:n.AnnotationEditorParamsType.INK_COLOR,sobrescribirSiMismoTipo:!0,mantenerDeshacer:!0})}#Gt(t){t/=100;const e=esta.opacidad;esta.padre.addCommands({cmd:()=>{esta.opacidad=t;esta.#Vt()},deshacer:()=>{esta.opacidad=e;esta.#Vt()},mustExec:!0,tipo:n.AnnotationEditorParamsType.INK_OPACITY,sobrescribirSiSameType:!0,mantenerDeshacer:!0})}reconstruir(){super.reconstruir();si(null!==esta.div){si(!esta.canvas){t su.#Xt();este.#$t()}si(!este.estáAttachedToDOM){este.padre.añadir(este);este.#Yt()}este.#Ht()}}eliminar(){si(null!==este.lienzo){este.estáVacío()||este.commit();este.lienzo.ancho=este.lienzo.alto=0;este.lienzo.eliminar();este.lienzo=null;este.#jt.desconectar();este.#jt=null;super .eliminar()}}habilitarModoEdición(){si(!this.#Lt&&null!==this.canvas){super.habilitarModoEdición();this.div.draggable=!1;this.canvas.addEventListener("punteroabajo",this.#Ot);this.canvas.addEventListener("punteroarriba",this.#It)}}deshabilitarModoEdición(){si(this.isInEditMode()&&null!==this.canvas ){super.disableEditMode();this.div.draggable=!this.isEmpty();this.div.classList.remove("edición");this.canvas.removeEventListener("puntero abajo",this.#Ot);this.canvas.removeEventListener("puntero arriba",this.#It)}}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return 0===this.paths.length||1===this.paths.length&&0===this.paths[0].length}#Kt(){const{ancho:t,alto:e,rotación:s}=this.parent.viewport;switch(s){case 90:return[0,t,t,e];case 180:return[t,e,t,e];case 270:return[e,0,t,e];predeterminado:return[0,0,t,e]}}#Jt(){este.ctx.lineWidth=este.thickness*este.parent.scaleFactor/este.scaleFactor;este.ctx.lineCap="round";este.ctx.lineJoin="round";este.ctx.miterLimit=10;este.ctx.strokeStyle=`${este.color}${(0,a.opacityToHex)(este.opacity)}`}#Qt(t,e){este.isEditing=!0;if(!este.#Nt){este.#Nt=!0;este.#Yt();este.thickness||=InkE editor._defaultThickness;este.color||=InkEditor._defaultColor||i.AnnotationEditor._defaultLineColor;este.opacidad??=InkEditor._defaultOpacity}este.currentPath.push([t,e]);este.#Bt=null;este.#Jt();este.ctx.beginPath();este.ctx.moveTo(t,e);este.#Wt=()=>{si(este.#Wt){si(este.#Bt){si(este.isEmpty()){este.ctx.setTransform(1,0,0,1,0,0);este.ctx.clearRect(0,0,este.lienzo.ancho,este.lienzo.alto)}de lo contrario este.#Vt();este.ctx.lineTo(...este.#Bt);este.#Bt=null;este.ctx.stroke()}ventana.solicitudAnimaciónFrame(este.#Wt)}};ventana.solicitudAnimaciónFrame(este.#Wt)}#Zt(t,e){const[s,n]=este.rutaActual.en(-1);si(t!==s||e!==n){este.rutaActual.push([ t,e]);this.#Bt=[t,e]}}#te(t,e){this.ctx.closePath();this.#Wt=null;t=Math.min(Math.max(t,0),this.canvas.width);e=Math.min(Math.max(e,0),this.canvas.height);const[s,n]=this.currentPath.at(-1);t===s&&e===n||this.currentPath.push([t,e]);let i;if(1!==this.currentPath.length)i=(0,r.fitCurve)(this.currentPath,30,null);else{const s=[t,e];i=[[s,s.slice(),s.slice(),s]]}const a=InkEditor.#ee(i);this.currentPath.length=0;this.parent.addCommands({cmd:()=>{this.paths.push(i);this.bezierPath2D.push(a);this.rebuild()},undo:()=>{this.paths.pop();this.bezierPath2D.pop();if(0===this.paths.length)this.remove();el se{if(!this.canvas){this.#Xt();this.#$t()}this.#Ht()}},mustExec:!0})}#Vt(){if(this.isEmpty()){this.#se();return}this.#Jt();const{canvas:t,ctx:e}=this;e.setTransform(1,0,0,1,0,0);e.clearRect(0,0,t.width,t.height);this.#se();for(const t of this.bezierPath2D)e.stroke(t)}commit(){if(!this.#Lt){super.commit();this.isEditing=!1;this.disableEditMode();this.setInForeground();this.#Lt=!0;this.div.classList.add("deshabilitado");this.#Ht(!0);this.parent.addInkEditorIfNeeded(!0);this.parent.moveEditorInDOM(this);this.div.focus()}}focusin(t){super.focusin(t);this.enableEditMode()}canvasPointerdown(t) {if(0===t.button&&this.isInEditMode()&&!this.#Lt){this.setInForeground();"mouse"!==t.type&&this.div.focus();t.stopPropagation();this.canvas.addEventListener("pointerleave",this.#Dt);this.canvas.addEventListener("pointermove",this.#Rt);this.#Qt(t.offsetX,t.offsetY)}}canvasPointermove(t){t.stopPropagation();this.#Zt(t.offsetX,t.offsetY)}canvasPointeru p(t){if(0===t.button&&this.isInEditMode()&&0!==this.currentPath.length){t.stopPropagation();this.#ne(t);this.setInBackground()}}canvasPointerleave(t){this.#ne(t);this.setInBackground()}#ne(t){this.#te(t.offsetX,t.offsetY);this.canvas.removeEventListener("pointerleave",this.#Dt);this.canvas.removeEventListener("pointermove",this.#Rt);this.parent.addT oAnnotationStorage(this)}#Xt(){this.canvas=document.createElement("canvas");this.canvas.width=this.canvas.height=0;this.canvas.className="inkEditorCanvas";InkEditor._l10nPromise.get("editor_ink_canvas_aria_label").then((t=>this.canvas?.setAttribute("aria-label",t)));this.div.append(this.canvas);this.ctx=this.canvas.getContext("2d")}#$t(){this.#jt=new ResizeObserver((t=>{const e=t[0].contentRect;e.width&&e.height&&this.setDimensions(e.width,e.height)}));this.#jt.observe(this.div)}render(){if(this.div)return this.div;let t,e;if(this.width){t=this.x;e=this.y}super.render();InkEditor._l10nPromise.get("editor_ink_aria_label").entonces((t=>this.div?.setAttribute("aria-label",t)));const[s,n,i,r]=this.#Kt();this.setAt(s,n,0,0);this.setDims(i,r);this.#Xt();if(this.width){const[s,n]=this.parent.viewportBaseDimensions;this.setAt(t*s,e*n,this.width*s,this.height*n);this.#Nt=!0;this.#Yt();this.setDims(this.width*s,this.height*n);this.#Vt();this.#ie();this.div.classList.add("deshabilitado")}de lo contrario{this.div.classList.add("edición");this.enableEditMode()}this.#$t();return este.div}#Yt(){if(!this.#Nt)return;const[t,e]=this.parent.viewportBaseDimensions;este.canvas.width=Math.ceil(this.width*t);este.canvas.height=Math.ceil(this.height*e);este.#se()}setDimensions(t,e){const s=Math.round(t),n=Math.round(e);si(esto.#Ut===s&&esto.#qt===n)devuelve;esto.#Ut=s;esto.#qt=n;esto.canvas.style.visibility="oculto";si(esto.#kt&&Math.abs(esto.#kt-t/e)>.01){e=Math.ceil(t/esto.#kt);esto.setDims(t,e)}const[i,r]=esto.parent.viewportBaseDimensions;esto.width=t/i;esto.height=e/r;esto.#Lt&&esto.#re(t,e);esto.#Yt();esto.#Vt();esto.canvas.style.visibility="visible"}#re(t,e){const s=esto.#ae(),n=(ts)/esto.#Mt,i=(es)/esto.#Ft;esto.scaleFactor=Math.min(n,i)}#se(){const t=esto.#ae()/2;esto.ctx.setTransform(esto.scaleFactor,0,0,esto.scaleFactor,esto.translationX*esto.scaleFactor+t,esto.translationY*esto.scaleFactor+t)}estático#ee(t){const e=new Path2D;para(dejar s=0,n=t.length;s<n;s++){const[n,i,r,a]=t[s];0===s&&e.moveTo(...n);e.bezierCurveTo(i[0],i[1],r[0],r[1],a[0],a[1])}devolver e}#oe(t,e,s,n){const i=[],r=este.grosor/2;sea a,o;para(const l de este.caminos){a=[];o=[];para(sea i=0,c=l.longitud;i<c;i++){const[c,h,d,u]=l[i],p=t*(c[0]+e)+r,g=nt*(c[1]+s)-r,f=t*(h[0]+e)+r,m=nt*(h[1]+s)-r,b=t*(d[0]+e)+r,A=nt*(d[1]+s)-r,_=t*(u [0]+e)+r,y=nt*(u[1]+s)-r;si(0===i){a.push(p,g);o.push(p,g)}a.push(f,m,b,A,_,y);esto.#le(p,g,f,m,b,A,_,y,4,o)}i.push({bezier:a,puntos:o})}devuelve i}#le(t,e,s,n,i,r,a,o,l,c){si(esto.#ce(t,e,s,n,i,r,a,o))c.push(a,o);sino{para(dejar h=1;h<l-1;h++){const d=h/l,u=1-d;dejar p=d*t+u*s,g=d*e+u*n,f=d*s+u*i,m=d*n+u*r;p=d*p+u*f;g=d*g+u*m;f=d*f+u*(d*i+u*a);m=d*m+u*(d*r+u*o);p=d*p+u*f;g=d*g+u*m;c.push(p,g)}c.push(a,o)}}#ce(t,e,s,n,i,r,a,o){const l=(3*s-2*ta)**2,c=(3*n-2*eo)**2,h=(3*it-2*a)**2,d=(3*re-2*o)**2;return Math.max(l,h)+Math.max(c,d)<=10}#he(){let t=1/0,e=-1/0,s=1/0,i=-1/0;para(const r de esto.paths)para(const[a,o,l,c]de r){const r=n.Util.bezierBoundingBox(...a,...o,...l,...c);t=Math.min(t,r[0]);s=Math.min(s,r[1]);e=Math.max(e,r[2]);i=Math.max(i,r[3])}devolver[t,s,e,i]}#ae(){devolver esto.#Lt?Math.ceil(esto.thickness*esto.parent.scaleFactor):0}#Ht(t=!1){si(esto.isEmpty())devolver;si(!esto.#Lt){esto.#Vt();devolver}const e=esto.#he(),s=esto.#ae();esto.#Mt=Math.max(o,e[2]-e[0]);esto.#Ft=Math.max(o,e[3]-e[1]);const n=Math.ceil(s+esto.#Mt*esto.scaleFactor),i=Math.ceil(s+esto.#Ft*esto.scaleFactor),[r,a]=esto.parent.viewportBaseDimensions;esto.ancho=n/r;esto.alto=i/a;esto.#kt=n/i;esto.#ie();const l=esto.translationX,c=esto.traducciónY; esto.traducciónX=-e[0]; esto.traducciónY=-e[1]; esto.#Yt(); esto.#Vt(); esto.#Ut=n; esto.#qt=i; esto.setDims(n,i); constante h=t?s/esto.scaleFactor/2:0; esto.traducir(l-esto.traducciónX-h,c-esto.traducciónY-h)}#ie(){const{style:t}=esto.div; si(esto.#kt>=1){t.minHeight="16px"; t.minWidth=`${Math.round(esto.#kt*o)}px`}de lo contrario{t.minWidth="16px"; t.minHeight=`${Math.round(o/esto.#kt)}px`}}deserializar(t,e) estático{constante s=super.deserialize(t,e);s.thickness=t.thickness;s.color=n.Util.makeHexColor(...t.color);s.opacity=t.opacity;const[i,r]=e.pageDimensions,a=s.width*i,l=s.height*r,c=e.scaleFactor,h=t.thickness/2;s.#kt=a/l;s.#Lt=!0;s.#Ut=Math.round(a);s.#qt=Math.round(l);for(const{bezier:e}of t.paths){const t=[];s.paths.push(t);let n=c*(e[0]-h),i=c*(le[1]-h);for(let s=2,r=e.length;s<r;s+=6){const r=c*(e[s]-h),a=c*(le[s+1]-h),o=c*(e[s+2]-h),d=c*(le[s+3]-h),u=c*(e[s+4]-h),p=c*(le[s+5]-h);t.push([[n,i],[r,a],[o,d],[u,p]]);n=u;i=p}const r=this.#ee(t);s.bezierPath2D.push(r)}const d=s.#he();s.#Mt=Math.max(o,d[2]-d[0]);s.#Ft=Math.max(o,d[3]-d[1]);s.#re(a,l);devuelve s}serialize(){if(this.isEmpty())devuelve null;const t=this.getRect(0,0),e=this.rotation%180==0?t[3]-t[1]:t[2]-t[0],s=i.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:n.AnnotationEditorType.INK,color:s,thickness:this.thickness,opacity:this.opacity,paths:this.#oe(this.scaleFactor/this.parent.scaleFactor,this.translationX,this.translationY,e),pageIndex:this.parent.pageIndex,rect:t,rotation:this.rotation}}}e.InkEditor=InkEditor},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});e.fitCurve=void 0;const n=s(26);e.fitCurve=n},t=>{función fitCubic(t,e,s,n,i){var r,a,o,l,c,h,d,u,p,g,f,m,b;if(2===t.length){m=maths.vectorLen(maths.subtract(t[0],t[1]))/3;return[r=[t[0 ],maths.addArrays(t[0],maths.mulItems(e,m)),maths.addArrays(t[1],maths.mulItems(s,m)),t[1]]]}a=función acordeLongitudParameterize(t){var e,s,n,i=[];t.forEach(((t,r)=>{e=r?s+maths.vectorLen(maths.subtract(t,n)):0;i.push(e);s=e;n=t}));return i=i.map((t=>t/s))}(t);[r,l,h]=generateAndReport(t,a,a,e,s,i);if(0===l||l<n)return[r];if(l<n*n){o=a;c=l;d=h;for(b=0;b<20;b++){o=reparameterize(r,t,o);[r,l,h]=generateAndReport(t,a,o,e,s,i);if(l<n)return[r];if(h===d){let t=l/c;si(t>.9999&&t<1.0001)break}c=l;d=h}}f=[];si((u=maths.subtract(t[h-1],t[h+1])).every((t=>0===t))){u=maths.subtract(t[h-1],t[h]);[u[0],u[1]]=[-u[1],u[0]]}p=maths.normalize(u);g=maths.mulItems(p,-1);devolver f=(f=f.concat(fitCubic(t.slice(0,h+1),e,p,n,i))).concat(fitCubic(t.slice(h),g,s,n,i))}función generateAndReport(t,e,s,n,i,r){var a,o,l;a=función generateBezier(t,e,s,n){var i,r,a,o,l,c,h,d,u,p,g,f,m,b,A,_,y,v=t[0],S=t[t.length-1];i=[v,null,null,S];r=maths.zeros_Xx2x2(e.length);para(m=0,b=e.length;m<b;m++){y=1-(_=e[m]);(a=r[m])[0]=maths.mulItems(s,3*_*(y*y));a[1]=maths.mulItems(n,3*y*(_*_))}o=[[0,0],[0,0]];l=[0,0];para(m=0,b=t.longitud;m<b;m++){_=e[m];a=r[m];o[0][0]+=maths.dot(a[0],a[0]);o[0][1]+=maths.dot(a[0],a[1]);o[1][0]+=maths.dot(a[0],a[1]);o[1][1]+=maths.dot(a[1],a[1]);A=m aths.subtract(t[m],bezier.q([v,v,S,S],_));l[0]+=maths.dot(a[0],A);l[1]+=maths.dot(a[1],A)}c=o[0][0]*o[1][1]-o[1][0]*o[0][1];h=o[0][0]*l[1]-o[1][0]*l[0];d =l[0]*o[1][1]-l[1]*o[0][1];u=0===c?0:d/c;p=0===c?0:h/c;f=maths.vectorLen(mat hs.subtract(v,S));if(u<(g=1e-6*f)||p<g){i[1]=maths.addArrays(v,maths.mulItems (s,f/3));i[2]=maths.addArrays(S,maths.mulItems(n,f/3))}else{i[1]=maths.addArrays(v,maths.mulItems(s,u));i[2]=maths.addArrays(S,maths.mulItems(n,p))}return i}(t,s,n,i);[o,l]=función computeMaxError(t,e,s){var n,i,r,a,o,l,c,h;i=0;r=Math.floor(t.length/2);const d=mapTtoRelativeDistances(e,10);for(o=0,l=t.length;o<l;o++){c=t[o];h=find_t(e,s[o],d,10);if((n=(a=maths.subtract(bezier.q(e,h),c))[0]*a[0]+a[1]*a[1])>i){i=n;r=o}}return[i,r]}(t,a,e);r&&r({bez:a,points:t,params:e,maxErr:o,maxPoint:l});return[a,o,l]}función repararmeterize(t,e,s){return s.map(((s,n)=>newtonRaphsonRootFind(t,e[n],s)))}función newtonRaphsonRootFind(t,e,s){var n=maths.subtract(bezier.q(t,s),e),i=bezier.qprime(t,s),r=maths.mulMatrix(n,i),a=maths.sum(maths.squareItems(i))+2*maths.mulMatrix(n,bezier.qprimeprime(t,s));devuelve 0===a?s:sr/a}var mapTtoRelativeDistances=función(t,e){para(var s,n=[0],i=t[0],r=0,a=1;a<=e;a++){s=bezier.q(t,a/e);r+=maths.vectorLen(maths.subtract(s,i));n.push(r);i=s}devuelve n=n.map((t=>t/r))};función find_t(t,e,s,n){si(e<0)devuelve 0;si(e>1)devuelve 1;para(var i,r,a,o,l=1;l<=n;l++)si(e<=s[l]){a=(l-1)/n;r=l/n;o=(e-(i=s[l-1]))/(s[l]-i)*(ra)+a;break}devuelve o}función createTangent(t,e){devuelve maths.normalize(maths.subtract(t,e))}clase maths{ceros estáticos_Xx2x2(t){para(var e=[];t--;)e.push([0,0]);devuelve e}mulItems estáticos(t,e){devuelve t.map((t=>t*e))}mulMatrix(t,e) estático{devuelve t.reduce(((t,s,n)=>t+s*e[n]),0)}restar(t,e) estático{devuelve t.map(((t,s)=>te[s]))}addArrays estático(t,e){devuelve t.map(((t,s)=>t+e[s]))}addItems estático(t,e){devuelve t.map((t=>t+e))}suma(t) estático{devuelve t.reduce(((t,e)=>t+e))}punto(t,e) estático{devuelve maths.mulMatrix(t,e)}vectorLen estático(t){devuelve Math.hypot(...t)}divItems estático(t,e){devuelve t.map((t=>t/e))}static squareItems(t){devuelve t.map((t=>t*t))}static normalize(t){devuelve this.divItems(t,this.vectorLen(t))}}class bezier{static q(t,e){var s=1-e,n=maths.mulItems(t[0],s*s*s),i=maths.mulItems(t[1],3*s*s*e),r=maths.mulItems(t[2],3*s*e*e),a=maths.mulItems(t[3],e*e*e);devuelve maths.addArrays(maths.addArrays(n,i),maths.addArrays(r,a))}static qprime(t,e){var s=1-e,n=maths.mulItems(maths.subtract(t[1],t[0]),3*s*s),i=maths.mulItems(maths.subtract(t[2],t[1]),6*s*e),r=maths.mulItems(maths.subtract(t[3],t[2]),3*e*e);return maths.addArrays(maths.addArrays(n,i),r)}static qprimeprime(t,e){return maths.addArrays(maths.mulItems(maths.addArrays(maths.subtract(t[2],maths.mulItems(t[1],2)),t[0]),6*(1-e)),maths.mulItems(maths.addArrays(maths.subtract(t[3],maths.mulItems(t[2],2)),t[1]),6*e))}}t.exports=function fitCurve(t,e,s){if(!Array.isArray(t))throw new TypeError("El primer argumento debe ser un array");t.forEach((e=>{if(!Array.isArray(e)||e.some((t=>"number"!=typeof t))||e.length!==t[0].length)throw Error("Cada punto debe ser un array de números. Cada punto debe tener la misma cantidad de números."}));if((t=t.filter(((e,s)=>0===s||!e.every(((e,n)=>e===t[s-1][n]))))).length<2)return[];const n=t.length,i=createTangent(t[1],t[0]),r=createTangent(t[n-2],t[n-1]);devuelve fitCubic(t,i,r,e,s)};t.exports.fitCubic=fitCubic;t.exports.createTangent=createTangent},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});e.AnnotationLayer=void 0;var n=s(1),i=s(8),r=s(5),a=s(28),o=s(29);const l=1e3,c=new WeakSet;función getRectDims(t){devuelve{ancho:t[2]-t[0],alto:t[3]-t[1]}}clase Fábrica de Elementos de Anotación {estático crear(t){cambiar(t.datos.TipoDeAnotación){caso n.TipoDeAnotación.LINK: devolver nuevo ElementoDeAnotaciónDeEnlace(t);caso n.TipoDeAnotación.TEXTO: devolver nuevo ElementoDeAnotaciónDeTexto(t);caso n.TipoDeAnotación.WIDGET: cambiar(t.datos.TipoDeCampo){caso "Tx": devolver nuevo ElementoDeAnotaciónDeWidgetDeTexto(t);caso "Btn": devolver t.datos.BotónDeRadio?nuevo ElementoDeAnotaciónDeWidgetDeBotónDeRadio(t):t.datos.CasillaDeVerificación?nuevo ElementoDeAnotaciónDeWidgetDeCasillaDeVerificación(t):nuevo ElementoDeAnotaciónDeWidgetDeBotónPulsador(t);caso "Ch": devolver nuevo ElementoDeAnotaciónDeWidgetDeElección(t)} devolver nuevo ElementoDeAnotaciónDeWidget(t);caso n.TipoDeAnotación.POPUP: devolver nuevo PopupAnnotationElement(t); caso n.AnnotationType.FREETEXT: devolver nuevo FreeTextAnnotationElement(t); caso n.AnnotationType.LINE: devolver nuevo LineAnnotationElement(t); caso n.AnnotationType.SQUARE: devolver nuevo SquareAnnotationElement(t); caso n.AnnotationType.CIRCLE: devolver nuevo CircleAnnotationElement(t); caso n.AnnotationType.POLYLINE: devolver nuevo PolylineAnnotationElement(t); caso n.AnnotationType.CARET: devolver nuevo CaretAnnotationElement(t); caso n.AnnotationType.INK: devolver nuevo InkAnnotationElement(t); caso n.AnnotationType.POLYGON: devolver nuevo PolygonAnnotationElement(t); caso n.AnnotationType.HIGHLIGHT: devolver nuevo HighlightAnnotationElement(t); caso n.AnnotationType.UNDERLINE: devolver nuevo UnderlineAnnotationElement(t); caso n.AnnotationType.SQUIGGLY: devolver nuevo SquigglyAnnotationElement(t); caso n.AnnotationType.STRIKEOUT: devolver nuevo StrikeOutAnnotationElement(t); caso n.AnnotationType.STAMP: devolver nuevo StampAnnotationElement(t); caso n.AnnotationType.FILEATTACHMENT: devolver nuevo FileAttachmentAnnotationElement(t); valor predeterminado: devolver nuevo AnnotationElement(t)}}}clase AnnotationElement{constructor(t,{isRenderable:e=!1,ignoreBorder:s=!1,createQuadrilaterals:n=!1}={}){este.isRenderable=e;este.data=t.data;este.layer=t.layer;este.page=t.page;este.viewport=t.viewport;este.linkService=t.linkService;este.downloadManager=t.downloadManager;este.imageResourcesPath=t.imageResourcesPath;este.renderForms=t.renderForms;este.svgFactory=t.svgFactory;este.annotationStorage=t.annotationStorage;this.enableScripting=t.enableScripting;this.hasJSActions=t.hasJSActions;this._fieldObjects=t.fieldObjects;this._mouseState=t.mouseState;e&&(this.container=this._createContainer(s));n&&(this.quadrilaterals=this._createQuadrilaterals(s))}_createContainer(t=!1){const e=this.data,s=this.page,i=this.viewport,r=document.createElement("sección"),{ancho:a,alto:o}=getRectDims(e.rect),[l,c,h,d]=i.viewBox,u=hl,p=dc;r.setAttribute("id-anotación-datos",e.id);const g=n.Util.normalizeRect([e.rect[0],s.view[3]-e.rect[1]+s.view[1],e.rect[2],s.view[3]-e.rect[3]+s.view[1]]);if(!t&&e.borderStyle.width>0){r.style.borderWidth=`${e.borderStyle.width}px`;const t=e.borderStyle.horizontalCornerRadius,s=e.borderStyle.verticalCornerRadius;if(t>0||s>0){const e=`calc(${t}px * var(--scale-factor)) / calc(${s}px * var(--scale-factor))`;r.style.borderRadius=e}else if(esta instancia de RadioButtonWidgetAnnotationElement){const t=`calc(${a}px * var(--scale-factor)) / calc(${o}px * var(--scale-factor))`;r.style.borderRadius=t}switch(e.borderStyle.style){case n.AnnotationBorderStyleType.SOLID:r.style.borderStyle="solid";break;case n.AnnotationBorderStyleType.DASHED:r.style.borderStyle="dashed";break;case n.AnnotationBorderStyleType.BEVELED:(0,n.warn)("Estilo de borde no implementado: biselado");break;case n.AnnotationBorderStyleType.INSET:(0,n.warn)("Estilo de borde no implementado: recuadro");break;case n.AnnotationBorderStyleType.UNDERLINE:r.style.borderBottomStyle="solid"}const i=e.borderColor||null;i?r.style.borderColor=n.Util.makeHexColor(0|i[0],0|i[1],0|i[2]):r.style.borderWidth=0}r.style.left=100*(g[0]-l)/u+"%";r.style.top=100*(g[1]-c)/p+"%";const{rotación:f}=e;if(e.hasOwnCanvas||0===f){r.style.width=100*a/u+"%";r.style.height=100*o/p+"%"}de lo contrario this.setRotation(f,r);return r}setRotation(t,e=this.container){const[s,n,i,r]=this.viewport.viewBox,a=is,o=rn,{ancho:l,alto:c}=getRectDims(this.data.rect);let h,d;if(t%180==0){h=100*l/a;d=100*c/o}else{h=100*c/a;d=100*l/o}e.style.width=`${h}%`;e.style.height=`${d}%`;e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const setColor=(t,e,s)=>{const n=s.detail[t];s.target.style[e]=a.ColorConverters[`${n[0]}_HTML`](n.slice(1))};return(0,n.shadow)(this,"_commonActions",{display:t=>{const e=t.detail.display%2==1;this.container.style.visibility=e?"hidden":"visible";this.annotationStorage.setValue(this.data.id,{hidden:e,print:0===t.detail.display||3===t.detail.display})},print:t=>{this.annotationStorage.setValue(this.data.id,{print:t.detail.print})},hidden:t=>{this.container.style.visibility=t.detail.hidden?"hidden":"visible";this.annotationStorage.setValue(this.data.id,{hidden:t.detail.hidden})},focus:t=>{setTimeout((()=>t.target.focus({preventScroll:!1})),0)},userName:t=>{t.target.title=t.detalle.nombreUsuario},sololectura:t=>{t.detalle.sololectura?t.objetivo.establecerAtributo("sololectura",""):t.objetivo.eliminarAtributo("sololectura")},obligatorio:t=>{this._establecerRequerido(t.objetivo,t.detalle.obligatorio)},colorfondo:t=>{establecerColor("colorfondo","colorfondo",t)},colorrelleno:t=>{establecerColor("colorrelleno","colorfondo",t)},colorfg:t=>{establecerColor("colorfg","color",t)},colortexto:t=>{establecerColor("colortexto","color",t)},colorborder:t=>{establecerColor("colorborder","colorborder",t)},colortrazo:t=>{establecerColor("colortrazo","colorborder",t)},rotación:t=>{constante e=t.detail.rotation;this.setRotation(e);this.annotationStorage.setValue(this.data.id,{rotation:e})}})}_dispatchEventFromSandbox(t,e){const s=this._commonActions;for(const n de Object.keys(e.detail)){const i=t[n]||s[n];i&&i(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const s=this._commonActions;for(const[n,i]de Object.entries(e)){const r=s[n];si(r){r({detalle:{[n]:i},objetivo:t});eliminar e[n]}}}_createQuadrilaterals(t=!1){si(!this.data.quadPoints)devuelve null;const e=[],s=this.data.rect;para(const s de this.data.quadPoints){this.data.rect=[s[2].x,s[2].y,s[1].x,s[1].y];e.push(this._createContainer(t))}this.data.rect=s;devuelve e}_createPopup(t,e){let s=this.container;if(this.quadrilaterals){t=t||this.quadrilaterals;s=this.quadrilaterals[0]}if(!t){(t=document.createElement("div")).className="popupTriggerArea";s.append(t)}const n=new PopupElement({container:s,trigger:t,color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,hideWrapper:!0}).render();n.style.left="100%";s.append(n)}_renderQuadrilaterals(t){for(const e of this.quadrilaterals)e.className=t;return this.quadrilaterals}render(){(0,n.unreachable)("Método abstracto `AnnotationElement.render` llamado")}_getElementsByName(t,e=null){const s=[];if(this._fieldObjects){const i=this._fieldObjects[t];if(i)for(const{page:t,id:r,exportValues:a}of i){if(-1===t)continue;if(r===e)continue;const i="string"==typeof a?a:null,o=document.querySelector(`[data-element-id="${r}"]`);!o||c.has(o)?s.push({id:r,exportValue:i,domElement:o}):(0,n.warn)(`_getElementsByName - elemento no permitido: ${r}`)}return s}for(const n of document.getElementsByName(t)){const{id:t,exportValue:i}=n;t!==e&&(c.has(n)&&s.push({id:t,exportValue:i,domElement:n}))}return s}estático obtener plataforma(){const t="indefinido"!=typeof navigator?navigator.platform:"";return(0,n.shadow)(this,"platform",{isWin:t.includes("Win"),isMac:t.includes("Mac")})}}clase LinkAnnotationElement extiende AnnotationElement{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0});this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,s=document.createElement("a");s.setAttribute("id-elemento-datos",t.id);let n=!1;if(t.url){e.addLinkAttributes(s,t.url,t.newWindow);n=!0}else if(t.action){this._bindNamedAction(s,t.action);n=!0}else if(t.dest){this._bindLink(s,t.dest);n=!0}else{if(t.actions&&(t.actions.Action||t.actions["Ratón arriba"]||t.actions["Ratón Abajo"])&&this.enableScripting&&this.hasJSActions){this._bindJSAction(s,t);n=!0}if(t.resetForm){this._bindResetFormAction(s,t.resetForm);n=!0}else if(this.isTooltipOnly&&!n){this._bindLink(s,"");n=!0}}if(this.quadrilaterals)return this._renderQuadrilaterals("linkAnnotation").map(((t,e)=>{const n=0===e?s:s.cloneNode();t.append(n);return t}));this.container.className="linkAnnotation";n&&this.container.append(s);return este.contenedor}_bindLink(t,e){t.href=este.linkService.getDestinationHash(e);t.onclick=()=>{e&&este.linkService.goToDestination(e);¡devuelve!1};(e||""===e)&&(t.className="enlace interno")}_bindNamedAction(t,e){t.href=este.linkService.getAnchorUrl("");t.onclick=()=>{este.linkService.executeNamedAction(e);¡devuelve!1};t.className="enlace interno"}_bindJSAction(t,e){t.href=este.linkService.getAnchorUrl("");const s=new Map([["Acción","alcance"],["Ratón arriba","alcance"],["Ratón abajo","alcance"]]);for(const n de Object.keys(e.actions)){const i=s.get(n);i&&(t[i]=()=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:n}});return!1})}t.onclick||(t.onclick=()=>!1);t.className="internalLink"}_bindResetFormAction(t,e){const s=t.onclick;s||(t.href=this.linkService.getAnchorUrl(""));t.className="internalLink";if(this._fieldObjects)t.onclick=()=>{s&&s();const{campos:t,refs:i,include:r}=e,a=[];if(0!==t.length||0!==i.length){const e=new Set(i);for(const s de t){const t=this._fieldObjects[s]||[];for(const{id:s} de t)e.add(s)}for(const t de Object.values(this._fieldObjects))for(const s de t)e.has(s.id)===r&&a.push(s)}else for(const t de Objeto.valores(este._campoObjetos))a.push(...t);const o=este.anotacionAlmacenamiento,l=[];para(const t de a){const{id:e}=t;l.push(e);switch(t.tipo){caso"texto":{const s=t.valorpredeterminado||"";o.valorpredeterminado(e,{valor:s});break}caso"casilla de verificación":caso"botón de opción":{const s=t.valorpredeterminado===t.valoresexportados;o.valorpredeterminado(e,{valor:s});break}caso"cuadrocombinado":caso"cuadro de lista":{const s=t.valorpredeterminado||"";o.valorpredeterminado(e,{valor:s});break}predeterminado:continuar}const s=document.querySelector(`[data-element-id="${e}"]`);s&&(c.has(s)?s.dispatchEvent(new Event("resetform")):(0,n.warn)(`_bindResetFormAction - elemento no permitido: ${e}`))}this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:l,name:"ResetForm"}});return!1};else{(0,n.warn)('_bindResetFormAction - La acción "resetForm" no es compatible, asegúrese de que se proporcione el parámetro `fieldObjects`.');s||(t.onclick=()=>!1)}}}class TextAnnotationElement extiende Elemento de Anotación {constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str)})}render(){this.container.className="textAnnotation";const t=document.createElement("img");t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg";t.alt="[{{type}} Anotación]";t.dataset.l10nId="tipo_de_anotación_de_texto";t.dataset.l10nArgs=JSON.stringify({tipo:this.data.name});this.data.hasPopup||this._createPopup(t,this.data);this.container.append(t);devolver this.container}}clase WidgetAnnotationElement extiende AnnotationElement{render(){this.data.alternativeText&&(this.container.title=this.data.alternativeText);devolver this.container}_getKeyModifier(t){const{isWin:e,isMac:s}=AnnotationElement.platform;devolver e&&t.ctrlKey||s&&t.metaKey}_setEventListener(t,e,s,n){e.includes("mouse")?t.addEventListener(e,(t=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{origen:this,detalle:{id:this.data.id,nombre:s,valor:n(t),shift:t.shiftKey,modificador:this._getKeyModifier(t)}})})):t.addEventListener(e,(t=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{origen:this,detalle:{id:this.data.id,nombre:s,valor:n(t)}})}))}_setEventListeners(t,e,s){for(const[n,i]of e)("Acción"===i||this.data.actions?.[i])&&this._setEventListener(t,n,i,s)}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=null===e?"transparent":n.Util.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["izquierda","centro","derecha"],{fontColor:s}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||9,r=t.style;let a;if(this.data.multiLine){const t=Math.abs(este.dato.rect[3]-este.dato.rect[1]),e=t/(Math.round(t/(n.FACTOR_LÍNEA*i))||1);a=Math.min(i,Math.round(e/n.FACTOR_LÍNEA))}else{const t=Math.abs(este.dato.rect[3]-este.dato.rect[1]);a=Math.min(i,Math.round(t/n.FACTOR_LÍNEA))}r.fontSize=`calc(${a}px * var(--scale-factor))`;r.color=n.Util.makeHexColor(s[0],s[1],s[2]);null!==this.data.textAlignment&&(r.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required");t.setAttribute("aria-required",e)}}clase TextWidgetAnnotationElement extiende WidgetAnnotationElement{constructor(t){super(t,{isRenderable:t.renderForms||!t.data.hasAppearance&&!!t.data.valorDeCampo})}setPropertyOnSiblings(t,e,s,n){const i=this.annotationStorage;for(const r de this._getElementsByName(t.name,t.id)){r.domElement&&(r.domElement[e]=s);i.setValue(r.id,{[n]:s})}}render(){const t=this.annotationStorage,e=this.data.id;this.container.className="textWidgetAnnotation";let s=null;if(this.renderForms){const n=t.getValue(e,{value:this.data.fieldValue});let i=n.formattedValue||n.value||"";const r=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;r&&i.length>r&&(i=i.slice(0,r));const a={userValue:i,formattedValue:null,valueOnFocus:""};if(this.data.multiLine){s=document.createElement("área de texto");s.textContent=i;this.data.doNotScroll&&(s.style.overflowY="oculto")}else{s=document.createElement("entrada");s.type="texto";s.setAttribute("valor",i);this.data.doNotScroll&&(s.style.overflowX="oculto")}c.add(s);s.setAttr ibute("id-elemento-datos",e);s.disabled=this.data.readOnly;s.name=this.data.fieldName;s.tabIndex=l;this._setRequired(s,this.data.required);r&&(s.maxLength=r);s.addEventListener("entrada",(n=>{t.setValue(e,{valor:n.objetivo.valor});this.setPropertyOnSiblings(s,"valor",n.objetivo.valor,"valor")}));s.addEventListener("resetform",(t=>{constante e=this.data.defaultFieldValue??"";s.value=a.userValue=e;a.formattedValue=null}));let blurListener=t=>{const{formattedValue:e}=a;null!=e&&(t.target.value=e);t.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",(t=>{a.userValue&&(t.target.value=a.userValue);a.valueOnFocus=t.target.value}));s.addEventListener("actualizar desde sandbox",(s=>{const n={valor(es){a.valorUsuario=s.detalle.valor??"";t.valorEstablecer(e,{valor:a.valorUsuario.toString()});s.destino.valor=a.valorUsuario},valorFormatado(s){const{valorFormatado:n}=s.detalle;a.valorFormatado=n;null!=n&&s.destino!==documento.elementoActivo&&(s.destino. valor=n);t.setValue(e,{formattedValue:n})},selRange(t){t.target.setSelectionRange(...t.detail.selRange)},charLimit:s=>{const{charLimit:n}=s.detail,{target:i}=s;if(0===n){i.removeAttribute("longitudmáxima");return}i.setAttribute("longitudmáxima",n);let r=a.userValue;if(r&&!(r.length<=n)){r=r.slice(0,n);i.value=a.userValue=r;t.setValue(e,{value:r});this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:r,willCommit:!0,commitKey:1,selStart:i.selectionStart,selEnd:i.selectionEnd}})}}};this._dispatchEventFromSandbox(n,s)}));s.addEventListener("keydown",(t=>{let s=-1;"Escape"===t.key?s=0:"Enter"===t.key?s=2:"Tab"===t.key&&(s=3);if(-1===s)return;const{value:n}=t.target;if(a.valueOnFocus!==n){a.userValue=n;this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{origen:this,detalle:{id:e,nombre:"Pulsación de tecla",valor:n,willCommit:!0,commitKey:s,selStart:t.target.selectionStart,selEnd:t.target.selectionEnd}})}}));const n=blurListener;blurListener=null;s.addEventListener("blur",(t=>{const{valor:s}=t.target;a.userValue=s;this._mouseState.isDown&&a.valueOnFocus!==s&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{origen:this,detalle:{id:e,nombre:"Pulsación de tecla ", valor: s, se confirmará: ! 0, clave de confirmación: 1, selStart: t. objetivo. inicio de selección, selEnd: t. objetivo. fin de selección}}); n(t)})); este. datos. acciones?. pulsación de tecla&&s. agregarEventListener("antes de la entrada",(t => {const{datos: s, objetivo: n} = t, {valor: i, inicio de selección: r, fin de selección: a} = n; dejar o = r, l = a; cambiar(t. tipo de entrada) {caso "eliminarPalabraAl Revés": {constante t = i. substring(0, r). match(/\w*[^\w]*$/); t && (o-=t[0]. length); break}caso "eliminarPalabraAdelante": {constante t=i.substring(r).match(/^[^\w]*\w*/);t&&(l+=t[0].length);break}case"deleteContentBackward":r===a&&(o-=1);break;case"deleteContentForward":r===a&&(l+=1)}t.preventDefault();this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{origen:this,detail:{id:e,nombre:"Pulsación de tecla",valor:i,cambio:s||"",willCommit:!1,selStart:o,selEnd:l}})}));this._setEventListeners(s,[["focus","Enfoque"],["blur","Desenfoque"],["mousedown","Ratón presionado"],["mouseenter","Introducción del ratón"],["mouseleave","Ratón Salir"],["mouseup","Ratón arriba"]],(t=>t.target.value))}blurListener&&s.addEventListener("blur",blurListener);if(this.data.comb){const t=(this.data.rect[2]-this.data.rect[0])/r;s.classList.add("comb");s.style.letterSpacing=`calc(${t}px * var(--scale-factor) - 1ch)`}}else{s=document.createElement("div");s.textContent=this.data.fieldValue;s.style.verticalAlign="middle";s.style.display="table-cell"}this._setTextStyle(s);this._setBackgroundColor(s);this._setDefaultPropertiesFromJS(s);this.container.append(s);return este.contenedor}}clase CheckboxWidgetAnnotationElement extiende WidgetAnnotationElement{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,s=e.id;let n=t.getValue(s,{valor:e.exportValue===e.fieldValue}).value;if("string"==typeof n){n="Off"!==n;t.setValue(s,{valor:n})}este.contenedor.className="buttonWidgetAnnotation checkBox";const i=document.createElement("entrada");c.add(i);i.setAttribute("id-elemento-datos",s);i.disabled=e.readOnly;this._setRequired(i,this.data.required);i.type="casilla-de-verificación";i.name=e.fieldName;n&&i.setAttribute("marcado",!0);i.setAttribute("valor-exportación",e.valor-exportación);i.tabIndex=l;i.addEventListener("cambio",(n=>{const{nombre:i,comprobado:r}=n.objetivo;para(const n de esto._getElementsByName(i,s)){const s=r&&n.valorExportar===e.valorExportar;n.elementoDom&&(n.elementoDom.comprobado=s);t.valorEstablecer(n.id,{valor:s})}t.valorEstablecer(s,{valor:r})}));i.addEventListener("reiniciar formulario",(t=>{const s=e.valorDeCampoPredeterminado||"Desactivado";t.objetivo.comprobado=s===e.valorExportar}));si(esto.habilitarScripting&&esto.tieneJSActions){i.addEventListener("actualizardesdeSandbox",(e=>{const n={value(e){e.target.checked="Desactivado"!==e.detail.value;t.setValue(s,{value:e.target.checked})}};this._dispatchEventFromSandbox(n,e)}));this._setEventListeners(i,[["cambio","Validar"],["cambio","Acción"],["enfoque","Enfoque"],["desenfoque","Desenfoque"],["mousedown","Ratón abajo"],["mouseenter","Ratón entrado"],["mouseleave","Salida del ratón"],["mouseup","Ratón arriba"]],(t=>t.target.checked))}this._setBackgroundColor(i);this._setDefaultPropertiesFromJS(i);this.container.append(i);devuelve this.container}}clase RadioButtonWidgetAnnotationElement extiende Elemento de anotación de widget {constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const t=this.annotationStorage,e=this.data,s=e.id;let n=t.getValue(s,{value:e.fieldValue===e.buttonValue}).value;if("string"==typeof n){n=n!==e.buttonValue;t.setValue(s,{value:n})}const i=document.createElement("entrada");c.add(i);i.setAttribute("id-elemento-datos",s);i.disabled=e.readOnly;this._setRequired(i,this.data.required);i.type="radio";i.name=e.fieldName;n&&i.setAttribute("marcado",!0);i.tabIndex=l;i.addEventListener("cambio",(e=>{const{nombre:n,marcado:i}=e.target;for(const e de this._getElementsByName(n,s))t.setValue(e.id,{valor:!1});t.setValue(s,{valor:i})}));i.addEventListener("resetform",(t=>{const s=e.defaultFieldValue;t.target.checked=null!=s&&s===e.buttonValue}));if(this.enableScripting&&this.hasJSActions){const n=e.buttonValue;i.addEventListener("actualizar desde sandbox",(e=>{const i={valor:e=>{const i=n===e.detail.value;for(const n de this._getElementsByName(e.target.name)){const e=i&&n.id===s;n.domElement&&(n.domElement.checked=e);t.setValue(n.id,{value:e})}}};this._dispatchEventFromSandbox(i,e)}));this._setEventListeners(i,[["cambio","Validar"],["cambio","Acción"],["enfoque","Enfoque"],["desenfoque","Desenfoque"],["mousedown","Ratón abajo"],["mouseenter","Ratón entrado"],["mouseleave","Salida del ratón"],["mouseup","Ratón arriba"]],(t=>t.target.checked))}this._setBackgroundColor(i);this._setDefaultPropertiesFromJS(i);this.container.append(i);devuelve esto.contenedor}}clase PushButtonWidgetAnnotationElement extiende LinkAnnotationElement{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.className="buttonWidgetAnnotation pushButton";this.data.alternativeText&&(t.title=this.data.alternativeText);const e=t.lastChild;if(this.enableScripting&&this.hasJSActions&&e){this._setDefaultPropertiesFromJS(e);e.addEventListener("updatefromsandbox",(t=>{this._dispatchEventFromSandbox({},t)}))}devolver t}}clase ChoiceWidgetAnnotationElement extiende WidgetAnnotationElement {constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const t=this.annotationStorage,e=this.data.id,s=t.getValue(e,{value:this.data.fieldValue}),n=document.createElement("seleccionar");c.add(n);n.setAttribute("data-element-id",e);n.disabled=this.data.readOnly;this._setRequired(n,this.data.required);n.name=this.data.fieldName;n.tabIndex=l;let i=este.combodedatos&&este.combodedatos.opciones.longitud>0;si(!este.combodedatos){n.tamaño=este.combodedatos.opciones.longitud;este.combodedatos.multiSelect&&(n.múltiple=!0)}n.addEventListener("resetform",(t=>{const e=este.combodedatos.valordecampopredeterminado;para(const t de n.opciones)t.seleccionado=t.valor===e}));para(const t de este.combodedatos.opciones){const e=documento.createElement("opción");e.contenidodetexto=t.valorparamostrar;e.valor=t.valordeexportación;si(s.valor.incluye(t.valordeexportación)){e.setAttribute("seleccionado",!0);i=!1}n.append(e)}let r=null;si(i){const t=document.createElement("opción");t.value=" ";t.setAttribute("oculto",!0);t.setAttribute("seleccionado",!0);n.prepend(t);r=()=>{t.remove();n.removeEventListener("entrada",r);r=null};n.addEventListener("entrada",r)}const getValue=(t,e)=>{const s=e?"value":"textContent",n=t.target.options;return t.target.multiple?Array.prototype.filter.call(n,(t=>t.seleccionado)).map((t=>t[s])):-1===n.selectedIndex?null:n[n.selectedIndex][s]},getItems=t=>{const e=t.target.options;devolver Array.prototype.map.call(e,(t=>({displayValue:t.textContent,exportValue:t.value})))};if(this.enableScripting&&this.hasJSActions){n.addEventListener("updatefromsandbox",(s=>{const i={value(s){r?.();const i=s.detail.value,a=new Set(Array.isArray(i)?i:[i]);for(const t of n.options)t.selected=a.has(t.value);t.setValue(e,{value:getValue(s,!0)})},multipleSelectFecha de modificación: este.datos.fechademodificación, objetocontenido: este.datos.objetivocontenido, textoenriquecido: este.datos.textoenriquecido}),i=esta.página,r=n.Util.normalizeRect([este.datos.parentRect[0],i.vista[3]-este.datos.parentRect[1]+i.vista[1],este.datos.parentRect[2],i.vista[3]-este.datos a.parentRect[3]+i.view[1]]),a=r[0]+this.data.parentRect[2]-this.data.parentRect[0],o=r[1],[l,c,h,d]=this.viewport.viewBox,u=hl,p=dc;this.container.style.left=100*(al)/u+"%";this.container.style.top=100*(oc)/p+"%";this.container.append(s.render());return este.contenedor}}clase PopupElement{constructor(t){este.contenedor=t.contenedor;este.disparador=t.disparador;este.color=t.color;este.objetotítulo=t.objetotítulo;este.fechamodificación=t.fechamodificación;este.objetocontenido=t.objetocontenido;este.textoenriquecido=t.textoenriquecido;este.hideWrapper=t.hideWrapper||!1;este.fijado=!1}render(){const t=documento.createElement("div");t.nombreclase="popupWrapper";este.hideElement=este.hideWrapper?t:este.contenedor;este.hideElement.oculto=!0;const e=documento.createElement("div");e.nombreclase="popup";const s=este.color;si(s){const t=.7*(255-s[0])+s[0],i=.7*(255-s[1])+s[1],r=.7*(255-s[2])+s[2];e.style.backgroundColor=n.Util.makeHexColor(0|t,0|i,0|r)}const r=document.createElement("h1");r.dir=this.titleObj.dir;r.textContent=this.titleObj.str;e.append(r);const a=i.PDFDateString.toDateObject(this.modificationDate);if(a){const t=document.createElement("span");t.className="popupDate";t.textContent="{{date}}, {{tiempo}}";t.dataset.l10nId="cadena_de_fecha_de_anotación";t.dataset.l10nArgs=JSON.stringify({fecha:a.toLocaleDateString(),hora:a.toLocaleTimeString()});e.append(t)}if(!this.richText?.str||this.contentsObj?.str&&this.contentsObj.str!==this.richText.str){const t=this._formatContents(this.contentsObj);e.append(t)}else{o.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:e});e.lastChild.className="richText popupContent"}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const t de este.trigger){t.addEventListener("clic",this._toggle.bind(this));t.addEventListener("pasar el ratón por encima",this._show.bind(this,!1));t.addEventListener("pasar el ratón por fuera",this._hide.bind(this,!1))}e.addEventListener("clic",this._hide.bind(this,!0));t.append(e);devolver t}_formatContents({str:t,dir:e}){const s=document.createElement("p");s.className="popupContent";s.dir=e;const n=t.split(/(?:\r\n?|\n)/);for(let t=0,e=n.length;t<e;++t){const i=n[t];s.append(document.createTextNode(i));t<e-1&&s.append(document.createElement("br"))}return s}_toggle(){este.pinned?this._hide(!0):este._show(!0)}_show(t=!1){t&&(este.pinned=!0);if(este.hideElement.hidden){este.hideElement.hidden=!1;este.container.style.zIndex=parseInt(este.container.style.zIndex)+1e3}}_hide(t=!0){t&&(este.pinned=!1);if(!este.hideElement.hidden&&!este.pinned){este.hideElement.oculto=!0;este.contenedor.estilo.zIndex=parseInt(este.contenedor.estilo.zIndex)-1e3}}}clase FreeTextAnnotationElement extiende AnnotationElement{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0});este.textContent=t.data.textContent}render(){este.contenedor.className="freeTextAnnotation";si(este.textContent){const t=document.createElement("div");t.className="annotationTextContent";t.setAttribute("rol","comentario");para(const e de este.textContent){const s=document.createElement("span");s.textContent=e;t.append(s)}this.container.append(t)}this.data.hasPopup||this._createPopup(null,this.data);devuelve this.container}}clase LineAnnotationElement extiende AnnotationElement{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const t=this.data,{ancho:e,alto:s}=getRectDims(t.rect),n=this.svgFactory.create(e,s,!0),i=this.svgFactory.createElement("svg:line");i.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]);i.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]);i.setAttribute("x2",t.rect[2]-t.li neCoordinates[2]); i.setAttribute("y2", t.rect[3]-t.lineCoordinates[3]); i.setAttribute("ancho-del-trazo", t.borderStyle.width||1); i.setAttribute("trazo","transparente"); i.setAttribute("relleno","transparente"); n.append(i); this.container.append(n); this._createPopup(i,t); devuelve this.container}}clase SquareAnnotationElement extiende AnnotationElement{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const t=this.data,{ancho:e,alto:s}=getRectDims(t.rect),n=this.svgFactory.create(e,s,!0),i=t.borderStyle.width,r=this.svgFactory.createElement("svg:rect");r.setAttribute("x",i/2);r.setAttribute("y",i/2);r.setAttribute("ancho",ei);r.setAttribute("alto",si);r.setAttribute("ancho-del-trazo",i||1);r.setAttribute("trazo","transparente");r.setAttribute("relleno","transparente");n.append(r);this.container.append(n);this._createPopup(r,t);devuelve this.container}}clase CircleAnnotationElement extiende Elemento de Anotación {constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const t=this.data,{ancho:e,alto:s}=getRectDims(t.rect),n=this.svgFactory.create(e,s,!0),i=t.borderStyle.width,r=this.svgFactory.createElement("svg:ellipse");r.setAttribute("cx",e/2);r.setAttribute("cy",s/2);r.setAttribute("rx",e/2-i/2);r.setAttribute("ry",s/2-i/2);r.setAttribute("ancho-de-trazo",i||1);r.setAttribute("trazo","transparente");r.setAttribute("relleno","transparente");n.append(r);this.container.append(n);this._createPopup(r,t);devuelve this.container}}clase PolylineAnnotationElement extiende ElementoAnotación{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0});this.containerClassName="polylineAnnotation";this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const t=this.data,{ancho:e,alto:s}=getRectDims(t.rect),n=this.svgFactory.create(e,s,!0);let i=[];for(const e of t.vertices){const s=ex-t.rect[0],n=t.rect[3]-ey;i.push(s+","+n)}i=i.join(" ");const r=this.svgFactory.createElement(this.svgElementName);r.setAttribute("puntos",i);r.setAttribute("ancho-de-trazo",t.borderStyle.width||1);r.setAttribute("trazo","transparente");r.setAttribute("relleno","transparente");n.append(r);this.container.append(n);this._createPopup(r,t);devuelve this.container}}clase PolygonAnnotationElement extiende PolylineAnnotationElement{constructor(t){super(t);this.containerClassName="polygonAnnotation";this.svgElementName="svg:polygon"}}clase CaretAnnotationElement extiende AnnotationElement{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="caretAnnotation";this.data.hasPopup||this._createPopup(null,this.data);devuelve this.container}}clase InkAnnotationElement extiende ElementoAnotación{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0});this.containerClassName="inkAnnotation";this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const t=this.data,{ancho:e,alto:s}=getRectDims(t.rect),n=this.svgFactory.create(e,s,!0);for(const e de t.inkLists){let s=[];for(const n de e){const e=nx-t.rect[0],i=t.rect[3]-ny;s.push(`${e},${i}`)}s=s.join(" ");const i=this.svgFactory.createElement(this.svgElementName);i.setAttribute("puntos",s);i.setAttribute("ancho-del-trazo",t.borderStyle.width||1);i.setAttribute("trazo","transparente");i.setAttribute("relleno","transparente");this._createPopup(i,t);n.append(i)}this.container.append(n);devuelve this.container}}clase HighlightAnnotationElement extiende AnnotationElement{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){this.data.hasPopup||this._createPopup(null,this.data);if(this.quadrilaterals)devuelve this._renderQuadrilaterals("highlightAnnotation");this.container.className="highlightAnnotation";devuelve this.container}}clase UnderlineAnnotationElement extiende AnnotationElement{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){this.data.hasPopup||this._createPopup(null,this.data);if(this.quadrilaterals)devuelve this._renderQuadrilaterals("underlineAnnotation"); this.container.className="underlineAnnotation"; return this.container}}clase SquigglyAnnotationElement extiende AnnotationElement{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){this.data.hasPopup||this._createPopup(null,this.data);if(this.quadrilaterals)return this._renderQuadrilaterals("squigglyAnnotation"); this.container.className="squigglyAnnotation"; return this.container}}clase StrikeOutAnnotationElement extiende AnnotationElement{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){this.data.hasPopup||this._createPopup(null,this.data);if(this.quadrilaterals)return this._renderQuadrilaterals("strikeoutAnnotation");this.container.className="strikeoutAnnotation";return this.container}}clase StampAnnotationElement extiende ElementoDeAnotación{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0})}render(){este.contenedor.className="stampAnnotation";este.data.hasPopup||este._createPopup(null,este.data);devuelve este.contenedor}}clase FileAttachmentAnnotationElement extiende Elemento de anotación {constructor(t){super(t,{isRenderable:!0});const{nombre de archivo:e,contenido:s}=this.data.file;this.filename=(0,i.getFilenameFromUrl)(e);this.content=s;this.linkService.eventBus?.dispatch("anotación de archivo adjunto",{origen:this,nombre de archivo:e,contenido:s})}render(){this.container.className="anotación de archivo adjunto";const t=document.createElement("div");t.className="popupTriggerArea";t.addEventListener("dblclick",this._download.bind(this));!this.data.hasPopup&&(this.data.titleObj?.str||this.data.contentsObj?.str||this.data.richText)&&this._createPopup(t,this.data);this.container.append(t);devuelve this.container}_download(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}clase AnnotationLayer{estático#de(t,e,s,n){constante r=t.firstChild||t;r.id=`${i.AnnotationPrefix}${e}`;s.append(t);n?.moveElementInDOM(s,t,r,!1)}renderizado estático(t){const{anotaciones:e,div:s,viewport:a,accessibilityManager:o}=t;this.#ue(s,a); sea l=0; para (const c de e){si (c.annotationType!==n.AnnotationType.POPUP){const{ancho:t,alto:e}=getRectDims(c.rect);si(t<=0||e<=0)continúa}const e=AnnotationElementFactory.create({datos:c,capa:s,página:t.página,ventana gráfica:a,serviciodeenlace:t.serviciodeenlace,gestordedescargas:t.gestordedescargas,rutaDeRecursosDeImagen:t.rutaDeRecursosDeImagen||"",renderForms:!1!==t.renderForms,svgFactory:new i.DOMSVGFactory,almacenamientodeanotaciones:t.almacenamientodeanotaciones||new r.AnnotationStorage,enableScripting:t.enableScripting,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,mouseState:t.mouseState||{isDown:!1}});if(e.isRenderable){const t=e.render();c.hidden&&(t.style.visibility="hidden");if(Array.isArray(t))for(const e of t){e.style.zIndex=l++;AnnotationLayer.#de(e,c.id,s,o)}else{t.style.zIndex=l++;e instanceofPopupAnnotationElement?s.prepend(t):AnnotationLayer.#de(t,c.id,s,o)}}}this.#pe(s,t.annotationCanvasMap)}static update(t){const{annotationCanvasMap:e,div:s,viewport:n}=t;this.#ue(s,n);this.#pe(s,e);s.hidden=!1}static#ue(t,{ancho:e,alto:s,rotación:n}){const{style:i}=t,r=n%180!=0,a=Math.floor(e)+"px",o=Math.floor(s)+"px";i.width=r?o:a;i.height=r?a:o;t.setAttribute("data-main-rotation",n)}static#pe(t,e){if(e){for(const[s,n]of e){const e=t.querySelector(`[data-annotation-id="${s}"]`);if(!e)continue;const{firstChild:i}=e;i?"CANVAS"===i.nodeName?i.replaceWith(n):i.before(n):e.append(n)}e.clear()}}}e.AnnotationLayer=AnnotationLayer},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});e.ColorConverters=void 0;function makeColorComp(t){return Math.floor(255*Math.max(0,Math.min(1,t))).toString(16).padStart(2,"0")}e.ColorConverters=class ColorConverters{static CMYK_G([t,e,s,n]){devuelve["G",1-Math.min(1,.3*t+.59*s+.11*e+n)]}estático G_CMYK([t]){devuelve["CMYK",0,0,0,1-t]}estático G_RGB([t]){devuelve["RGB",t,t,t]}estático G_HTML([t]){constante e=makeColorComp(t);devuelve`#${e}${e}${e}`}estático RGB_G([t,e,s]){devuelve["G",.3*t+.59*e+.11*s]}estático RGB_HTML([t,e,s]){devuelve`#${makeColorComp(t)}${makeColorComp(e)}${makeColorComp(s)}`}estático T_HTML(){devuelve "#00000000"}estático CMYK_RGB([t,e,s,n]){devuelve["RGB",1-Math.min(1,t+n),1-Math.min(1,s+n),1-Math.min(1,e+n)]}estático CMYK_HTML(t){constante e=this.CMYK_RGB(t).slice(1);devuelve this.RGB_HTML(e)}estático RGB_CMYK([t,e,s]){constante n=1-t,i=1-e,r=1-s;devuelve["CMYK",n,i,r,Math.min(n,i,r)]}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{valor:!0});e.XfaLayer=void 0;var n=s(20);e.XfaLayer=class XfaLayer{static setupStorage(t,e,s,n,i){const r=n.getValue(e,{valor:null});switch(s.name){case"textarea":null!==r.value&&(t.textContent=r.value);if("print"===i)break;t.addEventListener("input",(t=>{n.setValue(e,{valor:t.target.value})}));break;case"input":if("radio"===s.attributes.type||"checkbox"===s.attributes.type){r.value===s.atributos.xfaOn?t.setAttribute("marcado",!0):r.valor===s.attributes.xfaOff&&t.removeAttribute("marcado");if("imprimir"===i)break;t.addEventListener("cambio",(t=>{n.setValue(e,{valor:t.target.marcado?t.target.getAttribute("xfaOn"):t.target.getAttribute("xfaOff")})}))}else{null!==r.valor&&t.setAttribute("valor",r.valor);if("imprimir"===i)break;t.addEventListener("entrada",(t=>{n.setValue(e,{valor:t.target.valor})}))}break;case"seleccionar":if(null!==r.valor)for(const t de s.children)t.attributes.value===r.value&&(t.attributes.selected=!0);t.addEventListener("entrada",(t=>{const s=t.target.options,i=-1===s.selectedIndex?"":s[s.selectedIndex].value;n.setValue(e,{value:i})}))}}static setAttributes({html:t,element:e,storage:s=null,intent:n,linkService:i}){const{attributes:r}=e,a=t instanceof HTMLAnchorElement;"radio"===r.type&&(r.name=`${r.name}-${n}`);for(const[e,s]of Objeto.entries(r))if(null!=s)switch(e){case"class":s.length&&t.setAttribute(e,s.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",s);break;case"style":Object.assign(t.style,s);break;case"textContent":t.textContent=s;break;default:(!a||"href"!==e&&"newWindow"!==e)&&t.setAttribute(e,s)}a&&i.addLinkAttributes(t,r.href,r.newWindow);s&&r.dataId&&this.setupStorage(t,r.dataId,e,s)}static render(t){constante e=t.annotationStorage,s=t.linkService,i=t.xfaHtml,r=t.intent||"display",a=document.createElement(i.name);i.attributes&&this.setAttributes({html:a,element:i,intent:r,linkService:s});const o=[[i,-1,a]],l=t.div;l.append(a);if(t.viewport){const e=`matrix(${t.viewport.transform.join(",")})`;l.style.transform=e}"richText"!==r&&l.setAttribute("class","xfaLayer xfaFont");const c=[];para(;o.longitud>0;){const[t,i,a]=o.en(-1);si(i+1===t.hijos.longitud){o.pop();continuar}const l=t.hijos[++o.en(-1)[1]];si(null===l)continuar;const{nombre:h}=l;si("#texto"===h){const t=documento.createTextNode(l.valor);c.push(t);a.append(t);continuar}dejar d;d=l?.attributes?.xmlns?document.createElementNS(l.attributes.xmlns,h):document.createElement(h);a.append(d);l.attributes&&this.setAttributes({html:d,element:l,storage:e,intent:r,linkService:s});if(l.children&&l.children.length>0)o.push([l,-1,d]);else if(l.value){const t=document.createTextNode(l.value);n.XfaText.shouldBuildText(h)&&c.push(t);d.append(t)}}for(const t of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))t.setAttribute("readOnly",!0);return{textDivs:c}}static actualizar(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e;t.div.hidden=!1}}},(t,e,s)=>{Objeto.defineProperty(e,"__esModule",{valor:!0}); e.TextLayerRenderTask=void 0; e.renderTextLayer=función renderTextLayer(t){const e=new TextLayerRenderTask({textContent:t.textContent,textContentStream:t.textContentStream,container:t.container,viewport:t.viewport,textDivs:t.textDivs,textContentItemsStr:t.textContentItemsStr,enhanceTextSelection:t.enhanceTextSelection}); e._render(t.timeout); return e};var n=s(1),i=s(8);const r=30,a=new Map,o=/^\s+$/g;función appendText(t,e,s,i){const l=document.createElement("span"),c=t._enhanceTextSelection?{ángulo:0,ancho del lienzo:0,tieneTexto:""!==e.str,tieneEOL:e.hasEOL,transformaciónoriginal:null,rellenoInferior:0,rellenoIzquierdo:0,rellenoDerecho:0,rellenoSuperior:0,escala:1,tamañodefuente:0}:{ángulo:0,anchodel lienzo:0,tieneTexto:""!==e.str,tieneEOL:e.hasEOL,tamañodefuente:0};t._textDivs.push(l);const h=n.Util.transform(t._viewport.transform,e.transform);let d=Math.atan2(h[1],h[0]);const u=s[e.nombredefuente];u.vertical&&(d+=Math.PI/2);const p=Math.hypot(h[2],h[3]),g=p*función obtenerAscenso(t,e){const s=a.get(t);si(s)devuelve s;e.guardar();e.fuente=`30px ${t}`;const n=e.measureText("");let i=n.fontBoundingBoxAscent,o=Math.abs(n.fontBoundingBoxDescent);si(i){e.restore();const s=i/(i+o);a.set(t,s);devuelve s}e.strokeStyle="rojo";e.clearRect(0,0,r,r);e.strokeText("g",0,0);let l=e.getImageData(0,0,r,r).data;o=0;para(let t=l.length-1-3;t>=0;t-=4)si(l[t]>0){o=Math.ceil(t/4/r);break}e.clearRect(0,0,r,r);e.strokeText("A",0,r);l=e.getImageData(0,0,r,r).data;i=0;para(let t=0,e=l.length;t<e;t+=4)si(l[t]>0){i=r-Math.floor(t/4/r);break}e.restore();si(i){const e=i/(i+o);a.set(t,e);return e}a.set(t,.8);return.8}(u.fontFamily,i);let f,m;si(0===d){f=h[4];m=h[5]-g}sino{f=h[4]+g*Math.sin(d);m=h[5]-g*Math.cos(d)}l.style.left=`${f}px`;l.style.top=`${m}px`;l.style.fontSize=`${p}px`;l.style.fontFamily=u.fontFamily;c.fontSize=p;l.setAttribute("rol","presentación");l.textContent=e.str;l.dir=e.dir;t._fontInspectorEnabled&&(l.dataset.fontName=e.fontName);0!==d&&(c.angle=d*(180/Math.PI));let b=!1;si(e.str.length>1||t._enhanceTextSelection&&o.test(e.str))b=!0;sino si(" "!==e.str&&e.transform[0]!==e.transform[3]){constante t=Math.abs(e.transform[0]),s=Math.abs(e.transform[3]);t!==s&&Math.max(t,s)/Math.min(t,s)>1.5&&(b=!0)}b&&(u.vertical?c.canvasWidth=e.height*t._viewport.scale:c.canvasWidth=e.width*t._viewport.scale);t._textDivProperties.set(l,c);t._textContentStream&&t._layoutText(l);if(t._enhanceTextSelection&&c.hasText){let s=1,i=0;if(0!==d){s=Math.cos(d);i=Math.sin(d)}const r=(u.vertical?e.alto:e.ancho)*t._viewport.scale,a=p;let o,c;if(0!==d){o=[s,i,-i,s,f,m];c=n.Util.getAxialAlignedBoundingBox([0,0,r,a],o)}else c=[f,m,f+r,m+a];t._bounds.push({izquierda:c[0],arriba:c[1],derecha:c[2],abajo:c[3],div:l,tamaño:[r,a],m:o})}}función render(t){if(t._canceled)return;const e=t._textDivs,s=t._capability,n=e.longitud; si (n > 1e5){t._renderingDone=!0;s.resolve()} de lo contrario{si (!t._textContentStream) para (sea s = 0; s < n; s++) t._layoutText(e[s]); t._renderingDone=!0; s.resolve()}} función findPositiveMin(t,e,s){sea n = 0; para (sea i = 0; i < s; i++){const s = t [e++]; s > 0 y n (n = n? Math. min (s,n): s)} devolver n} función expandir (t){const e = t._límites, s = t._ventana gráfica, i = función expandirLímites(t,e,s){const n=s.map((función(t,e){devolver{x1:t.izquierda,y1:t.arriba,x2:t.derecha,y2:t.abajo,índice:e,x1Nuevo:void 0,x2Nuevo:void 0}}));expandBoundsLTR(t,n);const i=new Array(s.length);para(const t de n){const e=t.índice;i[e]={izquierda:t.x1Nuevo,arriba:0,derecha:t.x2Nuevo,abajo:0}}s.map((función(e,s){const r=i[s],a=n[s];a.x1=e.arriba;a.y1=tr.derecha;a.x2=e.abajo;a.y2=tr.izquierda;a.índice=s;a.x1Nuevo=void 0;a.x2Nuevo=void 0}));expandBoundsLTR(e,n);para(const t de n){const e=t.index;i[e].top=t.x1New;i[e].bottom=t.x2New}devolver i}(s.width,s.height,e);para(sea s=0;s<i.length;s++){const r=e[s].div,a=t._textDivProperties.get(r);si(0===a.angle){a.paddingLeft=e[s].left-i[s].left;a.paddingTop=e[s].top-i[s].top;a.paddingRight=i[s].right-e[s].right;a.paddingBottom=i[s].bottom-e[s].bottom;t._textDivProperties.set(r,a);continuar}const o=i[s],l=e[s],c=lm,h=c[0],d=c[1],u=[[0,0],[0,l.tamaño[1]],[l.tamaño[0],0],l.tamaño],p=new Float64Array(64);for(let t=0,e=u.length;t<e;t++){constante e=n.Util.applyTransform(u[t],c);p[t+0]=h&&(o.izquierda-e[0])/h;p[t+4]=d&&(o.arriba-e[1])/d;p[t+8]=h&&(o.derecha-e[0])/h;p[t+12]=d&&(o.abajo-e[1])/d;p[t+16]=d&&(o.izquierda-e[0])/-d;p[t+20]=h&&(o.arriba-e[1])/h;p[t+24]=d&&(o.derecha-e[0])/-d;p[t+28]=h&&(o.abajo m-e[1])/h;p[t+32]=h&&(o.izquierda-e[0])/-h;p[t+36]=d&&(o.arriba-e[1])/-d;p[t+40]=h&&(o.derecha-e[0])/-h;p[t+44]=d&&(o.abajo-e[1])/-d;p[t+48]=d&&(o.izquierda-e[0])/d;p[t+52]=h&&(o.arriba-e[1])/-h;p[t+56]=d&&(o.derecha-e[0])/d;p[t+60]=h&&(o.abajo-e[1])/-h}const g=1+Math.min(Math.abs(h),Math.abs(d));a.paddingLeft=findPositiveMin(p,32,16)/g;a.paddingTop=findPositiveMin(p,48,16)/g;a.paddingRight=findPositiveMin(p,0,16)/g;a.paddingBottom=findPositiveMin(p,16,16)/g;t._textDivProperties.set(r,a)}}función expandBoundsLTR(t,e){e.sort((función(t,e){devuelve t.x1-e.x1||t.índice-e.índice}));constante s=[{inicio:-1/0,fin:1/0,límite:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,índice:-1,x1Nuevo:0,x2Nuevo:0}}];para(const t de e){sea e=0;para(;e<s.length&&s[e].end<=t.y1;)e++;sea n,i,r=s.length-1;para(;r>=0&&s[r].inicio>=t.y2;)r--;sea a,o,l=-1/0;para(a=e;a<=r;a++){n=s[a];i=n.límite;sea e;e=i.x2>t.x1?i.index>t.index?i.x1Nuevo:t.x1:void 0===i.x2Nuevo?(i.x2+t.x1)/2:i.x2Nuevo;e>l&&(l=e)}t.x1Nuevo=l;para(a=e;a<=r;a++){n=s[a];i=n.límite;vacío 0===i.x2Nuevo?i.x2>t.x1?i.índice>t.índice&&(i.x2Nuevo=i.x2):i.x2Nuevo=l:i.x2Nuevo>l&&(i.x2Nuevo=Math.max(l,i.x2))}const c=[];sea h=nulo;para(a=e;a<=r;a++){n=s[a];i=n.límite;const e=i.x2>t.x2?i:t;si(h===e)c.at(-1).end=n.end;sino{c.push({inicio:n.inicio,fin:n.fin,límite:e});h=e}}si(s[e].inicio<t.y1){c[0].inicio=t.y1;c.desplazar({inicio:s[e].inicio,fin:t.y1,límite:s[e].límite})}si(t.y2<s[r].final){c.en(-1).final=t.y2;c.push({inicio:t.y2,final:s[r].final,límite:s[r].final})}para(a=e;a<=r;a++){n=s[a];i=n.límite;si(void 0!==i.x2New)continuar;dejar t=!1;para(o=e-1;!t&&o>=0&&s[o].inicio>=i.y1;o--)t=s[o].límite===i;para(o=r+1;!t&&o<s.longitud&&s[o].fin<=i.y2;o++)t=s[o].límite===i;para(o=0;!t&&o<c.longitud;o++)t=c[o].límite===i;t||(i.x2New=l)}Array.prototype.splice.apply(s,[e,r-e+1,...c])}para(const e de s){const s=e.límite;void 0===s.x2New&&(s.x2New=Math.max(t,s.x2))}}clase TextLayerRenderTask{constructor({textContent:t,textContentStream:e,container:s,viewport:r,textDivs:a,textContentItemsStr:o,enhanceTextSelection:l}){l&&(0,i.deprecated)("La funcionalidad `enhanceTextSelection` se eliminará en el futuro."); este._textContent=t; este._textContentStream=e; este._container=s; este._document=s.ownerDocument; este._viewport=r; este._textDivs=a||[]; este._textContentItemsStr=o||[]; este._enhanceTextSelection=!!l; este._fontInspectorEnabled=!!globalThis.FontInspector?.enabled; este._reader=null; este._layoutTextLastFontSize=null; este._layoutTextLastFontFamily=null; este._layoutTextCtx=null; este._textDivProperties=new MapaDébil;this._renderingDone=!1;this._canceled=!1;this._capability=(0,n.createPromiseCapability)();this._renderTimer=null;this._bounds=[];this._devicePixelRatio=globalThis.devicePixelRatio||1;this._capability.promise.finally((()=>{this._enhanceTextSelection||(this._textDivProperties=null);if(this._layoutTextCtx){this._layoutTextCtx.canvas.width=0;this._layoutTextCtx.canvas.height=0;this._layoutTextCtx=null}})).catch((()=>{}))}obtener promesa(){return this._capability.promise}cancel(){this._canceled=!0;if(this._reader){this._reader.cancel(new n.AbortException("Tarea de TextLayer cancelada.")).catch((()=>{}));this._reader=null}if(null!==this._renderTimer){clearTimeout(this._renderTimer);this._renderTimer=null}this._capability.reject(new Error("Tarea de TextLayer cancelada."))}_processItems(t,e){for(let s=0,n=t.length;s<n;s++)if(void 0!==t[s].str){this._textContentItemsStr.push(t[s].str);appendText(this,t[s],e,this._layoutTextCtx)}else if("beginMarkedContentProps"===t[s].type||"beginMarkedContent"===t[s].type){const e=this._container;this._container=document.createElement("span");this._container.classList.add("markedContent");null!==t[s].id&&this._container.setAttribute("id",`${t[s].id}`);e.append(this._container)}else"endMarkedContent"===t[s].type&&(this._container=this._container.parentNode)}_layoutText(t){const e=this._textDivProperties.get(t);let s="";si(0!==e.canvasWidth&&e.hasText){const{fontFamily:n}=t.style,{fontSize:i}=e;si(i!==this._layoutTextLastFontSize||n!==this._layoutTextLastFontFamily){this._layoutTextCtx.fuente=`${i*this._devicePixelRatio}px ${n}`;this._layoutTextLastFontSize=i;this._layoutTextLastFontFamily=n}const{ancho:r}=this._layoutTextCtx.measureText(t.textContent);if(r>0){const t=this._devicePixelRatio*e.canvasWidth/r;this._enhanceTextSelection&&(e.scale=t);s=`scaleX(${t})`}}0!==e.angle&&(s=`rotate(${e.angle}deg) ${s}`); si (s. length>0){this._enhanceTextSelection&&(e.originalTransform=s); t.style.transform=s}e.hasText&&this._container.append(t); si (e.hasEOL){const t=document.createElement("br"); t.setAttribute("role","presentation"); this._container.append(t)}}_render(t=0){const e=(0,n.createPromiseCapability)(); let s=Object.create(null); constante i=this._document.createElement("canvas"); i.height=i.width=r; this._layoutTextCtx=i.getContext("2d",{alpha:!1}); si (this._textContent){const t=this._textContent.items,s=this._textContent.styles;this._processItems(t,s);e.resolve()}else{if(!this._textContentStream)generar un nuevo Error('No se especificaron los parámetros "textContent" ni "textContentStream".');{const pump=()=>{this._reader.read().then((({value:t,done:n})=>{if(n)e.resolve();else{Object.assign(s,t.styles);this._processItems(t.items,s);pump()}}),e.reject)};this._reader=this._textContentStream.getReader();pump()}}e.promise.then((()=>{s=null;t?this._r enderTimer=setTimeout((()=>{render(esto); esto._renderTimer=null}),t):render(esto)}),esto._capacidad.rechazar)}expandTextDivs(t=!1){si(!esto._mejorarSelecciónDeTexto||!esto._renderingDone)regresar;si(null!==esto._límites){expandir(esto);esto._límites=null}const e=[],s=[];para(sea n=0,i=this._textDivs.length;n<i;n++){const i=this._textDivs[n],r=this._textDivProperties.get(i);si(r.tieneTexto)si(t){e.length=0;s.length=0;r.originalTransform&&e.push(r.originalTransform);si(r.paddingTop>0){s.push(`${r.paddingTop}px`);e.push(`translateY(${-r.paddingTop}px)`)}de lo contrario s.push(0);r.paddingRight>0?s.push(r.paddingRight/r.scale+"px"):s.push(0);r.paddingBottom>0?s.push(`${r.paddingBottom}px`):s.push(0);if(r.paddingLeft>0){s.push(r.paddingLeft/r.scale+"px");e.push(`translateX(${-r.paddingLeft/r.scale}px)`)}else s.push(0);i.style.padding=s.join(" ");e.length&&(i.style.transform=e.join(" "))}else{i.style.padding=null;i.style.transform=r.originalTransform}}}}e.TextLayerRenderTask=TextLayerRenderTask},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});e.SVGGraphics=void 0;var n=s(8),i=s(1),r=s(3);let a=class{constructor(){(0,i.unreachable)("No implementado: SVGGraphics")}};e.SVGGraphics=a;{const o={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},l="http://www.w3.org/XML/1998/namespace",c="http://www.w3.org/1999/xlink",h=["tope","redondo","cuadrado"],d=["inglete","redondo","bisel"],createObjectURL=function(t,e="",s=!1){si(URL.createObjectURL&&"indefinido"!=tipo de Blob&&!s)devuelve URL.createObjectURL(nuevo Blob([t],{tipo:e}));const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let i=`datos:${e};base64,`;para(let e=0,s=t.longitud;e<s;e+=3){constante r=255&t[e],a=255&t[e+1],o=255&t[e+2];i+=n[r>>2]+n[(3&r)<<4|a>>4]+n[e+1<s?(15&a)<<2|o>>6:64]+n[e+2<s?63&o:64]}devuelve i},u=función(){constante t=nuevo Uint8Array([137,80,78,71,13,10,26,10]),e=nuevo Int32Array(256);para(sea t=0;t<256;t++){sea s=t;para(sea t=0;t<8;t++)s=1&s?3988292384^s>>1&2147483647:s>>1&2147483647;e[t]=s}función writePngChunk(t,s,n,i){let r=i;const a=s.length;n[r]=a>>24&255;n[r+1]=a>>16&255;n[r+2]=a>>8&255;n[r+3]=255&a;r+=4;n[r]=255&t.charCodeAt(0);n[r+1]=255&t.charCodeAt(1);n[r+2]=255&t.charCodeAt(2);n[r+3]=255&t.charCodeAt(3);r+=4;n.set(s,r);r+=s.length;const o=función crc32(t,s,n){let i=-1;for(let r=s;r<n;r++){const s=255&(i^t[r]);i=i>>>8^e[s]}devolver-1^i}(n,i+4,r);n[r]=o>>24&255;n[r+1]=o>>16&255;n[r+2]=o>>8&255;n[r+3]=255&o}función deflateSyncUncompressed(t){let e=t.length;const s=65535,n=Math.ceil(e/s),i=new Uint8Array(2+e+5*n+4);let r=0;i[r++]=120;i[r++]=156;let a=0;para(;e>s;){i[r++]=0;i[r++]=255;i[r++]=255;i[r++]=0;i[r++]=0;i.set(t.subarray(a,a+s),r);r+=s;a+=s;e-=s}i[r++]=1;i[r++]=255&e;i[r++]=e>>8&255;i[r++]=255&~e;i[r++]=(65535&~e)>>8&255;i.set(t.subarray(a),r);r+=t.length-a;const o=función adler32(t,e,s){sea n=1,i=0;para(sea r=e;r<s;++r){n=(n+(255&t[r]))%65521;i=(i+n)%65521}devuelve i<<16|n}(t,0,t.length);i[r++]=o>>24&255;i[r++]=o>>16&255;i[r++]=o>>8&255;i[r++]=255&o;devuelve i}función codificar(e,s,n,a){const o=e.width,l=e.height;let c,h,d;const u=e.data;switch(s){case i.ImageKind.GRAYSCALE_1BPP:h=0;c=1;d=o+7>>3;break;case i.ImageKind.RGB_24BPP:h=2;c=8;d=3*o;break;case i.ImageKind.RGBA_32BPP:h=6;c=8;d=4*o;break;default:throw new Error("formato inválido")}const p=new Uint8Array((1+d)*l);let g=0,f=0;for(let t=0;t<l;++t){p[g++]=0;p.set(u.subarray(f,f+d),g);f+=d;g+=d}if(s===i.ImageKind.GRAYSCALE_1BPP&&a){g=0;for(let t=0;t<l;t++){g++;for(let t=0;t<d;t++)p[g++]^=255}}const m=new Uint8Array([o>>24&255,o>>16&255,o>>8&255,255&o,l>>24&255,l>>16&255,l>>8&255,255&l,c,h,0,0,0]),b=función deflateSync(t){if(!r.isNodeJS)return deflateSyncUncompressed(t);try{let e;e=parseInt(process.versions.node)>=8?t:Buffer.from(t);const s=require("zlib").deflateSync(e,{level:9});return s instanceof Uint8Array?s:new Uint8Array(s)}catch(t){(0,i.warn)("No se comprime PNG porque zlib.deflateSync no está disponible: "+t)}return deflateSyncUncompressed(t)}(p),A=t.length+36+m.length+b.longitud,_=new Uint8Array(A);let y=0;_.set(t,y);y+=t.length;writePngChunk("IHDR",m,_,y);y+=12+m.length;writePngChunk("IDATA",b,_,y);y+=12+b.length;writePngChunk("IEND",new Uint8Array(0),_,y);return createObjectURL(_,"image/png",n)}return function convertImgDataToPng(t,e,s){return encode(t,void 0===t.kind?i.ImageKind.GRAYSCALE_1BPP:t.kind,e,s)}}();clase SVGExtraState{constructor(){esto.fontSizeScale=1;esto.fontWeight=o.fontWeight;esto.fontSize=0;esto.textMatrix=i.IDENTITY_MATRIX;esto.fontMatrix=i.FONT_IDENTITY_MATRIX;esto.leading=0;esto.textRenderingMode=i.TextRenderingMode.FILL;esto.textMatrixScale=1;esto.x=0;esto.y=0;esto.lineX=0;esto.lineY=0;esto.charSpacing=0;esto.wordSpa cing=0; este.textHScale=1; este.textRise=0; este.fillColor=o.fillColor; este.strokeColor="#000000"; este.fillAlpha=1; este.strokeAlpha=1; este.lineWidth=1; este.lineJoin=""; este.lineCap=""; este.miterLimit=0; este.dashArray=[]; este.dashPhase=0; este.dependencies=[]; este.activeClipUrl=null; este.clipGroup=null; este.maskId=""}clone(){return Objeto.create(this)}setCurrentPoint(t,e){this.x=t;this.y=e}}función opListToTree(t){let e=[];const s=[];for(const n de t)if("guardar"!==n.fn)"restaurar"===n.fn?e=s.pop():e.push(n);else{e.push({fnId:92,fn:"grupo",items:[]});s.push(e);e=e.at(-1).items}devuelve e}función pf(t){if(Number.isInteger(t))devuelve t.toString();const e=t.toFixed(10);let s=e.length-1;if("0"!==e[s])devuelve e;do{s--}mientras("0"===e[s]);devuelve e.substring(0,"."===e[s]?s:s+1)}función pm(t){si(0===t[4]&&0===t[5]){si(0===t[1]&&0===t[2])devuelve 1===t[0]&&1===t[3]?"":`escala(${pf(t[0])} ${pf(t[3])})`;si(t[0]===t[3]&&t[1]===-t[2]){devuelve`rotar(${pf(180*Math.acos(t[0])/Math.PI)})`}}de lo contrario if(1===t[0]&&0===t[1]&&0===t[2]&&1===t[3])return`translate(${pf(t[4])} ${pf(t[5])})`;return`matrix(${pf(t[0])} ${pf(t[1])} ${pf(t[2])} ${pf(t[3])} ${pf(t[4])} ${pf(t[5])})`}let p=0,g=0,f=0;e.SVGGraphics=a=class{constructor(t,e,s=!1){(0,n.deprecated)("El back-end SVG ya no se mantiene y *puede* ser eliminado en el futuro.");this.svgFactory=new n.DOMSVGFactory;this.current=new SVGExtraState; este.transformMatrix=i.IDENTITY_MATRIX; este.transformStack=[]; este.extraStack=[]; este.commonObjs=t; este.objs=e; este.pendingClip=null; este.pendingEOFill=!1; este.embedFonts=!1; este.embeddedFonts=Object.create(null); este.cssStyle=null; este.forceDataSchema=!!s; este._operatorIdMapping=[]; para (const t en i.OPS) este._operatorIdMapping[i.OPS[t]]=t} guardar() {este.transformStack.push(este.transformMatrix); constante t=this.current;this.extraStack.push(t);this.current=t.clone()}restaurar(){this.transformMatrix=this.transformStack.pop();this.current=this.extraStack.pop();this.pendingClip=null;this.tgrp=null}grupo(t){this.save();this.executeOpTree(t);this.restore()}cargarDependencias(t){const e=t.fnArray,s=t.argsArray;para(let t=0,n=e.longitud; t<n; t++) si (e[t] === i. OPS. dependencia) para (const e de s[t]) {const t = e. inicia con ("g_")? este. CommonObjs: este. Objs, s = new Promise ((s => {t. obtener (e, s)})); este. Dependencias actuales. insertar (s)} devolver Promise. todas (este. Dependencias actuales)} transformar (t, e, s, n, r, a) {const o = [t, e, s, n, r, a]; este. TransformMatrix = i. Util. Transform (este. TransformMatrix, o); este. tgrp = nulo} obtener SVG (t, e) {este. Viewport = e; const s = este. _inicializar (e); devolver este.loadDependencies(t).then((()=>{este.transformMatrix=i.IDENTITY_MATRIX;este.executeOpTree(este.convertOpList(t));devuelve s}))}convertOpList(t){const e=este._operatorIdMapping,s=t.argsArray,n=t.fnArray,i=[];para(deja t=0,r=n.length;t<r;t++){const r=n[t];i.push({fnId:r,fn:e[r],args:s[t]})}devuelve opListToTree(i)}executeOpTree(t){para(const e de t){const t=e.fn,s=e.fnId,n=e.args;switch(0|s){caso i.OPS.beginText:this.beginText();break;case i.OPS.dependency:break;case i.OPS.setLeading:this.setLeading(n);break;case i.OPS.setLeadingMoveText:this.setLeadingMoveText(n[0],n[1]);break;case i.OPS.setFont:this.setFont(n);break;case i.OPS.showText:case i.OPS.showSpacedText:this.showText(n[0]);break;case i.OPS.endText:this.endText();break;case i.OPS.moveText:this.moveText(n[0],n[1]);break;case i.OPS.setCharSpacing:this.setCharSpacing(n[0]);break;case i.OPS.setWordSpacing:this.setWordSpacing(n[0]);break;case i.OPS.setHScale:this.setHScale(n[0]);break;case i.OPS.setTextMatrix:this.setTextMatrix(n[0],n[1],n[2],n[3],n[4],n[5]);break;case i.OPS.setTextRise:this.setTextRise(n[0]);break;case i.OPS.setTextRenderingMode:this.setTextRenderingMode(n[0]);break;case i.OPS.setLineWidth:this.setLineWidth(n[0]);break;case i.OPS.setLineJoin:this.setLineJoin(n[0]);break;case i.OPS.setLineCap:this.setLineCap(n[0]);break;case i.OPS.setMiterLimit:this.setMiterLimit(n[0]);break;case i.OPS.setFillRGBColor:this.setFillRGBColor(n[0],n[1],n[2]);break;case i.OPS.setStrokeRGBColor:this.setStrokeRGBColor(n[0],n[1],n[2]);break;case i.OPS.setStrokeColorN:this.setStrokeColorN(n);break;case i.OPS.setFillColorN:this.setFillColorN(n);break;case i.OPS.shadingFill:this.shadingFill(n[0]);break;case i.OPS.setDash:this.setDash(n[0],n[1]);break;case i.OPS.setRenderingIntent:this.setRenderingIntent(n[0]);break;case i.OPS.setFlatness:this.setFlatness(n[0]);break;case i.OPS.setGState:this.setGState(n[0]);break;case i.OPS.fill:this.fill();break;case i.OPS.eoFill:this.eoFill();break;case i.OPS.stroke:this.stroke();break;case i.OPS.fillStroke:this.fillStroke();break;case i.OPS.eoFillStroke:this.eoFillStroke();break;case i.OPS.clip:this.clip("distinto de cero");break;case i.OPS.eoClip:this.clip("par-impar");break;case i.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case i.OPS.paintImageXObject:this.paintImageXObject(n[0]);break;case i.OPS.paintInlineImageXObject:this.paintInlineImageXObject(n[0]);break;case i.OPS.paintImageMaskXObject:this.paintImageMaskXObject(n[0]);break;case i.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(n[0],n[1]); romper; caso i.OPS. pintarFormXObjectEnd: este. pintarFormXObjectEnd(); romper; caso i.OPS. cerrarPath: este. cerrarPath(); romper; caso i.OPS. cerrarTrazo: este. cerrarTrazo(); romper; caso i.OPS. cerrarTrazoDeRelleno: este. cerrarTrazoDeRelleno(); romper; caso i.OPS. cerrarEOTrazoDeRelleno: este. cerrarEOTrazoDeRelleno(); romper; caso i.OPS. siguienteLínea: este. siguienteLínea(); romper; caso i.OPS. transformar: este. transformar(n[0],n[1],n[2],n[3],n[4],n[5]); romper; caso i.OPS. construirPath: este. construirPath(n[0],n[1]); romper; caso i.OPS. finPath: este. finPath(); romper; caso 92:this.group(e.items);break;default:(0,i.warn)(`Operador no implementado ${t}`)}}}setWordSpacing(t){this.current.wordSpacing=t}setCharSpacing(t){this.current.charSpacing=t}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(t,e,s,n,i,r){const a=this.current;a.textMatrix=a.lineMatrix=[t,e,s,n,i,r];a.textMatrixScale=Math.hypot(t,e);ax=a.lineX=0;ay=a.lineY=0;a.xcoords=[];a.ycoords=[];a.tspan=this.svgFactory.createElement("svg:tspan");a.tspan.setAttributeNS(null,"font- familia",a.fontFamily);a.tspan.setAttributeNS(null,"tamaño de fuente",`${pf(a.fontSize)}px`);a.tspan.setAttributeNS(null,"y",pf(-ay));a.txtElement=this.svgFactory.createElement("svg:text");a.txtElement.append(a.tspan)}beginText(){constante t=this.current;tx=t.lineX=0;ty=t.lineY=0;t.textMatrix=i.IDENTITY_MATRIX;t.lineMatrix=i.IDENTITY_MATRIX;t.textMatrixScale=1;t.tspan=this.svgFactory.createElement("svg:tspan");t.txtElement=this.svgFactory.createElement("svg:text");t.txtgrp=this.svgFactory.createElement("svg:g");t.xcoords=[];t.ycoords=[]}moveText(t,e){const s=this.current;sx=s.lineX+=t;sy=s.lineY+=e;s.xcoords=[];s.ycoords=[];s.tspan=this.svgFactory.createElement("svg:tspan");s.tspan.setAttributeNS(null,"font-family",s.fontFamily);s.tspan.setAttributeNS(null,"font-size",`${pf(s.fontSize)}px`);s.tspan.setAttributeNS(null,"y",pf(-sy))}showText(t){const e=this.current,s=e.font,n=e.fontSize;if(0===n)return;const r = e.fontSizeScale, a = e.charSpacing, c = e.wordSpacing, h = e.fontDirection, d = e.textHScale*h, u = s.vertical, p = u?1:-1, g = s.defaultVMetrics, f = n*e.fontMatrix[0]; sea m = 0; para (const i de t) {si (null ===i) {m + = h * c; continuar} si ("número" ==tipo de i) {m + = p * i * n/1 e3; continuar} const t = (i.isSpace? c:0) + a, o = i.fontChar; sea l, d, b, A = i.width; si (u) {sea t; const e = i.vmetric | | g; t = i.vmetric? e[1]:.5 * A; t = -t * f; const s=e[2]*f;A=e?-e[0]:A;l=t/r;d=(m+s)/r}de lo contrario{l=m/r;d=0}si(i.isInFont||s.missingFile){e.xcoords.push(e.x+l);u&&e.ycoords.push(-e.y+d);e.tspan.textContent+=o}b=u?A*ft*h:A*f+t*h;m+=b}e.tspan.setAttributeNS(null,"x",e.xcoords.map(pf).join(" "));u?e.tspan.setAttributeNS(null,"y",e.ycoords.map(pf).join(" ")):e.tspan.setAttributeNS(null,"y",pf(-ey));u?ey-=m:e.x+=m*d;e.tspan.setAttributeNS(null,"font-family",e.fontFamily);e.tspan.setAttributeNS(null,"font-size",`${pf(e.fontSize)}px`);e.fontStyle!==o.fontStyle&&e.tspan.setAttributeNS(null,"estilo de fuente",e.fontStyle);e.fontWeight!==o.fontWeight&&e.tspan.setAttributeNS(null,"peso de fuente",e.fontWeight);const b=e.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;if(b===i.TextRenderingMode.FILL||b===i.TextRenderingMode.FILL_STROKE){e.fillColor!==o.fillColor&&e.tspan.setAttributeNS(null,"relleno",e.fillColor);e.fillAlpha<1&&e.tspan.setAttributeNS(null,"opacidad de relleno",e.fillAlpha)}else e.textRenderingMode===i.TextRenderingMode.ADD_TO_PATH?e.tspan.setAttributeNS(null,"fill","transparent"):e.tspan.setAttributeNS(null,"fill","none");if(b===i.TextRenderingMode.STROKE||b===i.TextRenderingMode.FILL_STROKE){const t=1/(e.textMatrixScale||1);this._setStrokeAttributes(e.tspan,t)}let A=e.textMatrix;if(0!==e.textRise){A=A.slice();A[5]+=e.textRise}e.txtElement.setAttributeNS(null,"transform",`${pm(A)} scale(${pf(d)}, -1)`);e.txtElement.setAttributeNS(l,"xml:space","preserve");e.txtElement.append(e.tspan);e.txtgrp.append(e.txtElement);this._ensureTransformGroup().append(e.txtElement)}setLeadingMoveText(t,e){this.setLeading(-e);this.moveText(t,e)}addFontStyle(t){if(!t.data)throw new Error('addFontStyle: No hay datos de fuente disponibles, asegúrese de que el parámetro de API "fontExtraProperties" esté conjunto.'); si (!este.cssStyle){este.cssStyle=este.svgFactory.createElement("svg:estilo");este.cssStyle.setAttributeNS(null,"tipo","texto/css");este.defs.append(este.cssStyle)}const e=createObjectURL(t.datos,t.tipo MIME,este.forceDataSchema);este.cssStyle.textContent+=`@font-face { familia-de-fuentes: "${t.loadedName}"; src: url(${e}); }\n`}setFont(t){const e=this.current,s=this.commonObjs.get(t[0]);let n=t[1];e.font=s;if(this.embedFonts&&!s.missingFile&&!this.embeddedFonts[s.loadedName]){this.addFontStyle(s);this.embeddedFonts[s.loadedName]=s}e.fontMatrix=s.fontMatrix||i.FONT_IDENTITY_MATRIX;let r="normal";s.black?r="900":s.bold&&(r="negrita");const a=s.italic?"italic":"normal";if(n<0){n=-n;e.fontDirection=-1}else e.fontDirection=1;e.fontSize=n;e.fontFamily=s.loadedName;e.fontWeight=r;e.fontStyle=a;e.tspan=this.svgFactory.createElement("svg:tspan");e.tspan.setAttributeNS(null,"y",pf(-ey));e.xcoords=[];e.ycoords=[]}endText(){const t=this.current;if(t.textRenderingMode&i.TextRenderingMode.ADD_TO_PATH_FLAG&&t.txtElement?.hasChildNodes()){t.element=t.txtElement;this.clip("distinto de cero");this.endPath()}}establecerAnchoDeLínea(t){t>0&&(this.current.lineWidth=t)}establecerCapítuloDeLínea(t){this.current.lineCap=h[t]}establecerLin eJoin(t){este.current.lineJoin=d[t]}setMiterLimit(t){este.current.miterLimit=t}setStrokeAlpha(t){este.current.strokeAlpha=t}setStrokeRGBColor(t,e,s){este.current.strokeColor=i.Util.makeHexColor(t,e,s)}setFillAlpha(t){este.current.fillAlpha=t}setFillRGBColor(t,e,s){este.current.fillColor=i.Util.makeHexColor(t,e,s);este.current.tspan=este.svgFactory.createElement("svg:tspan");este.current.xcoords=[];este.current.ycoords=[]}setStrokeColorN(t){este.current.strokeColor=este._makeColorN_Pattern(t)}setFillColorN(t){este.current.fillColor=este._makeColorN_Pattern(t)}shadingFill(t){constante e=este.viewport.width,s=este.viewport.height,n=i.Util.inverseTransform(este.transformMatrix),r=i.Util.applyTransform([0,0],n),a=i.Util.applyTransform([0,s],n),o=i.Util.applyTransform([e,0],n),l=i.Util.applyTran sform([e,s],n),c=Math.min(r[0],a[0],o[0],l[0]),h=Math.min(r[1],a[1],o[1],l[1]),d=Math.max(r[0],a[0],o[0],l[0]),u=Math.max(r[1],a[1],o[1],l[1]),p=this.svgFactory.createElement("svg:rect");p.setAttributeNS(null,"x ",c);p.setAttributeNS(null,"y",h);p.setAttributeNS(null,"ancho",dc);p.setAttributeNS(null,"alto",uh);p.setAttributeNS(null,"relleno",this._makeShadingPattern(t));this.current.fillAlpha<1&&p.setAttributeNS(null,"opacidad-relleno",this.current.fillAlpha);this._ensureTransformGroup().append(p)}_makeColorN_Pattern(t){devolver"TilingPattern"===t[0]?this._makeTilingPattern(t):this._makeShadingPattern(t)}_makeTilingPattern(t){constante e=t[1],s=t[2],n=t[3]||i.MATRIZ_DE_IDENTIDAD,[r,a,o,l]=t[4],c=t[5],h=t[6],d=t[7],u="sombreado"+f++,[p,g,m,b]=i.Util.normalizeRect([...i.Util.applyTransform([r,a],n),...i.Util.applyTransform([o,l],n)]),[A,_]=i.Util.singularValueDecompose2dScale(n),y=c*A,v=h*_,S=this.svg Fábrica.createElement("svg:patrón");S.setAttributeNS(null,"id",u);S.setAttributeNS(null,"patrónUnidades","EspacioUsuarioAlUsar");S.setAttributeNS(null,"ancho",y);S.setAttributeNS(null,"alto",v);S.setAttributeNS(null,"x",`${p}`);S.setAttributeNS(null,"y",`${g}`);constante x=this.svg,E=this.transformMatrix,C=this.current.fillColor,P=this.current.strokeColor,T=this.svgFactory.create(mp,bg);this.svg=T;this.transformMatrix=n;if(2===d){const t=i.Util.makeHexColor(...e);this.current.fillColor=t;this.current.strokeColor=t}this.executeOpTree(this.convertOpList(s));this.svg=x;this.transformMatrix=E;this.current.fillColor=C;this.current.strokeColor=P;S.append(T.childNodes[0]);this.defs.append(S);return`url(#${u})`}_makeShadingPattern(t){"string"==typeof t&&(t=this.objs.get(t));switch(t[0]){case"RadialAxial":const e="sombreado"+f++,s=t[3];let n;switch(t[1]){case"axial":const s=t[4],i=t[5];n=this.svgFactory.createElement("svg:linearGradient");n.setAttributeNS(null,"id",e);n.setAttributeNS(null,"gradientUnits","userSpaceOnUse");n.setAttributeNS(null,"x1",s[0]);n.setAttributeNS(null,"y1",s[1]);n.setAttributeNS(null,"x2",i[0]);n.setAttributeNS(null,"y2",i[1]);break;case"radial":const r=t[4],a=t[5],o=t[6],l=t[7];n=este.svgFactory.createElement("svg:radialGradient");n.setAttributeNS(null,"id",e);n.setAttributeNS(null,"gradientUnits","userSpaceOnUse");n.setAttributeNS(null,"cx",a[0]);n.setAttributeNS(null,"cy",a[1]);n.setAttributeNS(null,"r",l);n.setAttributeNS(null,"fx",r[0]);n.setAttributeNS(null,"fy",r[1]);n.setAttributeNS(null,"fr",o);break;default:throw new Error(`Tipo RadialAxial desconocido: ${t[1]}`)} para (const t de s){const e=this.svgFactory.createElement("svg:stop");e.setAttributeNS(null,"offset",t[0]);e.setAttributeNS(null,"stop-color",t[1]);n.append(e)}this.defs.append(n);return`url(#${e})`;case"Mesh":(0,i.warn)("Malla de patrón no implementado");return null;case"Dummy":return"hotpink";default:throw new Error(`Tipo IR desconocido: ${t[0]}`)}}setDash(t,e){this.current.dashArray=t;this.current.dashPhase=e}constructPath(t,e){const s=this.current;let n=sx,r=sy,a=[],o=0;for(const s of t)switch(0|s){caso i.OPS.rectángulo:n=e[o++];r=e[o++];const t=n+e[o++],s=r+e[o++];a.push("M",pf(n),pf(r),"L",pf(t),pf(r),"L",pf(t),pf(s),"L",pf(n),pf(s),"Z");break;caso i.OPS.moverA:n=e[o++];r=e[o++];a.push("M",pf(n),pf(r));break;caso i.OPS.lineA:n=e[o++];r=e[o++];a.push("L",pf(n),pf(r));break;caso i.OPS.curveTo:n=e[o+4];r=e[o+5];a.push("C",pf(e[o]),pf(e[o+1]),pf(e[o+2]),pf(e[o+3]),pf(n),pf(r));o+=6;break;case i.OPS.curveTo2:a.push("C",pf(n),pf(r),pf(e[o]),pf(e[o+1]),pf(e[o+2]),pf(e[o+3]));n=e[o+2];r=e[o+3];o+=4;break;case i.OPS.curveTo3:n=e[o+2];r=e[o+3];a.push("C",pf(e[o]),pf(e[o+1]),pf(n),pf(r),pf(n),pf(r));o+=4;break;case i.OPS.closePath:a.push("Z")}a=a.join(" "); si (s.path&&t.length>0&&t[0]!==i.OPS.rectangle&&t[0]!==i.OPS.moveTo) a = s.path.getAttributeNS(null,"d")+a; de lo contrario {s.path=this.svgFactory.createElement("svg:path"); this._ensureTransformGroup().append(s.path)} s.path.setAttributeNS(null,"d",a); s.path.setAttributeNS(null,"fill","none"); s.element=s.path; s.setCurrentPoint(n,r)} endPath() {constante t=this.current; t.path=null; si (!this.pendingClip) devolver; si (!t.element) {this.pendingClip=null; devolver} constante e="clippath"+p++,s=this.svgFactory.createElement("svg:clipPath");s.setAttributeNS(null,"id",e);s.setAttributeNS(null,"transform",pm(this.transformMatrix));const n=t.element.cloneNode(!0);"evenodd"===this.pendingClip?n.setAttributeNS(null,"clip-rule","evenodd"):n.setAttributeNS(null,"clip-rule","distinto de cero");this.pendingClip=null;s.append(n);this.defs.append(s);if(t.activeClipUrl){t.clipGroup=null;for(const t de este.extraStack)t.clipGroup=null;s.setAttributeNS(null,"clip-path",t.activeClipUrl)}t.activeClipUrl=`url(#${e})`;este.tgrp=null}clip(t){este.pendienteClip=t}closePath(){const t=this.current;if(t.path){const e=`${t.path.getAttributeNS(null,"d")}Z`;t.path.setAttributeNS(null,"d",e)}}establecerLeading(t){this.current.leading=-t}establecerTextRise(t){this.current.textRise=t}establecerTextRenderingMode(t){this.current.textRenderingMode=t}establecerHScale(t){this.current.textHScale=t/100}establecerRenderingIntent(t){}establecerFlatness(t){}establecerGState(t){for(const[e,s]of t)switch(e){case "LW": this.setLineWidth(s);break;case "LC": this.setLineCap(s);break;case "LJ": this.setLineJoin(s);break;case "ML": this.setMiterLimit(s);break;case "D": this.setDash(s[0],s[1]);break;case "RI": this.setRenderingIntent(s);break;case "FL": this.setFlatness(s);break;case "Font": this.setFont(s);break;case "CA": this.setStrokeAlpha(s);break;case "ca": this.setFillAlpha(s);break;default:(0,i.warn)(`Operador de estado gráfico no implementado ${e}`)}}fill(){constante t=this.current;if(t.element){t.element.setAttributeNS(null,"fill",t.fillColor);t.element.setAttributeNS(null,"fill-opacity",t.fillAlpha);this.endPath()}}stroke(){const t=this.current;if(t.element){this._setStrokeAttributes(t.element);t.element.setAttributeNS(null,"fill","none");this.endPath()}}_setStrokeAttributes(t,e=1){const s=this.current;let n=s.dashArray;1!==e&&n.length>0&&(n=n.map((function(t){return e*t})));t.setAttributeNS(null,"trazo",s.strokeColor);t.setAttributeNS(null,"opacidad del trazo",s.strokeAlpha);t.setAttributeNS(null,"límite de ángulo del trazo",pf(s.miterLimit));t.setAttributeNS(null,"capítulo de línea del trazo",s.lineCap);t.setAttributeNS(null,"unión de línea del trazo",s.lineJoin);t.setAttributeNS(null,"ancho del trazo",pf(e*s.lineWidth)+"px");t.setAttributeNS(null,"rayo de trazo",n.map(pf).join(" ")); t. setAttributeNS(null,"desplazamiento-de-trazo", pf(e*s. fase-de-trazo)+"px")}eoFill(){este.elemento.actual&&este.elemento.actual.setAttributeNS(null,"regla-de-relleno","par-impar"); este.relleno()}fillStroke(){este.trazo();este.relleno()}eoFillStroke(){este.elemento.actual&&este.elemento.actual.setAttributeNS(null,"regla-de-relleno","par-impar"); este.relleno()}closeStroke(){este.closePath();este.trazo()}closeFillStroke(){este.closePath();este.fillStroke()}closeEOFillStroke(){este.closePath();este.eoFillStroke()}paintSolidColorImageMask(){constante t=this.svgFactory.createElement("svg:rect");t.setAttributeNS(null,"x","0");t.setAttributeNS(null,"y","0");t.setAttributeNS(null,"ancho","1px");t.setAttributeNS(null,"alto","1px");t.setAttributeNS(null,"relleno",this.current.fillColor);this._ensureTransformGroup().append(t)}paintImageXObject(t){const e=t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t);e?this.paintInlineImageXObject(e):(0,i.warn)(`La imagen dependiente con ID de objeto ${t} aún no está lista`)}paintInlineImageXObject(t,e){const s=t.width,n=t.height,i=u(t,this.forceDataSchema,!!e),r=this.svgFactory.createElement("svg:rect");r.setAttributeNS(null,"x","0");r.setAttributeNS(null,"y","0");r.setAttributeNS(null,"width",pf(s));r.setAttributeNS(null,"height",pf(n));this.current.element=r;this.clip("distinto de cero");const a=this.svgFactory.createElement("svg:image");a.setAttributeNS(c,"xlink:href",i);a.setAttributeNS(null,"x","0");a.setAttributeNS(null,"y",pf(-n));a.setAttributeNS(null,"ancho",pf(s)+"px");a.setAttributeNS(null,"alto",pf(n)+"px");a.setAttributeNS(null,"transformar",`escala(${pf(1/s)} ${pf(-1/n)})`);e?e.append(a):this._ensureTransformGroup().append(a)}paintImageMaskXObject(t){constante e=this.current,s=t.width,n=t.height,i=e.fillColor;e.maskId="mask"+g++;const r=this.svgFactory.createElement("svg:mask");r.setAttributeNS(null,"id",e.maskId);const a=this.svgFactory.createElement("svg:rect");a.setAttributeNS(null,"x","0");a.setAttributeNS(null,"y","0");a.setAttributeNS(null,"width",pf(s));a.setAttributeNS(null,"height",pf(n));a.setAttributeNS(null,"fill",i);a.setAttributeNS(null," máscara",`url(#${e.maskId})`);this.defs.append(r);this._ensureTransformGroup().append(a);this.paintInlineImageXObject(t,r)}paintFormXObjectBegin(t,e){Array.isArray(t)&&6===t.length&&this.transform(t[0],t[1],t[2],t[3],t[4],t[5]);if(e){constante t=e[2]-e[0],s=e[3]-e[1],n=this.svgFactory.createElement("svg:rect");n.setAttributeNS(null,"x",e[0]);n.setAttributeNS(null,"y",e[1]);n.setAttributeNS(null,"ancho",pf(t));n.setAttributeNS(null,"alto",pf(s));this.current.element=n;this.clip("distinto de cero");this.endPath()}}paintFormXObjectEnd(){}_initialize(t){const e=this.svgFactory.create(t.ancho,t.alto),s=this.svgFactory.createElement("svg:defs");e.append(s);this.defs=s;const n=this.svgFactory.createElement("svg:g");n.setAttributeNS(null,"transform",pm(t.transform));e.append(n);this.svg=n;return e}_ensureClipGroup(){if(!this.current.clipGroup){const t=this.svgFactory.createElement("svg:g");t.setAttributeNS(null,"clip-path",this.current.activeClipUrl);this.svg.append(t);this.current.clipGroup=t}return este.current.clipGroup}_ensureTransformGroup(){if(!this.tgrp){este.tgrp=este.svgFactory.createElement("svg:g");este.tgrp.setAttributeNS(null,"transform",pm(este.transformMatrix));este.current.activeClipUrl?this._ensureClipGroup().append(este.tgrp):este.svg.append(este.tgrp)}devolver este.tgrp}}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{valor:!0}); e.PDFNodeStream=void 0;var n=s(1),i=s(33);const r=require("fs"),a=require("http"),o=require("https"),l=require("url"),c=/^archivo:\/\/\/[a-zA-Z]:\//;e.PDFNodeStream=clase PDFNodeStream{constructor(t){this.source=t;this.url=función parseUrl(t){const e=l.parse(t);if("archivo:"===e.protocolo||e.host)return e;if(/^[az]:[/\\]/i.test(t))return l.parse(`archivo:///${t}`);e.host||(e.protocolo="archivo:");return e}(t.url);this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol;this.isFsUrl="file:"===this.url.protocol;this.httpHeaders=this.isHttp&&t.httpHeaders||{};this._fullRequestReader=null;this._rangeRequestReaders=[]}obtener _progressiveDataLength(){devolver this._fullRequestReader?._loaded??0}getFullReader(){(0,n.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader solo se puede llamar una vez.");this._fullRequestReader=this.isFsUrl?new PDFNodeStreamFsFullReader(this):new PDFNodeStreamFullReader(this);devolver este._fullRequestReader}getRangeReader(t,e){si(e<=este._progressiveDataLength)devuelve null;const s=este.isFsUrl?new PDFNodeStreamFsRangeReader(este,t,e):new PDFNodeStreamRangeReader(este,t,e);este._rangeRequestReaders.push(s);devuelve s}cancelAllRequests(t){este._fullRequestReader&&este._fullRequestReader.cancel(t);para(const e de este._rangeRequestReaders.slice(0))e.cancel(t)}};clase BaseFullReader{constructor(t){este._url=t.url;este._done=!1;este._storedError=null;este.onProgress=null;const e=t.origen;this._contentLength=e.length;this._loaded=0;this._filename=null;this._disableRange=e.disableRange||!1;this._rangeChunkSize=e.rangeChunkSize;this._rangeChunkSize||this._disableRange||(this._disableRange=!0);this._isStreamingSupported=!e.disableStream;this._isRangeSupported=!e.disableRange;this._readableStream=null;this._readCapability=(0,n.createPromiseCapability)();this._headersCapability=(0,n.createPromiseCapability)()}obtener headersReady(){devolver this._headersCapability.promise}obtener filename(){devolver this._filename}obtener contentLength(){devolver this._contentLength}obtener isRangeSupported(){devuelve esto._isRangeSupported}obtener isStreamingSupported(){devuelve esto._isStreamingSupported}lectura asíncrona(){espera esto._readCapability.promise;si(esto._hecho)devuelve{valor:void 0,hecho:!0};si(esto._storedError)lanza esto._storedError;const t=esto._readableStream.read();si(null===t){esto._readCapability=(0,n.createPromiseCapability)();devuelve esto.read()}esto._loaded+=t.length;esto.onProgress&&esto.onProgress({cargado:esto._cargado,total:esto._contentLength});devuelve{valor:nuevo Uint8Array(t).buffer,done:!1}}cancel(t){este._readableStream?este._readableStream.destroy(t):este._error(t)}_error(t){este._storedError=t;este._readCapability.resolve()}_setReadableStream(t){este._readableStream=t;t.on("legible",(()=>{este._readCapability.resolve()}));t.on("fin",(()=>{t.destroy();este._done=!0;este._readCapability.resolve()}));t.on("error",(t=>{this._error(t)}));!this._isStreamingSupported&&this._isRangeSupported&&this._error(new n.AbortException("la transmisión está deshabilitada"));this._storedError&&this._readableStream.destroy(this._storedError)}}clase BaseRangeReader{constructor(t){this._url=t.url;this._done=!1;this._storedError=null;this.onProgress=null;this._loaded=0;this._readableStream=null;this._readCapability=(0,n.createPromiseCapability)();const e=t.source;this._isStreamingSupported=!e.disableStream}obtener isStreamingSupported(){return this._isStreamingSupported}lectura asíncrona(){esperar this._readCapability.promesa;si(this._done)devolver{valor:void 0,done:!0};si(this._storedError)lanzar this._storedError;const t=this._readableStream.read();si(null===t){this._readCapability=(0,n.createPromiseCapability)();devolver this.read()}this._loaded+=t.length;this.onProgress&&this.onProgress({loaded:this._loaded});devolver{valor:nuevo Uint8Array(t).buffer,done:!1}}cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}_error(t){this._storedError=t;this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t;t.on("legible",(()=>{this._readCapability.resolve()}));t.on("fin",(()=>{t.destroy();this._done=!0;this._readCapability.resolve()}));t.on("error",(t=>{this._error(t)}));this._storedError&&this._readableStream.destroy(this._storedError)}}función createRequestOptions(t,e){return{protocolo:t.protocol,auth:t.auth,host:t.hostname,puerto:t.port,ruta:t.path,método:"GET",headers:e}}clase PDFNodeStreamFullReader extiende BaseFullReader{constructor(t){super(t);const handleResponse=e=>{if(404===e.statusCode){const t=new n.MissingPDFException(`Falta el PDF "${this._url}".`);this._storedError=t;this._headersCapability.reject(t);return}this._headersCapability.resolve();this._setReadableStream(e);const getResponseHeader=t=>this._readableStream.headers[t.toLowerCase()],{allowRangeRequests:s,suggestedLength:r}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:getResponseHeader,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=s;this._contentLength=r||this._contentLength;this._filename=(0,i.extractFile nombreDeEncabezado)(obtenerEncabezadoDeRespuesta)};this._request=null;"http:"===this._url.protocol?this._request=a.request(createRequestOptions(this._url,t.Encabezadoshttp),manejarRespuesta):this._request=o.request(createRequestOptions(this._url,t.Encabezadoshttp),manejarRespuesta);this._request.on("error",(t=>{this._storedError=t;this._headersCapability.reject(t)}));this._request.end()}}clase PDFNodeStreamRangeReader extiende BaseRangeReader{constructor(t,e,s){super(t);this._httpHeaders={};for(const e en t.httpHeaders){const s=t.httpHeaders[e];void 0!==s&&(this._httpHeaders[e]=s)}this._httpHeaders.Range=`bytes=${e}-${s-1}`;const handleResponse=t=>{if(404!==t.statusCode)this._setReadableStream(t);else{const t=new n.MissingPDFException(`Falta el PDF "${this._url}".`);this._storedError=t}};this._request=null;"http:"===this._url.protocol?this._request=a.request(createRequestOptions(this._url,this._httpHeaders),handleResponse):this._request=o.request(createRequestOptions(this._url,this._httpHeaders),handleResponse);this._request.on("error",(t=>{this._storedError=t}));this._request.end()}}clase PDFNodeStreamFsFullReader extiende BaseFullReader{constructor(t){super(t);let e=decodeURIComponent(this._url.path);c.test(this._url.href)&&(e=e.replace(/^\//,""));r.lstat(e,((t,s)=>{if(t){"ENOENT"===t.code&&(t=new n.MissingPDFException(`Falta el PDF "${e}".`));this._storedError=t;this._headersCapability.reject(t)}else{this._contentLength=s.size;this._setReadableStream(r.createReadStream(e));this._headersCapability.resolve()}}))}}clase PDFNodeStreamFsRangeReader extiende BaseRangeReader{constructor(t,e,s){super(t);let n=decodeURIComponent(this._url.path);c.test(this._url.href)&&(n=n.replace(/^\//,""));this._setReadableStream(r.createReadStream(n,{start:e,end:s-1}))}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});e.createResponseStatusError=function createResponseStatusError(t,e){if(404===t||0===t&&e.startsWith("file:"))return new n.MissingPDFException('Falta el PDF "'+e+'".');return new n.UnexpectedResponseException(`Respuesta inesperada del servidor (${t}) al recuperar el PDF "${e}".`,t)}; e.extraerNombreDeArchivoDeEncabezado=función extraerNombreDeArchivoDeEncabezado(t){const e=t("DisposiciónDeContenido"); si(e){let t=(0,i.obtenerNombreDeArchivoDeEncabezadoDeDisposiciónDeContenido)(e);si(t.includes("%"))try{t=decodeURIComponent(t)}catch(t){}si((0,r.isPdfFile)(t))return t}return null}; e.validarCapacidadesDeSolicitudDeRango=función validarCapacidadesDeSolicitudDeRango({obtenerEncabezadoDeRespuesta:t,isHttp:e,rangeChunkSize:s,deshabilitarRango:n}){const i={permitirSolicitudesDeRango:!1,longitudSugerida:void 0},r=parseInt(t("Longitud del contenido"),10);si(!Number.isInteger(r))devuelve i;i.suggestedLength=r;si(r<=2*s)devuelve i;si(n||!e)devuelve i;si("bytes"!==t("Rangos de aceptación"))devuelve i;si("identidad"!==(t("Codificación del contenido")||"identidad"))devuelve i;i.allowRangeRequests=!0;devuelve i};e.validateResponseStatus=función validateResponseStatus(t){devuelve 200===t||206===t};var n=s(1),i=s(34),r=s(8)},(t,e,s)=>{Object.defineProperty(e,"__esModule",{valor:!0});e.getFilenameFromContentDispositionHeader=función getFilenameFromContentDispositionHeader(t){let e=!0,s=toParamRegExp("nombre_archivo\\*","i").exec(t);if(s){s=s[1];let t=rfc2616unquote(s);t=unescape(t);t=rfc5987decode(t);t=rfc2047decode(t);return fixupEncoding(t)}s=función rfc2231getparam(t){const e=[];let s;const n=toParamRegExp("nombre de archivo\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(s=n.exec(t));){let[,t,n,i]=s;t=parseInt(t,10);if(t en e){if(0===t)break}else e[t]=[n,i]}const i=[];for(let t=0;t<e.length&&t en e;++t){let[s,n]=e[t];n=rfc2616unquote(n);if(s){n=unescape(n);0===t&&(n=rfc5987decode(n))}i.push(n)}return i.join("")}(t);if(s){return fixupEncoding(rfc2047decode(s))}s=toParamRegExp("nombrearchivo","i").exec(t);if(s){s=s[1];let t=rfc2616unquote(s);t=rfc2047decode(t);devuelve fixupEncoding(t)}función toParamRegExp(t,e){devuelve nueva RegExp("(?:^|;)\\s*"+t+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',e)}función textdecode(t,s){if(t){if(!/^[\x00-\xFF]+$/.test(s))devuelve s;try{const i=new TextDecoder(t,{fatal:!0}),r=(0,n.stringToBytes)(s);s=i.decode(r);e=!1}catch(t){}}devuelve s}función fixupEncoding(t){if(e&&/[\x80-\xff]/.test(t)){t=textdecode("utf-8",t);e&&(t=textdecode("iso-8859-1",t))}devuelve t}función rfc2616unquote(t){if(t.startsWith('"')){const e=t.slice(1).split('\\"');for(let t=0;t<e.length;++t){const s=e[t].indexOf('"');if(-1!==s){e[t]=e[t].slice(0,s);e.length=t+1}e[t]=e[t].replace(/\\(.)/g,"$1")}t=e.join('"')}devuelve t}función rfc5987decode(t){const e=t.indexOf("'");if(-1===e)return t;return textdecode(t.slice(0,e),t.slice(e+1).replace(/^[^']*'/,""))}función rfc2047decode(t){return!t.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(t)?t:t.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,(función(t,e,s,n){if("q"===s||"Q"===s)return textdecode(e,n=(n=n.replace(/_/g," ")).reemplazar(/=([0-9a-fA-F]{2})/g,(función(t,e){devuelve String.fromCharCode(parseInt(e,16))})));intentar{n=atob(n)}capturar(t){}devolver textdecode(e,n)}))}devolver""};var n=s(1)},(t,e,s)=>{Objeto.defineProperty(e,"__esModule",{valor:!0});e.PDFNetworkStream=void 0;var n=s(1),i=s(33);clase NetworkManager{constructor(t,e={}){this.url=t;this.isHttp=/^https?:/i.test(t);this.httpHeaders=this.isHttp&&e.httpHeaders||Object.create(null);this.withCredentials=e.withCredentials||!1;this.getXhr=e.getXhr||function NetworkManager_getXhr(){devolver nueva XMLHttpRequest};this.currXhrId=0;this.pendingRequests=Object.create(null)}requestRange(t,e,s){const n={begin:t,end:e};for(const t in s)n[t]=s[t];devolver this.request(n)}requestFull(t){devolver this.request(t)}request(t){const e=this.getXhr(),s=this.currXhrId++,n=this.pendingRequests[s]={xhr:e};e.open("GET",this.url);e.withCredentials=this.withCredentials;for(const t in this.httpHeaders){const s=this.httpHeaders[t];void 0!==s&&e.setRequestHeader(t,s)}if(this.isHttp&&"begin"in t&&"end"in t){e.setRequestHeader("Rango",`bytes=${t.begin}-${t.end-1}`);n.expectedStatus=206}else n.expectedStatus=200;e.responseType="arraybuffer";t.onError&&(e.onerror=function(s){t.onError(e.status)}); e.onreadystatechange=this.onStateChange.bind(this,s); e.onprogress=this.onProgress.bind(this,s); n.onHeadersReceived=t.onHeadersReceived; n.onDone=t.onDone; n.onError=t.onError; n.onProgress=t.onProgress; e.send(null); return s}onProgress(t,e){const s=this.pendingRequests[t]; s&&s.onProgress?.(e)}onStateChange(t,e){const s=this.pendingRequests[t]; if(!s)return;const i=s.xhr;si(i.readyState>=2&&s.onHeadersReceived){s.onHeadersReceived();eliminar s.onHeadersReceived}si(4!==i.readyState)retorno;si(!(t en este.pendingRequests))retorno;eliminar este.pendingRequests[t];si(0===i.status&&this.isHttp){s.onError?.(i.status);retorno}const r=i.status||200;si(!(200===r&&206===s.expectedStatus)&&r!==s.expectedStatus){s.onError?.(i.status);retorno}const a=función getArrayBuffer(t){const e=t.response;devuelve "cadena"!=typeof e?e:(0,n.stringToBytes)(e).buffer}(i);if(206===r){const t=i.getResponseHeader("Rango de contenido"),e=/bytes (\d+)-(\d+)\/(\d+)/.exec(t);s.onDone({begin:parseInt(e[1],10),chunk:a})}else a?s.onDone({begin:0,chunk:a}):s.onError?.(i.status)}getRequestXhr(t){devuelve this.pendingRequests[t].xhr}isPendingRequest(t){devuelve t en this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;eliminar this.pendingRequests[t];e.abort()}}e.PDFNetworkStream=clase PDFNetworkStream{constructor(t){this._source=t;this._manager=new NetworkManager(t.url,{httpHeaders:t.httpHeaders,withCredentials:t.withCredenabortRequest(t); this._headersReceivedCapability.resolve()}_onDone(t){si(t)si(this._requests.length>0){this._requests.shift().resolve({valor:t.chunk,hecho:!1})}de lo contrario this._cachedChunks.push(t.chunk);this._done=!0;si(!(this._cachedChunks.length>0)){para(const t de this._requests)t.resolve({valor:void 0,hecho:!0});this._requests.length=0}}_onError(t){this._storedError=(0,i.createResponseStatusError)(t,this._url);this._headersReceivedCapability.reject(this._storedError);para(const t de this._requests)t.reject(this._storedError);this._requests.length=0;this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}obtener nombre_de_archivo(){devolver this._filename}obtener isRangeSupported(){devolver this._isRangeSupported}obtener isStreamingSupported(){devolver this._isStreamingSupported}obtener contentLength(){devolver this._contentLength}obtener headersReady(){devolver this._headersReceivedCapability.promise}lectura asíncrona(){if(this._storedError)lanzar este._storedError; si (este._cachedChunks.length>0){devolver{valor:este._cachedChunks.shift(),hecho:!1}}si (este._hecho)devolver{valor:void 0,hecho:!0};const t=(0,n.createPromiseCapability)();este._requests.push(t);devolver t.promesa}cancelar(t){este._hecho=!0;este._headersReceivedCapability.reject(t);para(const t de este._requests)t.resolve({valor:void 0, hecho:!0}); this._requests.length=0; this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId); this._fullRequestReader=null}}clase PDFNetworkStreamRangeRequestReader{constructor(t,e,s){this._manager=t;const n={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url;this._requestId=t.requestRange(e,s,n);this._requests=[];this._queuedChunk=null;this._done=!1;this._storedError=void 0;this.onProgress=null;this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(t){const e=t.chunk;if(this._requests.length>0){this._requests.shift().resolve({valor:e,hecho:!1})}de lo contrario this._queuedChunk=e;this._done=!0;for(const t de this._requests)t.resolve({valor:void 0,hecho:!0});this._requests.length=0;this._close()}_onError(t){this._storedError=(0,i.createResponseStatusError)(t,this._url);for(const t de this._requests)t.reject(this._storedError);this._requests.length=0;this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}obtener isStreamingSupported(){devolver!1}lectura asíncrona(){si(this._storedError)lanzar this._storedError;si(null!==this._queuedChunk){const t=this._queuedChunk;this._queuedChunk=null;devolver{valor:t,hecho:!1}}si(this._done)devolver{valor:void 0,hecho:!0};const t=(0,n.createPromiseCapability)();this._requests.push(t);devolver t.promise}cancel(t){this._done=!0;for(const t de this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0;this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId);this._close()}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{valor:!0});e.PDFFetchStream=void 0;var n=s(1),i=s(33);función createFetchOptions(t,e,s){return{método:"GET",headers:t,señal:s.signal,mode:"cors",credentials:e?"include":"mismo-origen",redirect:"follow"}}función createHeaders(t){const e=new Headers;for(const s in t){const n=t[s];void 0!==n&&e.append(s,n)}return e}e.PDFFetchStream=class PDFFetchStream{constructor(t){this.source=t;this.isHttp=/^https?:/i.test(t.url);this.httpHeaders=this.isHttp&&t.httpHeaders||{};this._fullRequestReader=null;this._rangeRequestReaders=[]}get _progressiveDataLength(){devuelve this._fullRequestReader?._loaded??0}getFullReader(){(0,n.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader solo se puede llamar una vez.");this._fullRequestReader=new PDFFetchStreamReader(this);devuelve this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)devuelve null;const s=new PDFFetchStreamRangeReader(this,t,e);this._rangeRequestReaders.push(s);devuelve s}cancelAllRequests(t){this._fullRequestReader&&this._fullRequestReader.cancel(t);para(const e de this._rangeRequestReaders.slice(0))e.cancel(t)}};clase PDFFetchStreamReader{constructor(t){this._stream=t;this._reader=null;this._loaded=0;this._filename=null;const e=t.origen;this._withCredentials=e.withCredentials||!1;this._contentLength=e.length;this._headersCapability=(0,n.createPromiseCapability)();this._disableRange=e.disableRange||!1;this._rangeChunkSize=e.rangeChunkSize;this._rangeChunkSize||this._disableRange||(this._disableRange=!0);this._abortController=new AbortController;this._isStreamingSupported=!e.disableStream;this._isRangeSupported=!e.disableRange;this._headers=createHeaders(this._stream.httpHeaders);const s=e.url;fetch(s,createFetchOptions(this._headers,this._withCredentials,this._abortController)).then((t=>{if(!(0,i.validateResponseStatus)(t.status))throw(0,i.createResponseStatusError)(t.status,s);this._reader=t.body.getReader();this._headersCapability.resolve();const getResponseHeader=e=>t.headers.get(e),{allowRangeRequests:e,suggestedLength:r}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:getResponseHeader,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=e;this._contentLength=r||this._contentLength;this._filename=(0,i.extractFilenameFromHeader)(getResponseHeader);!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new n.AbortException("La transmisión es deshabilitado."))})).catch(this._headersCapability.reject);this.onProgress=null}obtener headersReady(){devolver this._headersCapability.promise}obtener filename(){devolver this._filename}obtener contentLength(){devolver this._contentLength}obtener isRangeSupported(){devolver this._isRangeSupported}obtener isStreamingSupported(){devolver this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.leer(); si (e) devolver {valor: t, hecho: e}; esto._cargado+=t.byteLength; esto.onProgress&& esto.onProgress({cargado: esto._cargado, total: esto._contentLength}); devolver {valor: nuevo Uint8Array(t).buffer, hecho: !1}} cancelar(t) {esto._lector&& esto._lector.cancelar(t); esto._abortController.abort()}} clase PDFFetchStreamRangeReader {constructor (t, e, s) {esto._flujo=t; esto._lector=null; esto._cargado=0; constante r=t.source;this._withCredentials=r.withCredentials||!1;this._readCapability=(0,n.createPromiseCapability)();this._isStreamingSupported=!r.disableStream;this._abortController=new AbortController;this._headers=createHeaders(this._stream.httpHeaders);this._headers.append("Rango",`bytes=${e}-${s-1}`);const a=r.url;fetch(a,createFetchOptions(this._headers,this._withCredentials,this._abortController)).then((t=>{if(!(0,i.validateResponseStatus)(t.status))throw(0,i.createResponseStatusError)(t.status,a);this._readCapability.resolve();this._reader=t.body.getReader()})).catch(this._readCapability.reject);this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:e}=await este._lector.read();si(e)devuelve{valor:t,hecho:e};este._cargado+=t.byteLength;este.onProgress&&este.onProgress({cargado:este._cargado});devuelve{valor:new Uint8Array(t).buffer,hecho:!1}}cancelar(t){este._lector&&este._lector.cancel(t);este._abortController.abort()}}}],__webpack_module_cache__={};función __w_pdfjs_require__(t){var e=__webpack_module_cache__[t];si(void 0!==e)devuelve e.exports;var s=__webpack_module_cache__[t]={exports:{}};__webpack_modules__[t](s,s.exports,__w_pdfjs_require__);devolver s.exports}var __webpack_exports__={};(()=>{var t=__webpack_exports__;Object.defineProperty(t,"__esModule",{valor:!0});Object.defineProperty(t,"Capa del Editor de Anotaciones",{enumerable:!0,get:function(){devolver i.Capa del Editor de Anotaciones}});Object.defineProperty(t,"Tipo de Parámetros del Editor de Anotaciones",{enumerable:!0,get:function(){devolver e.AnnotationEditorParamsType}});Object.defineProperty(t,"TipoEditorDeAnotación",{enumerable:!0,get:function(){return e.AnnotationEditorType}});Object.defineProperty(t,"GestorUIEditorDeAnotación",{enumerable:!0,get:function(){return r.AnnotationEditorUIManager}});Object.defineProperty(t,"CapaDeAnotación",{enumerable:!0,get:function(){return a.CapaDeAnotación}});Object.defineProperty(t,"ModoDeAnotación",{enumerable:!0,get:function(){return e.ModoDeAnotación}});Object.defineProperty(t,"TipoCompresiónCMap",{enumerable:!0,get:function(){return e.CMapCompressionType}});Object.defineProperty(t,"GlobalWorkerOptions",{enumerable:!0,get:function(){return o.GlobalWorkerOptions}});Object.defineProperty(t,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}});Object.defineProperty(t,"LoopbackPort",{enumerable:!0,get:function(){return s.LoopbackPort}});Object.defineProperty(t,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}});Object.defineProperty(t,"OPS",{enumerable:!0,get:function(){return e.OPS}});Object.defineProperty(t,"PDFDataRangeTransport",{enumerable:!0,get:function(){return s.PDFDataRangeTransport}});Object.defineProperty(t,"PDFDateString",{enumerable:!0,get:function(){return n.PDFDateString}});Object.defineProperty(t,"PDFWorker",{enumerable:!0,get:function(){return s.PDFWorker}});Object.defineProperty(t,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}});Object.defineProperty(t,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}});Object.defineProperty(t,"PíxelesPorPulgada",{enumerable:!0,get:function(){return n.PíxelesPorPulgada}});Object.defineProperty(t,"RenderingCancelledException",{enumerable:!0,get:function(){return n.RenderingCancelledException}});Object.defineProperty(t,"SVGGraphics",{enumerable:!0,get:function(){return h.SVGGraphics}});Object.defineProperty(t,"FUNCIONES NO COMPATIBLES",{enumerable:!0,get:function(){return e.UNSUPPORTED_FEATURES}});Object.defineProperty(t,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}});Object.defineProperty(t,"Util",{enumerable:!0,get:function(){return e.Util}});Object.defineProperty(t,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}});Object.defineProperty(t,"XfaLayer",{enumerable:!0,get:function(){return d.XfaLayer}});Object.defineProperty(t,"build",{enumerable:!0,get:function(){return s.build}});Object.defineProperty(t,"createPromiseCapability",{enumerable:!0,get:function(){return e.createPromiseCapability}});Object.defineProperty(t,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}});Object.defineProperty(t,"getDocument",{enumerable:!0,get:function(){return s.getDocument}});Object.defineProperty(t,"getFilenameFromUrl",{enumerable:!0,get:function(){return n.getFilenameFromUrl}});Object.defineProperty(t,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return n.getPdfFilenameFromUrl}});Object.defineProperty(t,"getXfaPageViewport",{enumerable:!0,get:function(){return n.getXfaPageViewport}});Object.defineProperty(t,"isPdfFile",{enumerable:!0,get:function(){return n.isPdfFile}});Object.defineProperty(t,"loadScript",{enumerable:!0,get:function(){return n.loadScript}});Object.defineProperty(t,"renderTextLayer",{enumerable:!0,get:function(){return c.renderTextLayer}});Object.defineProperty(t,"shadow",{enumerable:!0,get:function(){return e.shadow}});Object.defineProperty(t,"versión",{enumerable:!0,get:function(){return s.versión}});var e=__w_pdfjs_require__(1),s=__w_pdfjs_require__(4),n=__w_pdfjs_require__(8),i=__w_pdfjs_require__(22),r=__w_pdfjs_require__(7),a=__w_pdfjs_require__(27),o=__w_pdfjs_require__(15),l=__w_pdfjs_require__(3),c=__w_pdfjs_require__(30),h=__w_pdfjs_require__(31),d=__w_pdfjs_require__(29);if(l.isNodeJS){const{PDFNodeStream:t}=__w_pdfjs_require__(32);(0,s.setPDFNetworkStreamFactory)((e=>new t(e)))}else{const{PDFNetworkStream:t}=__w_pdfjs_require__(35),{PDFFetchStream:e}=__w_pdfjs_require__(36);(0,s.setPDFNetworkStreamFactory)((s=>(0,n.isValidFetchUrl)(s.url)?new e(s):new t(s)))}})();return __webpack_exports__})()));